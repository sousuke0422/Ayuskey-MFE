{"version":3,"sources":["webpack://ayuskey-mfe/./src/client/app/common/views/components/visibility-chooser.vue?6674","webpack://ayuskey-mfe/./src/client/app/desktop/views/components/post-form.vue?eac5","webpack://ayuskey-mfe/./src/client/app/common/views/components/visibility-chooser.vue?6879","webpack://ayuskey-mfe/./src/client/app/common/views/components/visibility-chooser.vue?d7ee","webpack://ayuskey-mfe/./src/client/app/common/views/components/visibility-chooser.vue","webpack://ayuskey-mfe/./src/client/app/common/views/components/visibility-chooser.vue?3ef6","webpack://ayuskey-mfe/./src/client/app/common/scripts/get-face.ts","webpack://ayuskey-mfe/./src/client/app/common/scripts/post-form.ts","webpack://ayuskey-mfe/./src/misc/extract-mentions.ts","webpack://ayuskey-mfe/./src/client/app/desktop/views/components/post-form.vue?b155","webpack://ayuskey-mfe/./src/client/app/desktop/views/components/post-form.vue?2b9e","webpack://ayuskey-mfe/./src/client/app/desktop/views/components/post-form.vue?0c4d","webpack://ayuskey-mfe/./src/client/app/desktop/views/components/post-form.vue","webpack://ayuskey-mfe/./src/client/app/common/views/components/visibility-chooser.vue?2ad9","webpack://ayuskey-mfe/./src/client/app/desktop/views/components/post-form.vue?ff3f"],"names":["___CSS_LOADER_API_SOURCEMAP_IMPORT___","___CSS_LOADER_EXPORT___","___CSS_LOADER_API_IMPORT___","push","module","id","exports","i18n","components","XVisibilityIcon","props","source","required","currentVisibility","type","String","v","this","$store","state","settings","rememberNoteVisibility","device","visibility","defaultNoteVisibility","$nextTick","popover","$refs","rect","getBoundingClientRect","width","offsetWidth","height","offsetHeight","left","top","$root","isMobile","window","pageXOffset","pageYOffset","innerWidth","style","targets","backdrop","opacity","duration","easing","scale","methods","commit","$emit","destroyDom","pointerEvents","complete","_vm","_h","$createElement","_c","_self","staticClass","ref","on","close","class","active","$event","choose","attrs","_v","_s","$t","faces","opts","XPostFormAttaches","then","m","default","XPollEditor","reply","Object","airReply","renote","mention","initialText","initialNote","instant","Boolean","data","posting","text","files","uploadings","poll","pollChoices","pollMultiple","pollExpiration","useCw","cw","geo","visibleUsers","localOnly","autocomplete","draghover","quoteId","recentHashtags","JSON","parse","localStorage","getItem","maxNoteTextLength","computed","xs","x","Math","floor","random","length","mobile","trim","getMeta","meta","host","username","user","ast","mfmForest","filter","map","i","ho","indexOf","applyVisibility","includes","api","userIds","visibleUserIds","uid","userId","users","keepCw","focus","draft","draftId","e","set","init","choices","c","multiple","watch","$watch","saveDraft","trimmedLength","tag","file","click","$chooseDriveFile","attachMedia","driveFile","Array","from","upload","name","uploader","uploadFolder","uploads","got","get","expiration","expiresAt","expiredAfter","navigator","geolocation","getCurrentPosition","pos","coords","err","dialog","title","message","enableHighAccuracy","w","new","visibilityButton","$once","match","canceled","result","which","ctrlKey","metaKey","canPost","post","item","clipboardData","items","kind","getAsFile","lio","lastIndexOf","ext","slice","formatted","Date","lastModified","pastedFileName","replace","pasteDialog","input","allowEmpty","paste","getData","startsWith","preventDefault","showCancelButton","substr","isFile","dataTransfer","isDriveFile","types","dropEffect","effectAllowed","Picker","button","emoji","vm","y","updatedAt","undefined","setItem","stringify","key","value","preview","open","createdAt","toISOString","fileIds","f","replyId","renoteId","viaMobile","disableViaMobile","u","coordinates","longitude","latitude","altitude","accuracy","altitudeAccuracy","heading","isNaN","speed","clear","deleteDraft","onSuccess","catch","onFailure","hashtags","node","hashtag","history","concat","doPreview","mixins","self","$notify","stopPropagation","onDragover","onDragenter","onDragleave","onDrop","suggestRecentHashtags","_l","addTag","_e","removeVisibleUser","addVisibleUser","directives","rawName","expression","model","domProps","target","composing","with","placeholder","onKeydown","onPaste","onPollUpdate","onChangeUploadings","chooseFile","chooseFileFromDrive","kao","removeGeo","setGeo","setVisibility","over","submitText","onChangeFile","showPostPreview","togglePreview","content","locals","add"],"mappings":"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","file":"7647.11.37.1-amfe.js","sourcesContent":["// Imports\nvar ___CSS_LOADER_API_SOURCEMAP_IMPORT___ = require(\"../../../../../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\");\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../../node_modules/css-loader/dist/runtime/api.js\");\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".gqyayizv[data-v-efce9672]{position:static}.gqyayizv>.backdrop[data-v-efce9672]{position:fixed;top:0;left:0;z-index:10000;width:100%;height:100%;background:var(--modalBackdrop);backdrop-filter:blur(4px);opacity:0}.gqyayizv>.popover[data-v-efce9672]{position:absolute;z-index:10001;width:240px;padding:8px 0;background:var(--popupBg);border-radius:4px;box-shadow:0 3px 12px rgba(27,31,35,.15);transform:scale(.5);opacity:0}.gqyayizv>.popover[data-v-efce9672]:not(.isMobile){margin-top:10px;transform-origin:center -10px}.gqyayizv>.popover[data-v-efce9672]:not(.isMobile):before{content:\\\"\\\";display:block;position:absolute;top:-20px;left:calc(50% - 10px);border:10px solid transparent;border-bottom:10px solid var(--popupBg)}.gqyayizv>.popover>div[data-v-efce9672]{display:flex;padding:8px 14px;font-size:12px;color:var(--popupFg);cursor:pointer}.gqyayizv>.popover>div[data-v-efce9672]:hover{background:var(--faceClearButtonHover)}.gqyayizv>.popover>div[data-v-efce9672]:active{background:var(--faceClearButtonActive)}.gqyayizv>.popover>div.active[data-v-efce9672]{color:var(--primaryForeground);background:var(--primary)}.gqyayizv>.popover>div>*[data-v-efce9672]{user-select:none;pointer-events:none}.gqyayizv>.popover>div[data-v-efce9672]>:first-child{display:flex;justify-content:center;align-items:center;margin-right:10px;width:16px}.gqyayizv>.popover>div[data-v-efce9672]>:last-child{flex:1 1 auto}.gqyayizv>.popover>div>:last-child>span[data-v-efce9672]:first-child{display:block;font-weight:700}.gqyayizv>.popover>div>:last-child>span[data-v-efce9672]:last-child:not(:first-child){opacity:.6}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/client/app/common/views/components/visibility-chooser.vue\"],\"names\":[],\"mappings\":\"AAAA,2BAA2B,eAAe,CAAC,qCAAqC,cAAc,CAAC,KAAK,CAAC,MAAM,CAAC,aAAa,CAAC,UAAU,CAAC,WAAW,CAAC,+BAA+B,CAAC,yBAAyB,CAAC,SAAS,CAAC,oCAAoC,iBAAiB,CAAC,aAAa,CAAC,WAAW,CAAC,aAAa,CAAC,yBAAyB,CAAC,iBAAiB,CAAC,wCAAwC,CAAC,mBAAmB,CAAC,SAAS,CAAC,mDAAmD,eAAe,CAAC,6BAA6B,CAAC,0DAA0D,UAAU,CAAC,aAAa,CAAC,iBAAiB,CAAC,SAAS,CAAC,qBAAqB,CAAC,6BAA6B,CAAC,uCAAuC,CAAC,wCAAwC,YAAY,CAAC,gBAAgB,CAAC,cAAc,CAAC,oBAAoB,CAAC,cAAc,CAAC,8CAA8C,sCAAsC,CAAC,+CAA+C,uCAAuC,CAAC,+CAA+C,8BAA8B,CAAC,yBAAyB,CAAC,0CAA0C,gBAAgB,CAAC,mBAAmB,CAAC,qDAAqD,YAAY,CAAC,sBAAsB,CAAC,kBAAkB,CAAC,iBAAiB,CAAC,UAAU,CAAC,oDAAoD,aAAa,CAAC,qEAAqE,aAAa,CAAC,eAAe,CAAC,sFAAsF,UAAU\",\"sourcesContent\":[\".gqyayizv[data-v-efce9672]{position:static}.gqyayizv>.backdrop[data-v-efce9672]{position:fixed;top:0;left:0;z-index:10000;width:100%;height:100%;background:var(--modalBackdrop);backdrop-filter:blur(4px);opacity:0}.gqyayizv>.popover[data-v-efce9672]{position:absolute;z-index:10001;width:240px;padding:8px 0;background:var(--popupBg);border-radius:4px;box-shadow:0 3px 12px rgba(27,31,35,.15);transform:scale(.5);opacity:0}.gqyayizv>.popover[data-v-efce9672]:not(.isMobile){margin-top:10px;transform-origin:center -10px}.gqyayizv>.popover[data-v-efce9672]:not(.isMobile):before{content:\\\"\\\";display:block;position:absolute;top:-20px;left:calc(50% - 10px);border:10px solid transparent;border-bottom:10px solid var(--popupBg)}.gqyayizv>.popover>div[data-v-efce9672]{display:flex;padding:8px 14px;font-size:12px;color:var(--popupFg);cursor:pointer}.gqyayizv>.popover>div[data-v-efce9672]:hover{background:var(--faceClearButtonHover)}.gqyayizv>.popover>div[data-v-efce9672]:active{background:var(--faceClearButtonActive)}.gqyayizv>.popover>div.active[data-v-efce9672]{color:var(--primaryForeground);background:var(--primary)}.gqyayizv>.popover>div>*[data-v-efce9672]{user-select:none;pointer-events:none}.gqyayizv>.popover>div[data-v-efce9672]>:first-child{display:flex;justify-content:center;align-items:center;margin-right:10px;width:16px}.gqyayizv>.popover>div[data-v-efce9672]>:last-child{flex:1 1 auto}.gqyayizv>.popover>div>:last-child>span[data-v-efce9672]:first-child{display:block;font-weight:700}.gqyayizv>.popover>div>:last-child>span[data-v-efce9672]:last-child:not(:first-child){opacity:.6}\"],\"sourceRoot\":\"\"}]);\n// Exports\nmodule.exports = ___CSS_LOADER_EXPORT___;\n","// Imports\nvar ___CSS_LOADER_API_SOURCEMAP_IMPORT___ = require(\"../../../../../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\");\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../../node_modules/css-loader/dist/runtime/api.js\");\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".gjisdzwh[data-v-699b2403]{display:block;padding:16px;background:var(--desktopPostFormBg);overflow:hidden}.gjisdzwh[data-v-699b2403]:after{content:\\\"\\\";display:block;clear:both}.gjisdzwh>.content>.textarea>textarea[data-v-699b2403],.gjisdzwh>.content>input[data-v-699b2403]{display:block;width:100%;font-size:16px;color:var(--desktopPostFormTextareaFg);background:var(--desktopPostFormTextareaBg);outline:none;border:1px solid var(--primaryAlpha01);border-radius:4px;transition:border-color .2s ease;padding:12px 30px 12px 12px}.gjisdzwh>.content>.textarea>textarea[data-v-699b2403]:hover,.gjisdzwh>.content>input[data-v-699b2403]:hover{border-color:var(--primaryAlpha02);transition:border-color .1s ease}.gjisdzwh>.content>.textarea>textarea[data-v-699b2403]:focus,.gjisdzwh>.content>input[data-v-699b2403]:focus{border-color:var(--primaryAlpha05);transition:border-color 0s ease}.gjisdzwh>.content>.textarea>textarea[data-v-699b2403]:disabled,.gjisdzwh>.content>input[data-v-699b2403]:disabled{opacity:.5}.gjisdzwh>.content>.textarea>textarea[data-v-699b2403]::-webkit-input-placeholder,.gjisdzwh>.content>input[data-v-699b2403]::-webkit-input-placeholder{color:var(--primaryAlpha03)}.gjisdzwh>.content>input[data-v-699b2403]{margin-bottom:8px}.gjisdzwh>.content>.textarea>.emoji[data-v-699b2403]{position:absolute;top:0;right:0;padding:10px;font-size:18px;color:var(--text);opacity:.5}.gjisdzwh>.content>.textarea>.emoji[data-v-699b2403]:hover{color:var(--textHighlighted);opacity:1}.gjisdzwh>.content>.textarea>.emoji[data-v-699b2403]:active{color:var(--primary);opacity:1}.gjisdzwh>.content>.textarea>textarea[data-v-699b2403]{margin:0;max-width:100%;min-width:100%;min-height:84px}.gjisdzwh>.content>.textarea>textarea:hover+*+*[data-v-699b2403],.gjisdzwh>.content>.textarea>textarea:hover+*+*+*[data-v-699b2403]{border-color:var(--primaryAlpha02);transition:border-color .1s ease}.gjisdzwh>.content>.textarea>textarea:focus+*+*[data-v-699b2403],.gjisdzwh>.content>.textarea>textarea:focus+*+*+*[data-v-699b2403]{border-color:var(--primaryAlpha05);transition:border-color 0s ease}.gjisdzwh>.content>.textarea>textarea:focus+.emoji[data-v-699b2403]{opacity:.7}.gjisdzwh>.content>.textarea>textarea.with[data-v-699b2403]{border-bottom:1px solid var(--primaryAlpha01)!important;border-radius:4px 4px 0 0}.gjisdzwh>.content>.textarea>.files[data-v-699b2403]{margin:0;padding:0;background:var(--desktopPostFormTextareaBg);border:1px solid var(--primaryAlpha01);border-top:none;border-radius:0 0 4px 4px;transition:border-color .3s ease}.gjisdzwh>.content>.textarea>.files.with[data-v-699b2403]{border-bottom:1px solid var(--primaryAlpha01)!important;border-radius:0}.gjisdzwh>.content>.textarea>.poll-editor[data-v-699b2403]{background:var(--desktopPostFormTextareaBg);border:1px solid var(--primaryAlpha01);border-top:none;border-radius:0 0 4px 4px;transition:border-color .3s ease}.gjisdzwh>.content>.hashtags[data-v-699b2403]{margin:0 0 8px;overflow:hidden;white-space:nowrap;font-size:14px}.gjisdzwh>.content>.hashtags>b[data-v-699b2403]{color:var(--primary)}.gjisdzwh>.content>.hashtags>*[data-v-699b2403]{margin-right:8px;white-space:nowrap}.gjisdzwh>.content>.with-quote[data-v-699b2403]{margin:0 0 8px;color:var(--primary)}.gjisdzwh>.content>.with-quote>button[data-v-699b2403]{padding:4px 8px;color:var(--primaryAlpha04)}.gjisdzwh>.content>.with-quote>button[data-v-699b2403]:hover{color:var(--primaryAlpha06)}.gjisdzwh>.content>.with-quote>button[data-v-699b2403]:active{color:var(--primaryDarken30)}.gjisdzwh>.content>.to-specified[data-v-699b2403]{margin:0 0 8px;color:var(--primary)}.gjisdzwh>.content>.to-specified>.visibleUsers[data-v-699b2403]{display:inline;top:-1px;font-size:14px}.gjisdzwh>.content>.to-specified>.visibleUsers>span[data-v-699b2403]{margin-left:14px}.gjisdzwh>.content>.to-specified>.visibleUsers>span>button[data-v-699b2403]{padding:4px 8px;color:var(--primaryAlpha04)}.gjisdzwh>.content>.to-specified>.visibleUsers>span>button[data-v-699b2403]:hover{color:var(--primaryAlpha06)}.gjisdzwh>.content>.to-specified>.visibleUsers>span>button[data-v-699b2403]:active{color:var(--primaryDarken30)}.gjisdzwh>.content>.local-only[data-v-699b2403]{margin:0 0 8px;color:var(--primary)}.gjisdzwh>.mk-uploader[data-v-699b2403]{margin:8px 0 0;padding:8px;border:1px solid var(--primaryAlpha02);border-radius:4px}.gjisdzwh input[type=file][data-v-699b2403]{display:none}.gjisdzwh .submit[data-v-699b2403]{right:16px;width:110px;height:40px}.gjisdzwh .submit[data-v-699b2403],.gjisdzwh>.text-count[data-v-699b2403]{display:block;position:absolute;bottom:16px}.gjisdzwh>.text-count[data-v-699b2403]{pointer-events:none;right:138px;margin:0;line-height:40px;color:var(--primaryAlpha05)}.gjisdzwh>.text-count.over[data-v-699b2403]{color:#ec3828}.gjisdzwh>.cw[data-v-699b2403],.gjisdzwh>.drive[data-v-699b2403],.gjisdzwh>.geo[data-v-699b2403],.gjisdzwh>.kao[data-v-699b2403],.gjisdzwh>.poll[data-v-699b2403],.gjisdzwh>.upload[data-v-699b2403],.gjisdzwh>.visibility[data-v-699b2403]{display:inline-block;cursor:pointer;padding:0;margin:8px 4px 0 0;width:40px;height:40px;font-size:1em;color:var(--desktopPostFormTransparentButtonFg);background:transparent;outline:none;border:1px solid transparent;border-radius:4px}.gjisdzwh>.cw[data-v-699b2403]:hover,.gjisdzwh>.drive[data-v-699b2403]:hover,.gjisdzwh>.geo[data-v-699b2403]:hover,.gjisdzwh>.kao[data-v-699b2403]:hover,.gjisdzwh>.poll[data-v-699b2403]:hover,.gjisdzwh>.upload[data-v-699b2403]:hover,.gjisdzwh>.visibility[data-v-699b2403]:hover{background:transparent;border-color:var(--primaryAlpha03)}.gjisdzwh>.cw[data-v-699b2403]:active,.gjisdzwh>.drive[data-v-699b2403]:active,.gjisdzwh>.geo[data-v-699b2403]:active,.gjisdzwh>.kao[data-v-699b2403]:active,.gjisdzwh>.poll[data-v-699b2403]:active,.gjisdzwh>.upload[data-v-699b2403]:active,.gjisdzwh>.visibility[data-v-699b2403]:active{color:var(--primaryAlpha06);background:linear-gradient(180deg,var(--desktopPostFormTransparentButtonActiveGradientStart) 0,var(--desktopPostFormTransparentButtonActiveGradientEnd));border-color:var(--primaryAlpha05);box-shadow:inset 0 2px 4px rgba(0,0,0,.15)}.gjisdzwh>.cw[data-v-699b2403]:focus:after,.gjisdzwh>.drive[data-v-699b2403]:focus:after,.gjisdzwh>.geo[data-v-699b2403]:focus:after,.gjisdzwh>.kao[data-v-699b2403]:focus:after,.gjisdzwh>.poll[data-v-699b2403]:focus:after,.gjisdzwh>.upload[data-v-699b2403]:focus:after,.gjisdzwh>.visibility[data-v-699b2403]:focus:after{content:\\\"\\\";pointer-events:none;position:absolute;top:-5px;right:-5px;bottom:-5px;left:-5px;border:2px solid var(--primaryAlpha03);border-radius:8px}.gjisdzwh>.dropzone[data-v-699b2403]{position:absolute;left:0;top:0;width:100%;height:100%;border:2px dashed var(--primaryAlpha05);pointer-events:none}.preview[data-v-699b2403]{background:var(--desktopPostFormBg)}.preview>summary[data-v-699b2403]{padding:0 16px 16px 20px;font-size:14px;color:var(--text)}.preview>.note[data-v-699b2403]{border-top:solid var(--lineWidth) var(--faceDivider)}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/client/app/desktop/views/components/post-form.vue\"],\"names\":[],\"mappings\":\"AAAA,2BAA2B,aAAa,CAAC,YAAY,CAAC,mCAAmC,CAAC,eAAe,CAAC,iCAAiC,UAAU,CAAC,aAAa,CAAC,UAAU,CAAC,iGAAiG,aAAa,CAAC,UAAU,CAAC,cAAc,CAAC,sCAAsC,CAAC,2CAA2C,CAAC,YAAY,CAAC,sCAAsC,CAAC,iBAAiB,CAAC,gCAAgC,CAAC,2BAA2B,CAAC,6GAA6G,kCAAkC,CAAC,gCAAgC,CAAC,6GAA6G,kCAAkC,CAAC,+BAA+B,CAAC,mHAAmH,UAAU,CAAC,uJAAuJ,2BAA2B,CAAC,0CAA0C,iBAAiB,CAAC,qDAAqD,iBAAiB,CAAC,KAAK,CAAC,OAAO,CAAC,YAAY,CAAC,cAAc,CAAC,iBAAiB,CAAC,UAAU,CAAC,2DAA2D,4BAA4B,CAAC,SAAS,CAAC,4DAA4D,oBAAoB,CAAC,SAAS,CAAC,uDAAuD,QAAQ,CAAC,cAAc,CAAC,cAAc,CAAC,eAAe,CAAC,oIAAoI,kCAAkC,CAAC,gCAAgC,CAAC,oIAAoI,kCAAkC,CAAC,+BAA+B,CAAC,oEAAoE,UAAU,CAAC,4DAA4D,uDAAuD,CAAC,yBAAyB,CAAC,qDAAqD,QAAQ,CAAC,SAAS,CAAC,2CAA2C,CAAC,sCAAsC,CAAC,eAAe,CAAC,yBAAyB,CAAC,gCAAgC,CAAC,0DAA0D,uDAAuD,CAAC,eAAe,CAAC,2DAA2D,2CAA2C,CAAC,sCAAsC,CAAC,eAAe,CAAC,yBAAyB,CAAC,gCAAgC,CAAC,8CAA8C,cAAc,CAAC,eAAe,CAAC,kBAAkB,CAAC,cAAc,CAAC,gDAAgD,oBAAoB,CAAC,gDAAgD,gBAAgB,CAAC,kBAAkB,CAAC,gDAAgD,cAAc,CAAC,oBAAoB,CAAC,uDAAuD,eAAe,CAAC,2BAA2B,CAAC,6DAA6D,2BAA2B,CAAC,8DAA8D,4BAA4B,CAAC,kDAAkD,cAAc,CAAC,oBAAoB,CAAC,gEAAgE,cAAc,CAAC,QAAQ,CAAC,cAAc,CAAC,qEAAqE,gBAAgB,CAAC,4EAA4E,eAAe,CAAC,2BAA2B,CAAC,kFAAkF,2BAA2B,CAAC,mFAAmF,4BAA4B,CAAC,gDAAgD,cAAc,CAAC,oBAAoB,CAAC,wCAAwC,cAAc,CAAC,WAAW,CAAC,sCAAsC,CAAC,iBAAiB,CAAC,4CAA4C,YAAY,CAAC,mCAAmC,UAAU,CAAC,WAAW,CAAC,WAAW,CAAC,0EAA0E,aAAa,CAAC,iBAAiB,CAAC,WAAW,CAAC,uCAAuC,mBAAmB,CAAC,WAAW,CAAC,QAAQ,CAAC,gBAAgB,CAAC,2BAA2B,CAAC,4CAA4C,aAAa,CAAC,4OAA4O,oBAAoB,CAAC,cAAc,CAAC,SAAS,CAAC,kBAAkB,CAAC,UAAU,CAAC,WAAW,CAAC,aAAa,CAAC,+CAA+C,CAAC,sBAAsB,CAAC,YAAY,CAAC,4BAA4B,CAAC,iBAAiB,CAAC,sRAAsR,sBAAsB,CAAC,kCAAkC,CAAC,6RAA6R,2BAA2B,CAAC,wJAAwJ,CAAC,kCAAkC,CAAC,0CAA0C,CAAC,gUAAgU,UAAU,CAAC,mBAAmB,CAAC,iBAAiB,CAAC,QAAQ,CAAC,UAAU,CAAC,WAAW,CAAC,SAAS,CAAC,sCAAsC,CAAC,iBAAiB,CAAC,qCAAqC,iBAAiB,CAAC,MAAM,CAAC,KAAK,CAAC,UAAU,CAAC,WAAW,CAAC,uCAAuC,CAAC,mBAAmB,CAAC,0BAA0B,mCAAmC,CAAC,kCAAkC,wBAAwB,CAAC,cAAc,CAAC,iBAAiB,CAAC,gCAAgC,oDAAoD\",\"sourcesContent\":[\".gjisdzwh[data-v-699b2403]{display:block;padding:16px;background:var(--desktopPostFormBg);overflow:hidden}.gjisdzwh[data-v-699b2403]:after{content:\\\"\\\";display:block;clear:both}.gjisdzwh>.content>.textarea>textarea[data-v-699b2403],.gjisdzwh>.content>input[data-v-699b2403]{display:block;width:100%;font-size:16px;color:var(--desktopPostFormTextareaFg);background:var(--desktopPostFormTextareaBg);outline:none;border:1px solid var(--primaryAlpha01);border-radius:4px;transition:border-color .2s ease;padding:12px 30px 12px 12px}.gjisdzwh>.content>.textarea>textarea[data-v-699b2403]:hover,.gjisdzwh>.content>input[data-v-699b2403]:hover{border-color:var(--primaryAlpha02);transition:border-color .1s ease}.gjisdzwh>.content>.textarea>textarea[data-v-699b2403]:focus,.gjisdzwh>.content>input[data-v-699b2403]:focus{border-color:var(--primaryAlpha05);transition:border-color 0s ease}.gjisdzwh>.content>.textarea>textarea[data-v-699b2403]:disabled,.gjisdzwh>.content>input[data-v-699b2403]:disabled{opacity:.5}.gjisdzwh>.content>.textarea>textarea[data-v-699b2403]::-webkit-input-placeholder,.gjisdzwh>.content>input[data-v-699b2403]::-webkit-input-placeholder{color:var(--primaryAlpha03)}.gjisdzwh>.content>input[data-v-699b2403]{margin-bottom:8px}.gjisdzwh>.content>.textarea>.emoji[data-v-699b2403]{position:absolute;top:0;right:0;padding:10px;font-size:18px;color:var(--text);opacity:.5}.gjisdzwh>.content>.textarea>.emoji[data-v-699b2403]:hover{color:var(--textHighlighted);opacity:1}.gjisdzwh>.content>.textarea>.emoji[data-v-699b2403]:active{color:var(--primary);opacity:1}.gjisdzwh>.content>.textarea>textarea[data-v-699b2403]{margin:0;max-width:100%;min-width:100%;min-height:84px}.gjisdzwh>.content>.textarea>textarea:hover+*+*[data-v-699b2403],.gjisdzwh>.content>.textarea>textarea:hover+*+*+*[data-v-699b2403]{border-color:var(--primaryAlpha02);transition:border-color .1s ease}.gjisdzwh>.content>.textarea>textarea:focus+*+*[data-v-699b2403],.gjisdzwh>.content>.textarea>textarea:focus+*+*+*[data-v-699b2403]{border-color:var(--primaryAlpha05);transition:border-color 0s ease}.gjisdzwh>.content>.textarea>textarea:focus+.emoji[data-v-699b2403]{opacity:.7}.gjisdzwh>.content>.textarea>textarea.with[data-v-699b2403]{border-bottom:1px solid var(--primaryAlpha01)!important;border-radius:4px 4px 0 0}.gjisdzwh>.content>.textarea>.files[data-v-699b2403]{margin:0;padding:0;background:var(--desktopPostFormTextareaBg);border:1px solid var(--primaryAlpha01);border-top:none;border-radius:0 0 4px 4px;transition:border-color .3s ease}.gjisdzwh>.content>.textarea>.files.with[data-v-699b2403]{border-bottom:1px solid var(--primaryAlpha01)!important;border-radius:0}.gjisdzwh>.content>.textarea>.poll-editor[data-v-699b2403]{background:var(--desktopPostFormTextareaBg);border:1px solid var(--primaryAlpha01);border-top:none;border-radius:0 0 4px 4px;transition:border-color .3s ease}.gjisdzwh>.content>.hashtags[data-v-699b2403]{margin:0 0 8px;overflow:hidden;white-space:nowrap;font-size:14px}.gjisdzwh>.content>.hashtags>b[data-v-699b2403]{color:var(--primary)}.gjisdzwh>.content>.hashtags>*[data-v-699b2403]{margin-right:8px;white-space:nowrap}.gjisdzwh>.content>.with-quote[data-v-699b2403]{margin:0 0 8px;color:var(--primary)}.gjisdzwh>.content>.with-quote>button[data-v-699b2403]{padding:4px 8px;color:var(--primaryAlpha04)}.gjisdzwh>.content>.with-quote>button[data-v-699b2403]:hover{color:var(--primaryAlpha06)}.gjisdzwh>.content>.with-quote>button[data-v-699b2403]:active{color:var(--primaryDarken30)}.gjisdzwh>.content>.to-specified[data-v-699b2403]{margin:0 0 8px;color:var(--primary)}.gjisdzwh>.content>.to-specified>.visibleUsers[data-v-699b2403]{display:inline;top:-1px;font-size:14px}.gjisdzwh>.content>.to-specified>.visibleUsers>span[data-v-699b2403]{margin-left:14px}.gjisdzwh>.content>.to-specified>.visibleUsers>span>button[data-v-699b2403]{padding:4px 8px;color:var(--primaryAlpha04)}.gjisdzwh>.content>.to-specified>.visibleUsers>span>button[data-v-699b2403]:hover{color:var(--primaryAlpha06)}.gjisdzwh>.content>.to-specified>.visibleUsers>span>button[data-v-699b2403]:active{color:var(--primaryDarken30)}.gjisdzwh>.content>.local-only[data-v-699b2403]{margin:0 0 8px;color:var(--primary)}.gjisdzwh>.mk-uploader[data-v-699b2403]{margin:8px 0 0;padding:8px;border:1px solid var(--primaryAlpha02);border-radius:4px}.gjisdzwh input[type=file][data-v-699b2403]{display:none}.gjisdzwh .submit[data-v-699b2403]{right:16px;width:110px;height:40px}.gjisdzwh .submit[data-v-699b2403],.gjisdzwh>.text-count[data-v-699b2403]{display:block;position:absolute;bottom:16px}.gjisdzwh>.text-count[data-v-699b2403]{pointer-events:none;right:138px;margin:0;line-height:40px;color:var(--primaryAlpha05)}.gjisdzwh>.text-count.over[data-v-699b2403]{color:#ec3828}.gjisdzwh>.cw[data-v-699b2403],.gjisdzwh>.drive[data-v-699b2403],.gjisdzwh>.geo[data-v-699b2403],.gjisdzwh>.kao[data-v-699b2403],.gjisdzwh>.poll[data-v-699b2403],.gjisdzwh>.upload[data-v-699b2403],.gjisdzwh>.visibility[data-v-699b2403]{display:inline-block;cursor:pointer;padding:0;margin:8px 4px 0 0;width:40px;height:40px;font-size:1em;color:var(--desktopPostFormTransparentButtonFg);background:transparent;outline:none;border:1px solid transparent;border-radius:4px}.gjisdzwh>.cw[data-v-699b2403]:hover,.gjisdzwh>.drive[data-v-699b2403]:hover,.gjisdzwh>.geo[data-v-699b2403]:hover,.gjisdzwh>.kao[data-v-699b2403]:hover,.gjisdzwh>.poll[data-v-699b2403]:hover,.gjisdzwh>.upload[data-v-699b2403]:hover,.gjisdzwh>.visibility[data-v-699b2403]:hover{background:transparent;border-color:var(--primaryAlpha03)}.gjisdzwh>.cw[data-v-699b2403]:active,.gjisdzwh>.drive[data-v-699b2403]:active,.gjisdzwh>.geo[data-v-699b2403]:active,.gjisdzwh>.kao[data-v-699b2403]:active,.gjisdzwh>.poll[data-v-699b2403]:active,.gjisdzwh>.upload[data-v-699b2403]:active,.gjisdzwh>.visibility[data-v-699b2403]:active{color:var(--primaryAlpha06);background:linear-gradient(180deg,var(--desktopPostFormTransparentButtonActiveGradientStart) 0,var(--desktopPostFormTransparentButtonActiveGradientEnd));border-color:var(--primaryAlpha05);box-shadow:inset 0 2px 4px rgba(0,0,0,.15)}.gjisdzwh>.cw[data-v-699b2403]:focus:after,.gjisdzwh>.drive[data-v-699b2403]:focus:after,.gjisdzwh>.geo[data-v-699b2403]:focus:after,.gjisdzwh>.kao[data-v-699b2403]:focus:after,.gjisdzwh>.poll[data-v-699b2403]:focus:after,.gjisdzwh>.upload[data-v-699b2403]:focus:after,.gjisdzwh>.visibility[data-v-699b2403]:focus:after{content:\\\"\\\";pointer-events:none;position:absolute;top:-5px;right:-5px;bottom:-5px;left:-5px;border:2px solid var(--primaryAlpha03);border-radius:8px}.gjisdzwh>.dropzone[data-v-699b2403]{position:absolute;left:0;top:0;width:100%;height:100%;border:2px dashed var(--primaryAlpha05);pointer-events:none}.preview[data-v-699b2403]{background:var(--desktopPostFormBg)}.preview>summary[data-v-699b2403]{padding:0 16px 16px 20px;font-size:14px;color:var(--text)}.preview>.note[data-v-699b2403]{border-top:solid var(--lineWidth) var(--faceDivider)}\"],\"sourceRoot\":\"\"}]);\n// Exports\nmodule.exports = ___CSS_LOADER_EXPORT___;\n","import Vue from 'vue';\nimport i18n from '../../../i18n';\nimport anime from 'animejs';\nimport XVisibilityIcon from './visibility-icon.vue';\nexport default Vue.extend({\n    i18n: i18n('common/views/components/visibility-chooser.vue'),\n    components: {\n        XVisibilityIcon,\n    },\n    props: {\n        source: {\n            required: true\n        },\n        currentVisibility: {\n            type: String,\n            required: false\n        }\n    },\n    data() {\n        return {\n            v: this.$store.state.settings.rememberNoteVisibility ? (this.$store.state.device.visibility || this.$store.state.settings.defaultNoteVisibility) : (this.currentVisibility || this.$store.state.settings.defaultNoteVisibility)\n        };\n    },\n    mounted() {\n        this.$nextTick(() => {\n            const popover = this.$refs.popover;\n            const rect = this.source.getBoundingClientRect();\n            const width = popover.offsetWidth;\n            const height = popover.offsetHeight;\n            let left;\n            let top;\n            if (this.$root.isMobile) {\n                const x = rect.left + window.pageXOffset + (this.source.offsetWidth / 2);\n                const y = rect.top + window.pageYOffset + (this.source.offsetHeight / 2);\n                left = (x - (width / 2));\n                top = (y - (height / 2));\n            }\n            else {\n                const x = rect.left + window.pageXOffset + (this.source.offsetWidth / 2);\n                const y = rect.top + window.pageYOffset + this.source.offsetHeight;\n                left = (x - (width / 2));\n                top = y;\n            }\n            if (left + width > window.innerWidth) {\n                left = window.innerWidth - width;\n            }\n            popover.style.left = left + 'px';\n            popover.style.top = top + 'px';\n            anime({\n                targets: this.$refs.backdrop,\n                opacity: 1,\n                duration: 100,\n                easing: 'linear'\n            });\n            anime({\n                targets: this.$refs.popover,\n                opacity: 1,\n                scale: [0.5, 1],\n                duration: 500\n            });\n        });\n    },\n    methods: {\n        choose(visibility) {\n            if (this.$store.state.settings.rememberNoteVisibility) {\n                this.$store.commit('device/setVisibility', visibility);\n            }\n            this.$emit('chosen', visibility);\n            this.destroyDom();\n        },\n        close() {\n            this.$refs.backdrop.style.pointerEvents = 'none';\n            anime({\n                targets: this.$refs.backdrop,\n                opacity: 0,\n                duration: 200,\n                easing: 'linear'\n            });\n            this.$refs.popover.style.pointerEvents = 'none';\n            anime({\n                targets: this.$refs.popover,\n                opacity: 0,\n                scale: 0.5,\n                duration: 200,\n                easing: 'easeInBack',\n                complete: () => this.destroyDom()\n            });\n        }\n    }\n});\n","import mod from \"-!../../../../../../node_modules/ts-loader/index.js??clonedRuleSet-7[0].rules[0].use[0]!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../node_modules/vue-svg-inline-loader/src/index.js!./visibility-chooser.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../../../node_modules/ts-loader/index.js??clonedRuleSet-7[0].rules[0].use[0]!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../node_modules/vue-svg-inline-loader/src/index.js!./visibility-chooser.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./visibility-chooser.vue?vue&type=template&id=efce9672&scoped=true&\"\nimport script from \"./visibility-chooser.vue?vue&type=script&lang=ts&\"\nexport * from \"./visibility-chooser.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./visibility-chooser.vue?vue&type=style&index=0&id=efce9672&lang=stylus&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"efce9672\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"gqyayizv\"},[_c('div',{ref:\"backdrop\",staticClass:\"backdrop\",on:{\"click\":_vm.close}}),_c('div',{ref:\"popover\",staticClass:\"popover\",class:{ isMobile: _vm.$root.isMobile }},[_c('div',{class:{ active: _vm.v == 'public' },on:{\"click\":function($event){return _vm.choose('public')}}},[_c('x-visibility-icon',{attrs:{\"v\":\"public\"}}),_c('div',[_c('span',[_vm._v(_vm._s(_vm.$t('public')))]),_c('span',[_vm._v(_vm._s(_vm.$t('public-desc')))])])],1),_c('div',{class:{ active: _vm.v == 'home' },on:{\"click\":function($event){return _vm.choose('home')}}},[_c('x-visibility-icon',{attrs:{\"v\":\"home\"}}),_c('div',[_c('span',[_vm._v(_vm._s(_vm.$t('home')))]),_c('span',[_vm._v(_vm._s(_vm.$t('home-desc')))])])],1),_c('div',{class:{ active: _vm.v == 'followers' },on:{\"click\":function($event){return _vm.choose('followers')}}},[_c('x-visibility-icon',{attrs:{\"v\":\"followers\"}}),_c('div',[_c('span',[_vm._v(_vm._s(_vm.$t('followers')))]),_c('span',[_vm._v(_vm._s(_vm.$t('followers-desc')))])])],1),_c('div',{class:{ active: _vm.v == 'specified' },on:{\"click\":function($event){return _vm.choose('specified')}}},[_c('x-visibility-icon',{attrs:{\"v\":\"specified\"}}),_c('div',[_c('span',[_vm._v(_vm._s(_vm.$t('specified')))]),_c('span',[_vm._v(_vm._s(_vm.$t('specified-desc')))])])],1),_c('div',{class:{ active: _vm.v == 'local-public' },on:{\"click\":function($event){return _vm.choose('local-public')}}},[_c('x-visibility-icon',{attrs:{\"v\":\"local-public\"}}),_c('div',[_c('span',[_vm._v(_vm._s(_vm.$t('local-public')))]),_c('span',[_vm._v(_vm._s(_vm.$t('local-public-desc')))])])],1),_c('div',{class:{ active: _vm.v == 'local-home' },on:{\"click\":function($event){return _vm.choose('local-home')}}},[_c('x-visibility-icon',{attrs:{\"v\":\"local-home\"}}),_c('div',[_c('span',[_vm._v(_vm._s(_vm.$t('local-home')))])])],1),_c('div',{class:{ active: _vm.v == 'local-followers' },on:{\"click\":function($event){return _vm.choose('local-followers')}}},[_c('x-visibility-icon',{attrs:{\"v\":\"local-followers\"}}),_c('div',[_c('span',[_vm._v(_vm._s(_vm.$t('local-followers')))])])],1)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","const faces = [\n    '(=^^=)',\n    'v(\\'\\')v',\n    '( \\'-\\'  )!!!!',\n    '(_`)',\n    '(><)',\n    '(x)',\n    '()'\n];\nexport default () => faces[Math.floor(Math.random() * faces.length)];\n","import insertTextAtCursor from 'insert-text-at-cursor';\nimport { length } from 'stringz';\nimport { toASCII } from 'punycode';\nimport MkVisibilityChooser from '../views/components/visibility-chooser.vue';\nimport getFace from './get-face';\nimport { parse } from '../../../../mfm/parse';\nimport { host, url } from '../../config';\nimport i18n from '../../i18n';\nimport { erase, unique } from '../../../../prelude/array';\nimport extractMentions from '../../../../misc/extract-mentions';\nimport { formatTimeString } from '../../../../misc/format-time-string';\nexport default (opts) => ({\n    i18n: i18n(),\n    components: {\n        XPostFormAttaches: () => import('../views/components/post-form-attaches.vue').then(m => m.default),\n        XPollEditor: () => import('../views/components/poll-editor.vue').then(m => m.default)\n    },\n    props: {\n        reply: {\n            type: Object,\n            required: false\n        },\n        airReply: {\n            type: Object,\n            required: false\n        },\n        renote: {\n            type: Object,\n            required: false\n        },\n        mention: {\n            type: Object,\n            required: false\n        },\n        initialText: {\n            type: String,\n            required: false\n        },\n        initialNote: {\n            type: Object,\n            required: false\n        },\n        instant: {\n            type: Boolean,\n            required: false,\n            default: false\n        }\n    },\n    data() {\n        return {\n            posting: false,\n            text: '',\n            files: [],\n            uploadings: [],\n            poll: false,\n            pollChoices: [],\n            pollMultiple: false,\n            pollExpiration: [],\n            useCw: false,\n            cw: null,\n            geo: null,\n            visibility: 'public',\n            visibleUsers: [],\n            localOnly: false,\n            autocomplete: null,\n            draghover: false,\n            quoteId: null,\n            recentHashtags: JSON.parse(localStorage.getItem('hashtags') || '[]'),\n            maxNoteTextLength: 1000\n        };\n    },\n    computed: {\n        draftId() {\n            return this.renote\n                ? `renote:${this.renote.id}`\n                : this.reply\n                    ? `reply:${this.reply.id}`\n                    : 'note';\n        },\n        placeholder() {\n            const xs = [\n                this.$t('@.note-placeholders.a'),\n                this.$t('@.note-placeholders.b'),\n                this.$t('@.note-placeholders.c'),\n                this.$t('@.note-placeholders.d'),\n                this.$t('@.note-placeholders.e'),\n                this.$t('@.note-placeholders.f')\n            ];\n            const x = xs[Math.floor(Math.random() * xs.length)];\n            return this.renote\n                ? opts.mobile ? this.$t('@.post-form.option-quote-placeholder') : this.$t('@.post-form.quote-placeholder')\n                : this.reply\n                    ? this.$t('@.post-form.reply-placeholder')\n                    : x;\n        },\n        submitText() {\n            return this.renote\n                ? this.$t('@.post-form.renote')\n                : this.reply\n                    ? this.$t('@.post-form.reply')\n                    : this.$t('@.post-form.submit');\n        },\n        canPost() {\n            return !this.posting &&\n                (1 <= this.text.length || 1 <= this.files.length || this.poll || this.renote) &&\n                (length(this.text.trim()) <= this.maxNoteTextLength) &&\n                (!this.poll || this.pollChoices.length >= 2);\n        }\n    },\n    created() {\n        this.$root.getMeta().then(meta => {\n            this.maxNoteTextLength = meta.maxNoteTextLength;\n        });\n    },\n    mounted() {\n        if (this.initialText) {\n            this.text = this.initialText;\n        }\n        if (this.mention) {\n            this.text = this.mention.host ? `@${this.mention.username}@${toASCII(this.mention.host)}` : `@${this.mention.username}`;\n            this.text += ' ';\n        }\n        if (this.reply && this.reply.user.host != null) {\n            this.text = `@${this.reply.user.username}@${toASCII(this.reply.user.host)} `;\n        }\n        if (this.reply && this.reply.text != null) {\n            const ast = parse(this.reply.text);\n            for (const x of extractMentions(ast)) {\n                const mention = x.host ? `@${x.username}@${toASCII(x.host)}` : `@${x.username}`;\n                // \n                if (this.$store.state.i.username == x.username && x.host == null)\n                    continue;\n                if (this.$store.state.i.username == x.username && x.host == host)\n                    continue;\n                // \n                if (this.text.indexOf(`${mention} `) != -1)\n                    continue;\n                this.text += `${mention} `;\n            }\n        }\n        // \n        this.applyVisibility(this.$store.state.settings.rememberNoteVisibility ? (this.$store.state.device.visibility || this.$store.state.settings.defaultNoteVisibility) : this.$store.state.settings.defaultNoteVisibility);\n        if (this.reply && this.reply.localOnly) {\n            this.localOnly = true;\n        }\n        // \n        if (this.reply && ['home', 'followers', 'specified'].includes(this.reply.visibility)) {\n            this.visibility = this.reply.visibility;\n            if (this.reply.visibility === 'specified') {\n                this.$root.api('users/show', {\n                    userIds: this.reply.visibleUserIds.filter(uid => uid !== this.$store.state.i.id && uid !== this.reply.userId)\n                }).then(users => {\n                    this.visibleUsers.push(...users);\n                });\n                if (this.reply.userId !== this.$store.state.i.id) {\n                    this.$root.api('users/show', { userId: this.reply.userId }).then(user => {\n                        this.visibleUsers.push(user);\n                    });\n                }\n            }\n        }\n        // keep cw when reply\n        if (this.$store.state.settings.keepCw && this.reply && this.reply.cw) {\n            this.useCw = true;\n            this.cw = this.reply.cw;\n        }\n        this.focus();\n        this.$nextTick(() => {\n            this.focus();\n        });\n        // \n        if (this.airReply) {\n            this.localOnly = this.airReply.user.host == null && this.airReply.visibility === 'public';\n            this.visibility = this.airReply.visibility;\n            if (this.airReply.user.host != null && this.visibility === 'public') {\n                this.visibility = 'home';\n            }\n        }\n        this.$nextTick(() => {\n            // \n            if (!this.instant && !this.mention) {\n                const draft = JSON.parse(localStorage.getItem('drafts') || '{}')[this.draftId];\n                if (draft) {\n                    this.text = draft.data.text;\n                    this.files = (draft.data.files || []).filter(e => e);\n                    if (draft.data.poll) {\n                        this.poll = true;\n                        this.$nextTick(() => {\n                            this.$refs.poll.set(draft.data.poll);\n                        });\n                    }\n                    this.$emit('change-attached-files', this.files);\n                }\n            }\n            // \n            if (this.initialNote) {\n                const init = this.initialNote;\n                this.text = init.text ? init.text : '';\n                this.files = init.files;\n                this.cw = init.cw;\n                this.useCw = init.cw != null;\n                if (init.poll) {\n                    this.poll = true;\n                    this.$nextTick(() => {\n                        this.$refs.poll.set({\n                            choices: init.poll.choices.map(c => c.text),\n                            multiple: init.poll.multiple\n                        });\n                    });\n                }\n                // hack \n                this.geo = null;\n                this.visibility = init.visibility;\n                this.localOnly = init.localOnly;\n                this.quoteId = init.renote ? init.renote.id : null;\n            }\n            this.$nextTick(() => this.watch());\n        });\n    },\n    methods: {\n        watch() {\n            this.$watch('text', () => this.saveDraft());\n            this.$watch('poll', () => this.saveDraft());\n            this.$watch('files', () => this.saveDraft());\n        },\n        trimmedLength(text) {\n            return length(text.trim());\n        },\n        addTag(tag) {\n            insertTextAtCursor(this.$refs.text, ` #${tag} `);\n        },\n        focus() {\n            this.$refs.text.focus();\n        },\n        chooseFile() {\n            this.$refs.file.click();\n        },\n        chooseFileFromDrive() {\n            this.$chooseDriveFile({\n                multiple: true\n            }).then(files => {\n                for (const x of files)\n                    this.attachMedia(x);\n            });\n        },\n        attachMedia(driveFile) {\n            this.files.push(driveFile);\n            this.$emit('change-attached-files', this.files);\n        },\n        detachMedia(id) {\n            this.files = this.files.filter(x => x.id != id);\n            this.$emit('change-attached-files', this.files);\n        },\n        onChangeFile() {\n            for (const x of Array.from(this.$refs.file.files))\n                this.upload(x);\n        },\n        upload(file, name) {\n            this.$refs.uploader.upload(file, this.$store.state.settings.uploadFolder, name);\n        },\n        onChangeUploadings(uploads) {\n            this.$emit('change-uploadings', uploads);\n        },\n        onPollUpdate() {\n            const got = this.$refs.poll.get();\n            this.pollChoices = got.choices;\n            this.pollMultiple = got.multiple;\n            this.pollExpiration = [got.expiration, got.expiresAt || got.expiredAfter];\n            this.saveDraft();\n        },\n        setGeo() {\n            if (navigator.geolocation == null) {\n                this.$root.dialog({\n                    type: 'warning',\n                    text: this.$t('@.post-form.geolocation-alert')\n                });\n                return;\n            }\n            navigator.geolocation.getCurrentPosition(pos => {\n                this.geo = pos.coords;\n                this.$emit('geo-attached', this.geo);\n            }, err => {\n                this.$root.dialog({\n                    type: 'error',\n                    title: this.$t('@.post-form.error'),\n                    text: err.message\n                });\n            }, {\n                enableHighAccuracy: true\n            });\n        },\n        removeGeo() {\n            this.geo = null;\n            this.$emit('geo-dettached');\n        },\n        setVisibility() {\n            const w = this.$root.new(MkVisibilityChooser, {\n                source: this.$refs.visibilityButton,\n                currentVisibility: this.localOnly ? `local-${this.visibility}` : this.visibility\n            });\n            w.$once('chosen', v => {\n                this.applyVisibility(v);\n            });\n            this.$once('hook:beforeDestroy', () => {\n                w.close();\n            });\n        },\n        applyVisibility(v) {\n            const m = v.match(/^local-(.+)/);\n            if (m) {\n                this.localOnly = true;\n                this.visibility = m[1];\n            }\n            else {\n                this.localOnly = false;\n                this.visibility = v;\n            }\n        },\n        addVisibleUser() {\n            this.$root.dialog({\n                title: this.$t('@.post-form.enter-username'),\n                user: true\n            }).then(({ canceled, result: user }) => {\n                if (canceled)\n                    return;\n                this.visibleUsers.push(user);\n            });\n        },\n        removeVisibleUser(user) {\n            this.visibleUsers = erase(user, this.visibleUsers);\n        },\n        clear() {\n            this.text = '';\n            this.files = [];\n            this.poll = false;\n            this.quoteId = null;\n            this.$emit('change-attached-files', this.files);\n        },\n        onKeydown(e) {\n            if ((e.which == 10 || e.which == 13) && (e.ctrlKey || e.metaKey) && this.canPost)\n                this.post();\n        },\n        async onPaste(e) {\n            for (const { item, i } of Array.from(e.clipboardData.items).map((item, i) => ({ item, i }))) {\n                if (item.kind == 'file') {\n                    const file = item.getAsFile();\n                    const lio = file.name.lastIndexOf('.');\n                    const ext = lio >= 0 ? file.name.slice(lio) : '';\n                    const formatted = `${formatTimeString(new Date(file.lastModified), this.$store.state.settings.pastedFileName).replace(/{{number}}/g, `${i + 1}`)}${ext}`;\n                    const name = this.$store.state.settings.pasteDialog\n                        ? await this.$root.dialog({\n                            title: this.$t('@.post-form.enter-file-name'),\n                            input: {\n                                default: formatted\n                            },\n                            allowEmpty: false\n                        }).then(({ canceled, result }) => canceled ? false : result)\n                        : formatted;\n                    if (name)\n                        this.upload(file, name);\n                }\n            }\n            const paste = e.clipboardData.getData('text');\n            if (!this.renote && !this.quoteId && paste.startsWith(url + '/notes/')) {\n                e.preventDefault();\n                this.$root.dialog({\n                    type: 'info',\n                    text: this.$t('@.post-form.quote-question'),\n                    showCancelButton: true\n                }).then(({ canceled }) => {\n                    if (canceled) {\n                        insertTextAtCursor(this.$refs.text, paste);\n                        return;\n                    }\n                    this.quoteId = paste.substr(url.length).match(/^\\/notes\\/(.+?)\\/?$/)[1];\n                });\n            }\n        },\n        onDragover(e) {\n            const isFile = e.dataTransfer.items[0].kind == 'file';\n            const isDriveFile = e.dataTransfer.types[0] == 'mk_drive_file';\n            if (isFile || isDriveFile) {\n                e.preventDefault();\n                this.draghover = true;\n                e.dataTransfer.dropEffect = e.dataTransfer.effectAllowed == 'all' ? 'copy' : 'move';\n            }\n        },\n        onDragenter(e) {\n            this.draghover = true;\n        },\n        onDragleave(e) {\n            this.draghover = false;\n        },\n        onDrop(e) {\n            this.draghover = false;\n            // \n            if (e.dataTransfer.files.length > 0) {\n                e.preventDefault();\n                for (const x of Array.from(e.dataTransfer.files))\n                    this.upload(x);\n                return;\n            }\n            //#region \n            const driveFile = e.dataTransfer.getData('mk_drive_file');\n            if (driveFile != null && driveFile != '') {\n                const file = JSON.parse(driveFile);\n                this.files.push(file);\n                this.$emit('change-attached-files', this.files);\n                e.preventDefault();\n            }\n            //#endregion\n        },\n        async emoji() {\n            const Picker = await import('../../desktop/views/components/emoji-picker-dialog.vue').then(m => m.default);\n            const button = this.$refs.emoji;\n            const rect = button.getBoundingClientRect();\n            const vm = this.$root.new(Picker, {\n                x: button.offsetWidth + rect.left + window.pageXOffset,\n                y: rect.top + window.pageYOffset\n            });\n            vm.$once('chosen', emoji => {\n                insertTextAtCursor(this.$refs.text, emoji);\n            });\n            this.$once('hook:beforeDestroy', () => {\n                vm.close();\n            });\n        },\n        saveDraft() {\n            if (this.instant)\n                return;\n            const data = JSON.parse(localStorage.getItem('drafts') || '{}');\n            data[this.draftId] = {\n                updatedAt: new Date(),\n                data: {\n                    text: this.text,\n                    files: this.files,\n                    poll: this.poll && this.$refs.poll ? this.$refs.poll.get() : undefined\n                }\n            };\n            localStorage.setItem('drafts', JSON.stringify(data));\n        },\n        deleteDraft() {\n            const data = JSON.parse(localStorage.getItem('drafts') || '{}');\n            delete data[this.draftId];\n            localStorage.setItem('drafts', JSON.stringify(data));\n        },\n        kao() {\n            this.text += getFace();\n        },\n        togglePreview() {\n            this.$store.commit('device/set', { key: 'showPostPreview', value: this.$refs.preview.open });\n        },\n        doPreview() {\n            this.preview = this.canPost ? {\n                id: `${Math.random()}`,\n                createdAt: new Date().toISOString(),\n                userId: this.$store.state.i.id,\n                user: this.$store.state.i,\n                text: this.text == '' ? undefined : this.text,\n                visibility: this.visibility,\n                localOnly: this.localOnly,\n                fileIds: this.files.length > 0 ? this.files.map(f => f.id) : undefined,\n                files: this.files || [],\n                replyId: this.reply ? this.reply.id : undefined,\n                reply: this.reply,\n                renoteId: this.renote ? this.renote.id : this.quoteId ? this.quoteId : undefined,\n                renote: this.renote,\n            } : null;\n        },\n        post() {\n            this.posting = true;\n            const viaMobile = opts.mobile && !this.$store.state.settings.disableViaMobile;\n            this.$root.api('notes/create', {\n                text: this.text == '' ? undefined : this.text,\n                fileIds: this.files.length > 0 ? this.files.map(f => f.id) : undefined,\n                replyId: this.reply ? this.reply.id : undefined,\n                renoteId: this.renote ? this.renote.id : this.quoteId ? this.quoteId : undefined,\n                poll: this.poll ? this.$refs.poll.get() : undefined,\n                cw: this.useCw ? this.cw || '' : undefined,\n                visibility: this.visibility,\n                visibleUserIds: this.visibility == 'specified' ? this.visibleUsers.map(u => u.id) : undefined,\n                localOnly: this.localOnly,\n                geo: this.geo ? {\n                    coordinates: [this.geo.longitude, this.geo.latitude],\n                    altitude: this.geo.altitude,\n                    accuracy: this.geo.accuracy,\n                    altitudeAccuracy: this.geo.altitudeAccuracy,\n                    heading: isNaN(this.geo.heading) ? null : this.geo.heading,\n                    speed: this.geo.speed,\n                } : null,\n                viaMobile: viaMobile\n            }).then(data => {\n                this.clear();\n                this.deleteDraft();\n                this.$emit('posted');\n                if (opts.onSuccess)\n                    opts.onSuccess(this);\n            }).catch(err => {\n                if (opts.onSuccess)\n                    opts.onFailure(this);\n            }).then(() => {\n                this.posting = false;\n            });\n            if (this.text && this.text != '') {\n                const hashtags = parse(this.text).filter(x => x.node.type === 'hashtag').map(x => x.node.props.hashtag);\n                const history = JSON.parse(localStorage.getItem('hashtags') || '[]');\n                localStorage.setItem('hashtags', JSON.stringify(unique(hashtags.concat(history))));\n            }\n        },\n    }\n});\n","// test is located in test/extract-mentions\nimport { preorderF } from '../prelude/tree';\nexport default function (mfmForest) {\n    // TODO: \n    const mentionNodes = preorderF(mfmForest).filter(x => x.type === 'mention');\n    return mentionNodes.map(x => x.props);\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"gjisdzwh\",on:{\"dragover\":function($event){$event.stopPropagation();return _vm.onDragover($event)},\"dragenter\":_vm.onDragenter,\"dragleave\":_vm.onDragleave,\"drop\":function($event){$event.stopPropagation();return _vm.onDrop($event)}}},[_c('div',{staticClass:\"content\"},[(_vm.recentHashtags.length > 0 && _vm.$store.state.settings.suggestRecentHashtags)?_c('div',{staticClass:\"hashtags\"},[_c('b',[_vm._v(_vm._s(_vm.$t('@.post-form.recent-tags'))+\":\")]),_vm._l((_vm.recentHashtags.slice(0, 5)),function(tag){return _c('a',{attrs:{\"title\":_vm.$t('@.post-form.click-to-tagging')},on:{\"click\":function($event){return _vm.addTag(tag)}}},[_vm._v(\"#\"+_vm._s(tag))])})],2):_vm._e(),(_vm.quoteId)?_c('div',{staticClass:\"with-quote\"},[_c('fa',{attrs:{\"icon\":\"quote-left\"}}),_vm._v(\" \"+_vm._s(_vm.$t('@.post-form.quote-attached'))),_c('button',{on:{\"click\":function($event){_vm.quoteId = null}}},[_c('fa',{attrs:{\"icon\":\"times\"}})],1)],1):_vm._e(),(_vm.visibility === 'specified')?_c('div',{staticClass:\"to-specified\"},[_c('fa',{attrs:{\"icon\":\"envelope\"}}),_vm._v(\" \"+_vm._s(_vm.$t('@.post-form.specified-recipient'))+\"\\n\\t\\t\\t\\t\"),_c('div',{staticClass:\"visibleUsers\"},[_vm._l((_vm.visibleUsers),function(u){return _c('span',[_c('mk-user-name',{attrs:{\"user\":u}}),_c('button',{on:{\"click\":function($event){return _vm.removeVisibleUser(u)}}},[_c('fa',{attrs:{\"icon\":\"times\"}})],1)],1)}),_c('button',{on:{\"click\":_vm.addVisibleUser}},[_vm._v(_vm._s(_vm.$t('@.post-form.add-visible-user')))])],2)],1):_vm._e(),(_vm.localOnly === true)?_c('div',{staticClass:\"local-only\"},[_c('fa',{attrs:{\"icon\":\"heart\"}}),_vm._v(\" \"+_vm._s(_vm.$t('@.post-form.local-only-message')))],1):_vm._e(),_c('input',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.useCw),expression:\"useCw\"},{name:\"model\",rawName:\"v-model\",value:(_vm.cw),expression:\"cw\"},{name:\"autocomplete\",rawName:\"v-autocomplete\",value:({ model: 'cw' }),expression:\"{ model: 'cw' }\"}],ref:\"cw\",attrs:{\"placeholder\":_vm.$t('@.post-form.cw-placeholder')},domProps:{\"value\":(_vm.cw)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.cw=$event.target.value}}}),_c('div',{staticClass:\"textarea\"},[_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.text),expression:\"text\"},{name:\"autocomplete\",rawName:\"v-autocomplete\",value:({ model: 'text' }),expression:\"{ model: 'text' }\"}],ref:\"text\",class:{ with: (_vm.files.length != 0 || _vm.poll) },attrs:{\"disabled\":_vm.posting,\"placeholder\":_vm.placeholder},domProps:{\"value\":(_vm.text)},on:{\"keydown\":_vm.onKeydown,\"paste\":_vm.onPaste,\"input\":function($event){if($event.target.composing){ return; }_vm.text=$event.target.value}}}),_c('button',{ref:\"emoji\",staticClass:\"emoji\",on:{\"click\":_vm.emoji}},[_c('fa',{attrs:{\"icon\":['far', 'laugh']}})],1),_c('x-post-form-attaches',{staticClass:\"files\",class:{ with: _vm.poll },attrs:{\"files\":_vm.files}}),(_vm.poll)?_c('x-poll-editor',{ref:\"poll\",staticClass:\"poll-editor\",on:{\"destroyed\":function($event){_vm.poll = false},\"updated\":function($event){return _vm.onPollUpdate()}}}):_vm._e()],1)]),_c('mk-uploader',{ref:\"uploader\",on:{\"uploaded\":_vm.attachMedia,\"change\":_vm.onChangeUploadings}}),_c('button',{staticClass:\"upload\",attrs:{\"title\":_vm.$t('@.post-form.attach-media-from-local')},on:{\"click\":_vm.chooseFile}},[_c('fa',{attrs:{\"icon\":\"upload\"}})],1),_c('button',{staticClass:\"drive\",attrs:{\"title\":_vm.$t('@.post-form.attach-media-from-drive')},on:{\"click\":_vm.chooseFileFromDrive}},[_c('fa',{attrs:{\"icon\":\"cloud\"}})],1),_c('button',{staticClass:\"kao\",attrs:{\"title\":_vm.$t('@.post-form.insert-a-kao')},on:{\"click\":_vm.kao}},[_c('fa',{attrs:{\"icon\":['far', 'smile']}})],1),_c('button',{staticClass:\"poll\",attrs:{\"title\":_vm.$t('@.post-form.create-poll')},on:{\"click\":function($event){_vm.poll = !_vm.poll}}},[_c('fa',{attrs:{\"icon\":\"chart-pie\"}})],1),_c('button',{staticClass:\"cw\",attrs:{\"title\":_vm.$t('@.post-form.hide-contents')},on:{\"click\":function($event){_vm.useCw = !_vm.useCw}}},[_c('fa',{attrs:{\"icon\":['far', 'eye-slash']}})],1),_c('button',{staticClass:\"geo\",attrs:{\"title\":_vm.$t('@.post-form.attach-location-information')},on:{\"click\":function($event){_vm.geo ? _vm.removeGeo() : _vm.setGeo()}}},[_c('fa',{attrs:{\"icon\":\"map-marker-alt\"}})],1),_c('button',{ref:\"visibilityButton\",staticClass:\"visibility\",attrs:{\"title\":_vm.$t('@.post-form.visibility')},on:{\"click\":_vm.setVisibility}},[(_vm.visibility === 'public')?_c('span',[_c('fa',{attrs:{\"icon\":\"globe\"}})],1):_vm._e(),(_vm.visibility === 'home')?_c('span',[_c('fa',{attrs:{\"icon\":\"home\"}})],1):_vm._e(),(_vm.visibility === 'followers')?_c('span',[_c('fa',{attrs:{\"icon\":\"unlock\"}})],1):_vm._e(),(_vm.visibility === 'specified')?_c('span',[_c('fa',{attrs:{\"icon\":\"envelope\"}})],1):_vm._e()]),_c('p',{staticClass:\"text-count\",class:{ over: _vm.trimmedLength(_vm.text) > _vm.maxNoteTextLength }},[_vm._v(_vm._s(_vm.maxNoteTextLength - _vm.trimmedLength(_vm.text)))]),_c('ui-button',{staticClass:\"submit\",attrs:{\"primary\":\"\",\"wait\":_vm.posting,\"disabled\":!_vm.canPost},on:{\"click\":_vm.post}},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.posting ? _vm.$t('@.post-form.posting') : _vm.submitText)),(_vm.posting)?_c('mk-ellipsis'):_vm._e()],1),_c('input',{ref:\"file\",attrs:{\"type\":\"file\",\"multiple\":\"multiple\",\"tabindex\":\"-1\"},on:{\"change\":_vm.onChangeFile}}),(_vm.draghover)?_c('div',{staticClass:\"dropzone\"}):_vm._e()],1),(_vm.preview)?_c('details',{ref:\"preview\",staticClass:\"preview\",attrs:{\"open\":_vm.$store.state.device.showPostPreview},on:{\"toggle\":_vm.togglePreview}},[_c('summary',[_vm._v(_vm._s(_vm.$t('@.post-form.preview')))]),_c('mk-note',{key:_vm.preview.id,staticClass:\"note\",attrs:{\"note\":_vm.preview,\"compact\":true,\"preview\":true}})],1):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import Vue from 'vue';\nimport i18n from '../../../i18n';\nimport form from '../../../common/scripts/post-form';\nexport default Vue.extend({\n    i18n: i18n('desktop/views/components/post-form.vue'),\n    watch: {\n        text() {\n            this.doPreview();\n        },\n        files() {\n            this.doPreview();\n        },\n        visibility() {\n            this.doPreview();\n        },\n        localOnly() {\n            this.doPreview();\n        },\n    },\n    mixins: [\n        form({\n            onSuccess: self => {\n                self.$notify(self.renote\n                    ? self.$t('reposted')\n                    : self.reply\n                        ? self.$t('replied')\n                        : self.$t('posted'));\n            },\n            onFailure: self => {\n                self.$notify(self.renote\n                    ? self.$t('renote-failed')\n                    : self.reply\n                        ? self.$t('reply-failed')\n                        : self.$t('note-failed'));\n            }\n        }),\n    ],\n});\n","import mod from \"-!../../../../../../node_modules/ts-loader/index.js??clonedRuleSet-7[0].rules[0].use[0]!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../node_modules/vue-svg-inline-loader/src/index.js!./post-form.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../../../node_modules/ts-loader/index.js??clonedRuleSet-7[0].rules[0].use[0]!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../node_modules/vue-svg-inline-loader/src/index.js!./post-form.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./post-form.vue?vue&type=template&id=699b2403&scoped=true&\"\nimport script from \"./post-form.vue?vue&type=script&lang=ts&\"\nexport * from \"./post-form.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./post-form.vue?vue&type=style&index=0&id=699b2403&lang=stylus&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"699b2403\",\n  null\n  \n)\n\nexport default component.exports","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-3[0].rules[0].use[1]!../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../node_modules/postcss-loader/src/index.js??clonedRuleSet-3[0].rules[0].use[2]!../../../../../../node_modules/stylus-loader/dist/cjs.js!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../node_modules/vue-svg-inline-loader/src/index.js!./visibility-chooser.vue?vue&type=style&index=0&id=efce9672&lang=stylus&scoped=true&\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"b33b6a52\", content, true, {});","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-3[0].rules[0].use[1]!../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../node_modules/postcss-loader/src/index.js??clonedRuleSet-3[0].rules[0].use[2]!../../../../../../node_modules/stylus-loader/dist/cjs.js!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../node_modules/vue-svg-inline-loader/src/index.js!./post-form.vue?vue&type=style&index=0&id=699b2403&lang=stylus&scoped=true&\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"44d00bd8\", content, true, {});"],"sourceRoot":""}