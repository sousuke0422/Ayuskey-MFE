{"version":3,"sources":["webpack://ayuskey-mfe/./src/client/app/common/views/components/autocomplete.vue?a258","webpack://ayuskey-mfe/./src/client/app/common/views/components/autocomplete.vue?cedd","webpack://ayuskey-mfe/./src/client/app/common/views/components/autocomplete.vue?b5e4","webpack://ayuskey-mfe/./src/client/app/common/views/components/autocomplete.vue?74b9","webpack://ayuskey-mfe/./src/client/app/common/views/components/autocomplete.vue","webpack://ayuskey-mfe/./src/client/app/common/views/components/autocomplete.vue?6a68"],"names":["___CSS_LOADER_API_SOURCEMAP_IMPORT___","___CSS_LOADER_EXPORT___","___CSS_LOADER_API_IMPORT___","push","module","id","exports","lib","emojilist","x","category","char2file","char","codes","Array","from","map","codePointAt","toString","includes","filter","length","join","emjdb","emoji","name","aliasOf","url","keywords","k","sort","a","b","props","type","String","required","q","textarea","Object","complete","Function","close","Number","y","data","getStaticImageUrl","fetching","users","hashtags","emojis","items","select","emojiDb","computed","this","$store","state","device","useOsDefaultEmojis","_a","$el","offsetWidth","window","innerWidth","style","left","offsetHeight","innerHeight","top","marginTop","$refs","suggests","children","customEmojis","$root","getMetaSync","emojiDefinitions","isCustomEmoji","aliases","alias","concat","addEventListener","onKeydown","el","document","querySelectorAll","onMousedown","$nextTick","exec","$watch","removeEventListener","methods","removeAttribute","cacheKey","cache","sessionStorage","getItem","JSON","parse","api","query","limit","detail","then","setItem","stringify","localStorage","textA","toUpperCase","textB","matched","max","some","startsWith","e","contains","target","cancel","preventDefault","stopPropagation","which","click","selectPrev","selectNext","focus","applySelect","setAttribute","_vm","_h","$createElement","_c","_self","staticClass","on","$event","ref","_l","user","attrs","avatarUrl","key","_v","_s","_f","_e","hashtag","disableShowingAnimatedImages","domProps","replace","content","locals","add"],"mappings":"6FACA,IAAIA,EAAwC,EAAQ,OAEhDC,EAD8B,EAAQ,MACZC,CAA4BF,GAE1DC,EAAwBE,KAAK,CAACC,EAAOC,GAAI,0gEAA2gE,GAAG,CAAC,QAAU,EAAE,QAAU,CAAC,uEAAuE,MAAQ,GAAG,SAAW,8qBAA8qB,eAAiB,CAAC,2gEAA2gE,WAAa,MAEp4JD,EAAOE,QAAUL,G,2DCPjB,I,uDCKA,MAAMM,EAAMC,EAAA,UAAiBC,GAAoB,UAAfA,EAAEC,WAC9BC,EAAaC,IACf,IAAIC,EAAQC,MAAMC,KAAKH,GAAMI,KAAIP,GAAKA,EAAEQ,YAAY,GAAGC,SAAS,MAIhE,OAHKL,EAAMM,SAAS,UAChBN,EAAQA,EAAMO,QAAOX,GAAU,QAALA,KAC9BI,EAAQA,EAAMO,QAAOX,GAAKA,GAAKA,EAAEY,SAC1BR,EAAMS,KAAK,MAEhBC,EAAQhB,EAAIS,KAAIP,IAAK,CACvBe,MAAOf,EAAEG,KACTa,KAAMhB,EAAEgB,KACRC,QAAS,KACTC,IAAK,GAAG,OAAkBhB,EAAUF,EAAEG,gBAE1C,IAAK,MAAMH,KAAKF,EACZ,GAAIE,EAAEmB,SACF,IAAK,MAAMC,KAAKpB,EAAEmB,SACdL,EAAMpB,KAAK,CACPqB,MAAOf,EAAEG,KACTa,KAAMI,EACNH,QAASjB,EAAEgB,KACXE,IAAK,GAAG,OAAkBhB,EAAUF,EAAEG,cAKtDW,EAAMO,MAAK,CAACC,EAAGC,IAAMD,EAAEN,KAAKJ,OAASW,EAAEP,KAAKJ,SAC5C,MChCoS,EDgCrR,iBAAW,CACtBY,MAAO,CACHC,KAAM,CACFA,KAAMC,OACNC,UAAU,GAEdC,EAAG,CACCH,KAAMC,OACNC,UAAU,GAEdE,SAAU,CACNJ,KAAMK,OACNH,UAAU,GAEdI,SAAU,CACNN,KAAMO,SACNL,UAAU,GAEdM,MAAO,CACHR,KAAMO,SACNL,UAAU,GAEd3B,EAAG,CACCyB,KAAMS,OACNP,UAAU,GAEdQ,EAAG,CACCV,KAAMS,OACNP,UAAU,IAGlBS,KAAI,KACO,CACHC,kBAAiB,IACjBC,UAAU,EACVC,MAAO,GACPC,SAAU,GACVC,OAAQ,GACRC,MAAO,GACPC,QAAS,EACT5C,UAAS,IACT6C,QAAS,KAGjBC,SAAU,CACN,qBACI,OAAOC,KAAKC,OAAOC,MAAMC,OAAOC,qBAGxC,UACI,IAAIC,EAEAL,KAAK9C,EAAI8C,KAAKM,IAAIC,YAAcC,OAAOC,WACvCT,KAAKM,IAAII,MAAMC,KAAQH,OAAOC,WAAaT,KAAKM,IAAIC,YAAe,KAGnEP,KAAKM,IAAII,MAAMC,KAAOX,KAAK9C,EAAI,KAE/B8C,KAAKX,EAAIW,KAAKM,IAAIM,aAAeJ,OAAOK,aACxCb,KAAKM,IAAII,MAAMI,IAAOd,KAAKX,EAAIW,KAAKM,IAAIM,aAAgB,KACxDZ,KAAKM,IAAII,MAAMK,UAAY,MAG3Bf,KAAKM,IAAII,MAAMI,IAAMd,KAAKX,EAAI,KAC9BW,KAAKM,IAAII,MAAMK,UAAY,mBAG/Bf,KAAKJ,OAAwC,QAA9BS,EAAKL,KAAKgB,MAAMC,gBAA6B,IAAPZ,OAAgB,EAASA,EAAGa,WAAa,IAElG,UAEI,MAAMC,GAAgBnB,KAAKoB,MAAMC,eAAiB,CAAE1B,OAAQ,KAAMA,QAAU,GACtE2B,EAAmB,GACzB,IAAK,MAAMpE,KAAKiE,EAOZ,GANAG,EAAiB1E,KAAK,CAClBsB,KAAMhB,EAAEgB,KACRD,MAAO,IAAIf,EAAEgB,QACbE,IAAKlB,EAAEkB,IACPmD,eAAe,IAEfrE,EAAEsE,QACF,IAAK,MAAMC,KAASvE,EAAEsE,QAClBF,EAAiB1E,KAAK,CAClBsB,KAAMuD,EACNtD,QAASjB,EAAEgB,KACXD,MAAO,IAAIf,EAAEgB,QACbE,IAAKlB,EAAEkB,IACPmD,eAAe,IAK/BD,EAAiB/C,MAAK,CAACC,EAAGC,IAAMD,EAAEN,KAAKJ,OAASW,EAAEP,KAAKJ,SACvDkC,KAAKF,QAAUwB,EAAiBI,OAAO1D,GAEvCgC,KAAKjB,SAAS4C,iBAAiB,UAAW3B,KAAK4B,WAC/C,IAAK,MAAMC,KAAMtE,MAAMC,KAAKsE,SAASC,iBAAiB,WAClDF,EAAGF,iBAAiB,YAAa3B,KAAKgC,aAE1ChC,KAAKiC,WAAU,KACXjC,KAAKkC,OACLlC,KAAKmC,OAAO,KAAK,KACbnC,KAAKiC,WAAU,KACXjC,KAAKkC,iBAKrB,gBACIlC,KAAKjB,SAASqD,oBAAoB,UAAWpC,KAAK4B,WAClD,IAAK,MAAMC,KAAMtE,MAAMC,KAAKsE,SAASC,iBAAiB,WAClDF,EAAGO,oBAAoB,YAAapC,KAAKgC,cAGjDK,QAAS,CACL,OAEI,GADArC,KAAKH,QAAU,EACXG,KAAKgB,MAAMC,SACX,IAAK,MAAMY,KAAMtE,MAAMC,KAAKwC,KAAKJ,OAC7BiC,EAAGS,gBAAgB,iBAG3B,GAAiB,QAAbtC,KAAKrB,KAAgB,CACrB,MAAM4D,EAAW,qBAAqBvC,KAAKlB,IACrC0D,EAAQC,eAAeC,QAAQH,GACrC,GAAIC,EAAO,CACP,MAAM/C,EAAQkD,KAAKC,MAAMJ,GACzBxC,KAAKP,MAAQA,EACbO,KAAKR,UAAW,OAGhBQ,KAAKoB,MAAMyB,IAAI,eAAgB,CAC3BC,MAAO9C,KAAKlB,EACZiE,MAAO,GACPC,QAAQ,IACTC,MAAKxD,IACJO,KAAKP,MAAQA,EACbO,KAAKR,UAAW,EAEhBiD,eAAeS,QAAQX,EAAUI,KAAKQ,UAAU1D,YAIvD,GAAiB,WAAbO,KAAKrB,KACV,GAAc,MAAVqB,KAAKlB,GAAuB,IAAVkB,KAAKlB,EACvBkB,KAAKN,SAAWiD,KAAKC,MAAMQ,aAAaV,QAAQ,aAAe,MAC/D1C,KAAKR,UAAW,MAEf,CACD,MAAM+C,EAAW,wBAAwBvC,KAAKlB,IACxC0D,EAAQC,eAAeC,QAAQH,GACrC,GAAIC,EAAO,CACP,MAAM9C,EAAWiD,KAAKC,MAAMJ,GAC5BxC,KAAKN,SAAWA,EAChBM,KAAKR,UAAW,OAGhBQ,KAAKoB,MAAMyB,IAAI,kBAAmB,CAC9BC,MAAO9C,KAAKlB,EACZiE,MAAO,KACRE,MAAKvD,IACJM,KAAKN,SAAWA,EAChBM,KAAKR,UAAW,EAEhBiD,eAAeS,QAAQX,EAAUI,KAAKQ,UAAUzD,YAK3D,GAAiB,SAAbM,KAAKrB,KAAiB,CAC3B,GAAc,MAAVqB,KAAKlB,GAAuB,IAAVkB,KAAKlB,EAMvB,YALAkB,KAAKL,OAASK,KAAKF,QAAQjC,QAAOX,GAAKA,EAAEqE,gBAAkBrE,EAAEiB,UAASI,MAAK,CAACC,EAAGC,KAC3E,IAAI4E,EAAQ7E,EAAEN,KAAKoF,cACfC,EAAQ9E,EAAEP,KAAKoF,cACnB,OAAQD,EAAQE,GAAU,EAAKF,EAAQE,EAAS,EAAI,MAI5D,MAAMC,EAAU,GACVC,EAAM,GACZzD,KAAKF,QAAQ4D,MAAKxG,KACVA,EAAEgB,KAAKyF,WAAW3D,KAAKlB,IAAO5B,EAAEiB,SAAYqF,EAAQE,MAAKrE,GAAKA,EAAEpB,OAASf,EAAEe,SAC3EuF,EAAQ5G,KAAKM,GACVsG,EAAQ1F,QAAU2F,KAEzBD,EAAQ1F,OAAS2F,GACjBzD,KAAKF,QAAQ4D,MAAKxG,IACVA,EAAEgB,KAAKyF,WAAW3D,KAAKlB,KAAO0E,EAAQE,MAAKrE,GAAKA,EAAEpB,OAASf,EAAEe,SAC7DuF,EAAQ5G,KAAKM,GACVsG,EAAQ1F,QAAU2F,KAG7BD,EAAQ1F,OAAS2F,GACjBzD,KAAKF,QAAQ4D,MAAKxG,IACVA,EAAEgB,KAAKN,SAASoC,KAAKlB,KAAO0E,EAAQE,MAAKrE,GAAKA,EAAEpB,OAASf,EAAEe,SAC3DuF,EAAQ5G,KAAKM,GACVsG,EAAQ1F,QAAU2F,KAGjCzD,KAAKL,OAAS6D,IAGtB,YAAYI,IACH,EAAAC,EAAA,GAAS7D,KAAKM,IAAKsD,EAAEE,SAAY9D,KAAKM,KAAOsD,EAAEE,QAChD9D,KAAKb,SAEb,UAAUyE,GACN,MAAMG,EAAS,KACXH,EAAEI,iBACFJ,EAAEK,mBAEN,OAAQL,EAAEM,OACN,KAAK,GACL,KAAK,IACoB,IAAjBlE,KAAKH,QACLkE,IACA/D,KAAKJ,MAAMI,KAAKH,QAAQsE,SAGxBnE,KAAKb,QAET,MACJ,KAAK,GACD4E,IACA/D,KAAKb,QACL,MACJ,KAAK,IACoB,IAAjBa,KAAKH,QACLkE,IACA/D,KAAKoE,cAGLpE,KAAKb,QAET,MACJ,KAAK,EACL,KAAK,GACD4E,IACA/D,KAAKqE,aACL,MACJ,QACIT,EAAEK,kBACFjE,KAAKjB,SAASuF,UAG1B,eACUtE,KAAKH,QAAUG,KAAKJ,MAAM9B,SAC5BkC,KAAKH,OAAS,GACQ,IAAtBG,KAAKJ,MAAM9B,SACXkC,KAAKH,QAAU,GACnBG,KAAKuE,eAET,eACUvE,KAAKH,OAAS,IAChBG,KAAKH,OAASG,KAAKJ,MAAM9B,OAAS,GACtCkC,KAAKuE,eAET,cACI,IAAK,MAAM1C,KAAMtE,MAAMC,KAAKwC,KAAKJ,OAC7BiC,EAAGS,gBAAgB,kBAEF,IAAjBtC,KAAKH,SACLG,KAAKJ,MAAMI,KAAKH,QAAQ2E,aAAa,gBAAiB,QACtDxE,KAAKJ,MAAMI,KAAKH,QAAQyE,a,SEpRxC,SAXgB,E,SAAA,GACd,GHTW,WAAa,IAAIG,EAAIzE,KAAS0E,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,kBAAkBC,GAAG,CAAC,YAAc,SAASC,GAAQA,EAAOhB,oBAAoD,CAAES,EAAIhF,MAAM3B,OAAS,EAAG8G,EAAG,KAAK,CAACK,IAAI,WAAWH,YAAY,SAASL,EAAIS,GAAIT,EAAS,OAAE,SAASU,GAAM,OAAOP,EAAG,KAAK,CAACQ,MAAM,CAAC,SAAW,MAAML,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOP,EAAIxF,SAASwF,EAAI9F,KAAMwG,IAAO,QAAUV,EAAI7C,YAAY,CAACgD,EAAG,MAAM,CAACE,YAAY,SAASM,MAAM,CAAC,IAAMD,EAAKE,UAAU,IAAM,MAAMT,EAAG,OAAO,CAACE,YAAY,QAAQ,CAACF,EAAG,eAAe,CAACU,IAAIH,EAAKrI,GAAGsI,MAAM,CAAC,KAAOD,MAAS,GAAGP,EAAG,OAAO,CAACE,YAAY,YAAY,CAACL,EAAIc,GAAG,IAAId,EAAIe,GAAGf,EAAIgB,GAAG,OAAPhB,CAAeU,YAAc,GAAGV,EAAIiB,KAAMjB,EAAI/E,SAAS5B,OAAS,EAAG8G,EAAG,KAAK,CAACK,IAAI,WAAWH,YAAY,YAAYL,EAAIS,GAAIT,EAAY,UAAE,SAASkB,GAAS,OAAOf,EAAG,KAAK,CAACQ,MAAM,CAAC,SAAW,MAAML,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOP,EAAIxF,SAASwF,EAAI9F,KAAMgH,IAAU,QAAUlB,EAAI7C,YAAY,CAACgD,EAAG,OAAO,CAACE,YAAY,QAAQ,CAACL,EAAIc,GAAGd,EAAIe,GAAGG,WAAgB,GAAGlB,EAAIiB,KAAMjB,EAAI9E,OAAO7B,OAAS,EAAG8G,EAAG,KAAK,CAACK,IAAI,WAAWH,YAAY,UAAUL,EAAIS,GAAIT,EAAU,QAAE,SAASxG,GAAO,OAAO2G,EAAG,KAAK,CAACQ,MAAM,CAAC,SAAW,MAAML,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOP,EAAIxF,SAASwF,EAAI9F,KAAMV,EAAMA,QAAQ,QAAUwG,EAAI7C,YAAY,CAAE3D,EAAmB,cAAE2G,EAAG,OAAO,CAACE,YAAY,SAAS,CAACF,EAAG,MAAM,CAACQ,MAAM,CAAC,IAAMX,EAAIxE,OAAOC,MAAMC,OAAOyF,6BAA+BnB,EAAIlF,kBAAkBtB,EAAMG,KAAOH,EAAMG,IAAI,IAAMH,EAAMA,WAAawG,EAAIrE,mBAA6GwE,EAAG,OAAO,CAACE,YAAY,SAAS,CAACL,EAAIc,GAAGd,EAAIe,GAAGvH,EAAMA,UAA9I2G,EAAG,OAAO,CAACE,YAAY,SAAS,CAACF,EAAG,MAAM,CAACQ,MAAM,CAAC,IAAMnH,EAAMG,IAAI,IAAMH,EAAMA,WAA0E2G,EAAG,OAAO,CAACE,YAAY,OAAOe,SAAS,CAAC,UAAYpB,EAAIe,GAAGvH,EAAMC,KAAK4H,QAAQrB,EAAI3F,EAAI,MAAQ2F,EAAI3F,EAAI,YAAcb,EAAa,QAAE2G,EAAG,OAAO,CAACE,YAAY,SAAS,CAACL,EAAIc,GAAG,IAAId,EAAIe,GAAGvH,EAAME,SAAS,OAAOsG,EAAIiB,UAAS,GAAGjB,EAAIiB,SACh1D,IGWpB,EACA,KACA,WACA,M,yBCZF,IAAIK,EAAU,EAAQ,MACA,iBAAZA,IAAsBA,EAAU,CAAC,CAAClJ,EAAOC,GAAIiJ,EAAS,MAC7DA,EAAQC,SAAQnJ,EAAOE,QAAUgJ,EAAQC,SAG/BC,EADH,YACO,WAAYF,GAAS,EAAM","file":"3309.11.37.1-amfe.js","sourcesContent":["// Imports\nvar ___CSS_LOADER_API_SOURCEMAP_IMPORT___ = require(\"../../../../../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\");\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../../node_modules/css-loader/dist/runtime/api.js\");\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".mk-autocomplete[data-v-4986f69f]{position:fixed;z-index:65535;max-width:100%;margin-top:calc(1em + 8px);overflow:hidden;background:var(--faceHeader);border:1px solid rgba(0,0,0,.1);border-radius:4px;transition:top .1s ease,left .1s ease}.mk-autocomplete>ol[data-v-4986f69f]{display:block;margin:0;padding:4px 0;max-height:190px;max-width:500px;overflow:auto;list-style:none}.mk-autocomplete>ol>li[data-v-4986f69f]{display:flex;align-items:center;padding:4px 12px;white-space:nowrap;overflow:hidden;font-size:.9em;color:rgba(0,0,0,.8);cursor:default}.mk-autocomplete>ol>li[data-v-4986f69f],.mk-autocomplete>ol>li *[data-v-4986f69f]{user-select:none}.mk-autocomplete>ol>li *[data-v-4986f69f]{overflow:hidden;text-overflow:ellipsis}.mk-autocomplete>ol>li[data-v-4986f69f]:hover{background:var(--autocompleteItemHoverBg)}.mk-autocomplete>ol>li[data-selected=true][data-v-4986f69f]{background:var(--primary)}.mk-autocomplete>ol>li[data-selected=true][data-v-4986f69f],.mk-autocomplete>ol>li[data-selected=true] *[data-v-4986f69f]{color:#fff!important}.mk-autocomplete>ol>li[data-v-4986f69f]:active{background:var(--primaryDarken10)}.mk-autocomplete>ol>li[data-v-4986f69f]:active,.mk-autocomplete>ol>li:active *[data-v-4986f69f]{color:#fff!important}.mk-autocomplete>.users>li .avatar[data-v-4986f69f]{min-width:28px;min-height:28px;max-width:28px;max-height:28px;margin:0 8px 0 0;border-radius:100%}.mk-autocomplete>.users>li .name[data-v-4986f69f]{margin:0 8px 0 0;color:var(--autocompleteItemText)}.mk-autocomplete>.users>li .username[data-v-4986f69f]{color:var(--autocompleteItemTextSub)}.mk-autocomplete>.hashtags>li .name[data-v-4986f69f]{color:var(--autocompleteItemText)}.mk-autocomplete>.emojis>li .emoji[data-v-4986f69f]{display:inline-block;margin:0 4px 0 0;width:24px}.mk-autocomplete>.emojis>li .emoji>img[data-v-4986f69f]{width:24px;vertical-align:bottom}.mk-autocomplete>.emojis>li .name[data-v-4986f69f]{color:var(--autocompleteItemText)}.mk-autocomplete>.emojis>li .alias[data-v-4986f69f]{margin:0 0 0 8px;color:var(--autocompleteItemTextSub)}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/client/app/common/views/components/autocomplete.vue\"],\"names\":[],\"mappings\":\"AAAA,kCAAkC,cAAc,CAAC,aAAa,CAAC,cAAc,CAAC,0BAA0B,CAAC,eAAe,CAAC,4BAA4B,CAAC,+BAA+B,CAAC,iBAAiB,CAAC,qCAAqC,CAAC,qCAAqC,aAAa,CAAC,QAAQ,CAAC,aAAa,CAAC,gBAAgB,CAAC,eAAe,CAAC,aAAa,CAAC,eAAe,CAAC,wCAAwC,YAAY,CAAC,kBAAkB,CAAC,gBAAgB,CAAC,kBAAkB,CAAC,eAAe,CAAC,cAAc,CAAC,oBAAoB,CAAC,cAAc,CAAC,kFAAkF,gBAAgB,CAAC,0CAA0C,eAAe,CAAC,sBAAsB,CAAC,8CAA8C,yCAAyC,CAAC,4DAA4D,yBAAyB,CAAC,0HAA0H,oBAAoB,CAAC,+CAA+C,iCAAiC,CAAC,gGAAgG,oBAAoB,CAAC,oDAAoD,cAAc,CAAC,eAAe,CAAC,cAAc,CAAC,eAAe,CAAC,gBAAgB,CAAC,kBAAkB,CAAC,kDAAkD,gBAAgB,CAAC,iCAAiC,CAAC,sDAAsD,oCAAoC,CAAC,qDAAqD,iCAAiC,CAAC,oDAAoD,oBAAoB,CAAC,gBAAgB,CAAC,UAAU,CAAC,wDAAwD,UAAU,CAAC,qBAAqB,CAAC,mDAAmD,iCAAiC,CAAC,oDAAoD,gBAAgB,CAAC,oCAAoC\",\"sourcesContent\":[\".mk-autocomplete[data-v-4986f69f]{position:fixed;z-index:65535;max-width:100%;margin-top:calc(1em + 8px);overflow:hidden;background:var(--faceHeader);border:1px solid rgba(0,0,0,.1);border-radius:4px;transition:top .1s ease,left .1s ease}.mk-autocomplete>ol[data-v-4986f69f]{display:block;margin:0;padding:4px 0;max-height:190px;max-width:500px;overflow:auto;list-style:none}.mk-autocomplete>ol>li[data-v-4986f69f]{display:flex;align-items:center;padding:4px 12px;white-space:nowrap;overflow:hidden;font-size:.9em;color:rgba(0,0,0,.8);cursor:default}.mk-autocomplete>ol>li[data-v-4986f69f],.mk-autocomplete>ol>li *[data-v-4986f69f]{user-select:none}.mk-autocomplete>ol>li *[data-v-4986f69f]{overflow:hidden;text-overflow:ellipsis}.mk-autocomplete>ol>li[data-v-4986f69f]:hover{background:var(--autocompleteItemHoverBg)}.mk-autocomplete>ol>li[data-selected=true][data-v-4986f69f]{background:var(--primary)}.mk-autocomplete>ol>li[data-selected=true][data-v-4986f69f],.mk-autocomplete>ol>li[data-selected=true] *[data-v-4986f69f]{color:#fff!important}.mk-autocomplete>ol>li[data-v-4986f69f]:active{background:var(--primaryDarken10)}.mk-autocomplete>ol>li[data-v-4986f69f]:active,.mk-autocomplete>ol>li:active *[data-v-4986f69f]{color:#fff!important}.mk-autocomplete>.users>li .avatar[data-v-4986f69f]{min-width:28px;min-height:28px;max-width:28px;max-height:28px;margin:0 8px 0 0;border-radius:100%}.mk-autocomplete>.users>li .name[data-v-4986f69f]{margin:0 8px 0 0;color:var(--autocompleteItemText)}.mk-autocomplete>.users>li .username[data-v-4986f69f]{color:var(--autocompleteItemTextSub)}.mk-autocomplete>.hashtags>li .name[data-v-4986f69f]{color:var(--autocompleteItemText)}.mk-autocomplete>.emojis>li .emoji[data-v-4986f69f]{display:inline-block;margin:0 4px 0 0;width:24px}.mk-autocomplete>.emojis>li .emoji>img[data-v-4986f69f]{width:24px;vertical-align:bottom}.mk-autocomplete>.emojis>li .name[data-v-4986f69f]{color:var(--autocompleteItemText)}.mk-autocomplete>.emojis>li .alias[data-v-4986f69f]{margin:0 0 0 8px;color:var(--autocompleteItemTextSub)}\"],\"sourceRoot\":\"\"}]);\n// Exports\nmodule.exports = ___CSS_LOADER_EXPORT___;\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"mk-autocomplete\",on:{\"contextmenu\":function($event){$event.preventDefault();return (function () {})($event)}}},[(_vm.users.length > 0)?_c('ol',{ref:\"suggests\",staticClass:\"users\"},_vm._l((_vm.users),function(user){return _c('li',{attrs:{\"tabindex\":\"-1\"},on:{\"click\":function($event){return _vm.complete(_vm.type, user)},\"keydown\":_vm.onKeydown}},[_c('img',{staticClass:\"avatar\",attrs:{\"src\":user.avatarUrl,\"alt\":\"\"}}),_c('span',{staticClass:\"name\"},[_c('mk-user-name',{key:user.id,attrs:{\"user\":user}})],1),_c('span',{staticClass:\"username\"},[_vm._v(\"@\"+_vm._s(_vm._f(\"acct\")(user)))])])}),0):_vm._e(),(_vm.hashtags.length > 0)?_c('ol',{ref:\"suggests\",staticClass:\"hashtags\"},_vm._l((_vm.hashtags),function(hashtag){return _c('li',{attrs:{\"tabindex\":\"-1\"},on:{\"click\":function($event){return _vm.complete(_vm.type, hashtag)},\"keydown\":_vm.onKeydown}},[_c('span',{staticClass:\"name\"},[_vm._v(_vm._s(hashtag))])])}),0):_vm._e(),(_vm.emojis.length > 0)?_c('ol',{ref:\"suggests\",staticClass:\"emojis\"},_vm._l((_vm.emojis),function(emoji){return _c('li',{attrs:{\"tabindex\":\"-1\"},on:{\"click\":function($event){return _vm.complete(_vm.type, emoji.emoji)},\"keydown\":_vm.onKeydown}},[(emoji.isCustomEmoji)?_c('span',{staticClass:\"emoji\"},[_c('img',{attrs:{\"src\":_vm.$store.state.device.disableShowingAnimatedImages ? _vm.getStaticImageUrl(emoji.url) : emoji.url,\"alt\":emoji.emoji}})]):(!_vm.useOsDefaultEmojis)?_c('span',{staticClass:\"emoji\"},[_c('img',{attrs:{\"src\":emoji.url,\"alt\":emoji.emoji}})]):_c('span',{staticClass:\"emoji\"},[_vm._v(_vm._s(emoji.emoji))]),_c('span',{staticClass:\"name\",domProps:{\"innerHTML\":_vm._s(emoji.name.replace(_vm.q, (\"<b>\" + _vm.q + \"</b>\")))}}),(emoji.aliasOf)?_c('span',{staticClass:\"alias\"},[_vm._v(\"(\"+_vm._s(emoji.aliasOf)+\")\")]):_vm._e()])}),0):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import Vue from 'vue';\nimport { emojilist } from '../../../../../misc/emojilist';\nimport contains from '../../../common/scripts/contains';\nimport { twemojiSvgBase } from '../../../../../misc/twemoji-base';\nimport { getStaticImageUrl } from '../../../common/scripts/get-static-image-url';\nconst lib = emojilist.filter(x => x.category !== 'flags');\nconst char2file = (char) => {\n    let codes = Array.from(char).map(x => x.codePointAt(0).toString(16));\n    if (!codes.includes('200d'))\n        codes = codes.filter(x => x != 'fe0f');\n    codes = codes.filter(x => x && x.length);\n    return codes.join('-');\n};\nconst emjdb = lib.map(x => ({\n    emoji: x.char,\n    name: x.name,\n    aliasOf: null,\n    url: `${twemojiSvgBase}/${char2file(x.char)}.svg`\n}));\nfor (const x of lib) {\n    if (x.keywords) {\n        for (const k of x.keywords) {\n            emjdb.push({\n                emoji: x.char,\n                name: k,\n                aliasOf: x.name,\n                url: `${twemojiSvgBase}/${char2file(x.char)}.svg`\n            });\n        }\n    }\n}\nemjdb.sort((a, b) => a.name.length - b.name.length);\nexport default Vue.extend({\n    props: {\n        type: {\n            type: String,\n            required: true,\n        },\n        q: {\n            type: String,\n            required: true,\n        },\n        textarea: {\n            type: Object,\n            required: true,\n        },\n        complete: {\n            type: Function,\n            required: true,\n        },\n        close: {\n            type: Function,\n            required: true,\n        },\n        x: {\n            type: Number,\n            required: true,\n        },\n        y: {\n            type: Number,\n            required: true,\n        },\n    },\n    data() {\n        return {\n            getStaticImageUrl,\n            fetching: true,\n            users: [],\n            hashtags: [],\n            emojis: [],\n            items: [],\n            select: -1,\n            emojilist,\n            emojiDb: []\n        };\n    },\n    computed: {\n        useOsDefaultEmojis() {\n            return this.$store.state.device.useOsDefaultEmojis;\n        }\n    },\n    updated() {\n        var _a;\n        //#region 位置調整\n        if (this.x + this.$el.offsetWidth > window.innerWidth) {\n            this.$el.style.left = (window.innerWidth - this.$el.offsetWidth) + 'px';\n        }\n        else {\n            this.$el.style.left = this.x + 'px';\n        }\n        if (this.y + this.$el.offsetHeight > window.innerHeight) {\n            this.$el.style.top = (this.y - this.$el.offsetHeight) + 'px';\n            this.$el.style.marginTop = '0';\n        }\n        else {\n            this.$el.style.top = this.y + 'px';\n            this.$el.style.marginTop = 'calc(1em + 8px)';\n        }\n        //#endregion\n        this.items = ((_a = this.$refs.suggests) === null || _a === void 0 ? void 0 : _a.children) || [];\n    },\n    mounted() {\n        //#region Construct Emoji DB\n        const customEmojis = (this.$root.getMetaSync() || { emojis: [] }).emojis || [];\n        const emojiDefinitions = [];\n        for (const x of customEmojis) {\n            emojiDefinitions.push({\n                name: x.name,\n                emoji: `:${x.name}:`,\n                url: x.url,\n                isCustomEmoji: true\n            });\n            if (x.aliases) {\n                for (const alias of x.aliases) {\n                    emojiDefinitions.push({\n                        name: alias,\n                        aliasOf: x.name,\n                        emoji: `:${x.name}:`,\n                        url: x.url,\n                        isCustomEmoji: true\n                    });\n                }\n            }\n        }\n        emojiDefinitions.sort((a, b) => a.name.length - b.name.length);\n        this.emojiDb = emojiDefinitions.concat(emjdb);\n        //#endregion\n        this.textarea.addEventListener('keydown', this.onKeydown);\n        for (const el of Array.from(document.querySelectorAll('body *'))) {\n            el.addEventListener('mousedown', this.onMousedown);\n        }\n        this.$nextTick(() => {\n            this.exec();\n            this.$watch('q', () => {\n                this.$nextTick(() => {\n                    this.exec();\n                });\n            });\n        });\n    },\n    beforeDestroy() {\n        this.textarea.removeEventListener('keydown', this.onKeydown);\n        for (const el of Array.from(document.querySelectorAll('body *'))) {\n            el.removeEventListener('mousedown', this.onMousedown);\n        }\n    },\n    methods: {\n        exec() {\n            this.select = -1;\n            if (this.$refs.suggests) {\n                for (const el of Array.from(this.items)) {\n                    el.removeAttribute('data-selected');\n                }\n            }\n            if (this.type == 'user') {\n                const cacheKey = `autocomplete:user:${this.q}`;\n                const cache = sessionStorage.getItem(cacheKey);\n                if (cache) {\n                    const users = JSON.parse(cache);\n                    this.users = users;\n                    this.fetching = false;\n                }\n                else {\n                    this.$root.api('users/search', {\n                        query: this.q,\n                        limit: 10,\n                        detail: false\n                    }).then(users => {\n                        this.users = users;\n                        this.fetching = false;\n                        // キャッシュ\n                        sessionStorage.setItem(cacheKey, JSON.stringify(users));\n                    });\n                }\n            }\n            else if (this.type == 'hashtag') {\n                if (this.q == null || this.q == '') {\n                    this.hashtags = JSON.parse(localStorage.getItem('hashtags') || '[]');\n                    this.fetching = false;\n                }\n                else {\n                    const cacheKey = `autocomplete:hashtag:${this.q}`;\n                    const cache = sessionStorage.getItem(cacheKey);\n                    if (cache) {\n                        const hashtags = JSON.parse(cache);\n                        this.hashtags = hashtags;\n                        this.fetching = false;\n                    }\n                    else {\n                        this.$root.api('hashtags/search', {\n                            query: this.q,\n                            limit: 30\n                        }).then(hashtags => {\n                            this.hashtags = hashtags;\n                            this.fetching = false;\n                            // キャッシュ\n                            sessionStorage.setItem(cacheKey, JSON.stringify(hashtags));\n                        });\n                    }\n                }\n            }\n            else if (this.type == 'emoji') {\n                if (this.q == null || this.q == '') {\n                    this.emojis = this.emojiDb.filter(x => x.isCustomEmoji && !x.aliasOf).sort((a, b) => {\n                        var textA = a.name.toUpperCase();\n                        var textB = b.name.toUpperCase();\n                        return (textA < textB) ? -1 : (textA > textB) ? 1 : 0;\n                    });\n                    return;\n                }\n                const matched = [];\n                const max = 30;\n                this.emojiDb.some(x => {\n                    if (x.name.startsWith(this.q) && !x.aliasOf && !matched.some(y => y.emoji == x.emoji))\n                        matched.push(x);\n                    return matched.length == max;\n                });\n                if (matched.length < max) {\n                    this.emojiDb.some(x => {\n                        if (x.name.startsWith(this.q) && !matched.some(y => y.emoji == x.emoji))\n                            matched.push(x);\n                        return matched.length == max;\n                    });\n                }\n                if (matched.length < max) {\n                    this.emojiDb.some(x => {\n                        if (x.name.includes(this.q) && !matched.some(y => y.emoji == x.emoji))\n                            matched.push(x);\n                        return matched.length == max;\n                    });\n                }\n                this.emojis = matched;\n            }\n        },\n        onMousedown(e) {\n            if (!contains(this.$el, e.target) && (this.$el != e.target))\n                this.close();\n        },\n        onKeydown(e) {\n            const cancel = () => {\n                e.preventDefault();\n                e.stopPropagation();\n            };\n            switch (e.which) {\n                case 10: // [ENTER]\n                case 13: // [ENTER]\n                    if (this.select !== -1) {\n                        cancel();\n                        this.items[this.select].click();\n                    }\n                    else {\n                        this.close();\n                    }\n                    break;\n                case 27: // [ESC]\n                    cancel();\n                    this.close();\n                    break;\n                case 38: // [↑]\n                    if (this.select !== -1) {\n                        cancel();\n                        this.selectPrev();\n                    }\n                    else {\n                        this.close();\n                    }\n                    break;\n                case 9: // [TAB]\n                case 40: // [↓]\n                    cancel();\n                    this.selectNext();\n                    break;\n                default:\n                    e.stopPropagation();\n                    this.textarea.focus();\n            }\n        },\n        selectNext() {\n            if (++this.select >= this.items.length)\n                this.select = 0;\n            if (this.items.length === 0)\n                this.select = -1;\n            this.applySelect();\n        },\n        selectPrev() {\n            if (--this.select < 0)\n                this.select = this.items.length - 1;\n            this.applySelect();\n        },\n        applySelect() {\n            for (const el of Array.from(this.items)) {\n                el.removeAttribute('data-selected');\n            }\n            if (this.select !== -1) {\n                this.items[this.select].setAttribute('data-selected', 'true');\n                this.items[this.select].focus();\n            }\n        }\n    }\n});\n","import mod from \"-!../../../../../../node_modules/ts-loader/index.js??clonedRuleSet-7[0].rules[0].use[0]!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../node_modules/vue-svg-inline-loader/src/index.js!./autocomplete.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../../../node_modules/ts-loader/index.js??clonedRuleSet-7[0].rules[0].use[0]!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../node_modules/vue-svg-inline-loader/src/index.js!./autocomplete.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./autocomplete.vue?vue&type=template&id=4986f69f&scoped=true&\"\nimport script from \"./autocomplete.vue?vue&type=script&lang=ts&\"\nexport * from \"./autocomplete.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./autocomplete.vue?vue&type=style&index=0&id=4986f69f&lang=stylus&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4986f69f\",\n  null\n  \n)\n\nexport default component.exports","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-3[0].rules[0].use[1]!../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../node_modules/postcss-loader/src/index.js??clonedRuleSet-3[0].rules[0].use[2]!../../../../../../node_modules/stylus-loader/dist/cjs.js!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../node_modules/vue-svg-inline-loader/src/index.js!./autocomplete.vue?vue&type=style&index=0&id=4986f69f&lang=stylus&scoped=true&\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"24d0923c\", content, true, {});"],"sourceRoot":""}