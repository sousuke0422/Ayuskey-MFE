(self.webpackChunkayuskey_mfe=self.webpackChunkayuskey_mfe||[]).push([[8269,7270],{77251:(e,t,a)=>{var n=a(94015),i=a(23645)(n);i.push([e.id,".eamppglmnmimdhrlzhplwpvyeaqmmhxu .transition .mk-notes-enter[data-v-eaf1bbfa],.eamppglmnmimdhrlzhplwpvyeaqmmhxu .transition .mk-notes-leave-to[data-v-eaf1bbfa]{opacity:0;transform:translateY(-30px)}.eamppglmnmimdhrlzhplwpvyeaqmmhxu .transition>*[data-v-eaf1bbfa]{transition:transform .3s ease,opacity .3s ease}.eamppglmnmimdhrlzhplwpvyeaqmmhxu>.empty[data-v-eaf1bbfa]{padding:16px;text-align:center;color:var(--text)}.eamppglmnmimdhrlzhplwpvyeaqmmhxu>.placeholder[data-v-eaf1bbfa]{padding:16px;opacity:.3}.eamppglmnmimdhrlzhplwpvyeaqmmhxu>.notes>.date[data-v-eaf1bbfa]{display:block;margin:0;line-height:28px;font-size:12px;text-align:center;color:var(--dateDividerFg);background:var(--dateDividerBg);border-bottom:solid var(--lineWidth) var(--faceDivider)}.eamppglmnmimdhrlzhplwpvyeaqmmhxu>.notes>.date span[data-v-eaf1bbfa]{margin:0 16px}.eamppglmnmimdhrlzhplwpvyeaqmmhxu>.notes>.date [data-icon][data-v-eaf1bbfa]{margin-right:8px}.eamppglmnmimdhrlzhplwpvyeaqmmhxu>footer>button[data-v-eaf1bbfa]{display:block;margin:0;padding:16px;width:100%;text-align:center;color:#ccc;background:var(--face);border-top:solid var(--lineWidth) var(--faceDivider);border-bottom-left-radius:6px;border-bottom-right-radius:6px}.eamppglmnmimdhrlzhplwpvyeaqmmhxu>footer>button[data-v-eaf1bbfa]:hover{box-shadow:inset 0 0 0 100px rgba(0,0,0,.05)}.eamppglmnmimdhrlzhplwpvyeaqmmhxu>footer>button[data-v-eaf1bbfa]:active{box-shadow:inset 0 0 0 100px rgba(0,0,0,.1)}","",{version:3,sources:["webpack://./src/client/app/common/views/deck/deck.notes.vue"],names:[],mappings:"AAAA,iKAAiK,SAAS,CAAC,2BAA2B,CAAC,iEAAiE,8CAA8C,CAAC,0DAA0D,YAAY,CAAC,iBAAiB,CAAC,iBAAiB,CAAC,gEAAgE,YAAY,CAAC,UAAU,CAAC,gEAAgE,aAAa,CAAC,QAAQ,CAAC,gBAAgB,CAAC,cAAc,CAAC,iBAAiB,CAAC,0BAA0B,CAAC,+BAA+B,CAAC,uDAAuD,CAAC,qEAAqE,aAAa,CAAC,4EAA4E,gBAAgB,CAAC,iEAAiE,aAAa,CAAC,QAAQ,CAAC,YAAY,CAAC,UAAU,CAAC,iBAAiB,CAAC,UAAU,CAAC,sBAAsB,CAAC,oDAAoD,CAAC,6BAA6B,CAAC,8BAA8B,CAAC,uEAAuE,4CAA4C,CAAC,wEAAwE,2CAA2C",sourcesContent:[".eamppglmnmimdhrlzhplwpvyeaqmmhxu .transition .mk-notes-enter[data-v-eaf1bbfa],.eamppglmnmimdhrlzhplwpvyeaqmmhxu .transition .mk-notes-leave-to[data-v-eaf1bbfa]{opacity:0;transform:translateY(-30px)}.eamppglmnmimdhrlzhplwpvyeaqmmhxu .transition>*[data-v-eaf1bbfa]{transition:transform .3s ease,opacity .3s ease}.eamppglmnmimdhrlzhplwpvyeaqmmhxu>.empty[data-v-eaf1bbfa]{padding:16px;text-align:center;color:var(--text)}.eamppglmnmimdhrlzhplwpvyeaqmmhxu>.placeholder[data-v-eaf1bbfa]{padding:16px;opacity:.3}.eamppglmnmimdhrlzhplwpvyeaqmmhxu>.notes>.date[data-v-eaf1bbfa]{display:block;margin:0;line-height:28px;font-size:12px;text-align:center;color:var(--dateDividerFg);background:var(--dateDividerBg);border-bottom:solid var(--lineWidth) var(--faceDivider)}.eamppglmnmimdhrlzhplwpvyeaqmmhxu>.notes>.date span[data-v-eaf1bbfa]{margin:0 16px}.eamppglmnmimdhrlzhplwpvyeaqmmhxu>.notes>.date [data-icon][data-v-eaf1bbfa]{margin-right:8px}.eamppglmnmimdhrlzhplwpvyeaqmmhxu>footer>button[data-v-eaf1bbfa]{display:block;margin:0;padding:16px;width:100%;text-align:center;color:#ccc;background:var(--face);border-top:solid var(--lineWidth) var(--faceDivider);border-bottom-left-radius:6px;border-bottom-right-radius:6px}.eamppglmnmimdhrlzhplwpvyeaqmmhxu>footer>button[data-v-eaf1bbfa]:hover{box-shadow:inset 0 0 0 100px rgba(0,0,0,.05)}.eamppglmnmimdhrlzhplwpvyeaqmmhxu>footer>button[data-v-eaf1bbfa]:active{box-shadow:inset 0 0 0 100px rgba(0,0,0,.1)}"],sourceRoot:""}]),e.exports=i},5879:(e,t,a)=>{var n=a(94015),i=a(23645)(n);i.push([e.id,".sainvnaq[data-v-74716fa2]{display:grid;grid-template-columns:1fr 1fr 1fr;gap:8px;padding:16px}.sainvnaq>*[data-v-74716fa2]{height:70px;background-position:50%;background-size:cover;background-clip:content-box;border-radius:4px}","",{version:3,sources:["webpack://./src/client/app/common/views/deck/deck.user-column.home.vue"],names:[],mappings:"AAAA,2BAA2B,YAAY,CAAC,iCAAiC,CAAC,OAAO,CAAC,YAAY,CAAC,6BAA6B,WAAW,CAAC,uBAAuB,CAAC,qBAAqB,CAAC,2BAA2B,CAAC,iBAAiB",sourcesContent:[".sainvnaq[data-v-74716fa2]{display:grid;grid-template-columns:1fr 1fr 1fr;gap:8px;padding:16px}.sainvnaq>*[data-v-74716fa2]{height:70px;background-position:50%;background-size:cover;background-clip:content-box;border-radius:4px}"],sourceRoot:""}]),e.exports=i},97270:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>d});var n=a(20144),i=a(67384),o=a(81398),r=a(5327);const s=n.default.extend({i18n:(0,i.Z)(),inject:["column","isScrollTop","count"],mixins:[(0,r.Z)({limit:20,onQueueChanged:(e,t)=>{e.count(t.length)},onPrepend:(e,t,a)=>{if((0,o.Z)(e.$store.state.i,e.$store.state.settings,t))return!1;!document.hidden&&e.isScrollTop()||e.$store.commit("pushBehindNote",t)}})],props:{pagination:{required:!0},extract:{required:!1}},computed:{notes(){return this.extract?this.extract(this.items):this.items},_notes(){return this.notes.map((e=>{const t=new Date(e.createdAt).getDate(),a=new Date(e.createdAt).getMonth()+1;return e._date=t,e._datetext=this.$t("@.month-and-day").replace("{month}",a.toString()).replace("{day}",t.toString()),e}))}},created(){this.column.$on("top",this.onTop),this.column.$on("bottom",this.onBottom),this.init()},beforeDestroy(){this.column.$off("top",this.onTop),this.column.$off("bottom",this.onBottom)},methods:{focus(){this.$refs.notes.children[0].focus?this.$refs.notes.children[0].focus():this.$refs.notes.$el.children[0].focus()}}});a(96569);const d=(0,a(51900).Z)(s,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"eamppglmnmimdhrlzhplwpvyeaqmmhxu"},[e.empty?a("div",{staticClass:"empty"},[e._v(e._s(e.$t("@.no-notes")))]):e._e(),e.error?a("mk-error",{on:{retry:function(t){return e.init()}}}):e._e(),e.fetching?a("div",{staticClass:"placeholder"},[e._l(10,(function(e){return[a("mk-note-skeleton",{key:e})]}))],2):e._e(),a(e.$store.state.device.reduceMotion?"div":"transition-group",{ref:"notes",tag:"component",staticClass:"transition notes",attrs:{name:"mk-notes",tag:"div"}},[e._l(e._notes,(function(t,n){return[a("mk-note",{key:t.id,attrs:{note:t,compact:!0}}),n!=e.notes.length-1&&t._date!=e._notes[n+1]._date?a("p",{key:t.id+"_date",staticClass:"date"},[a("span",[a("fa",{attrs:{icon:"angle-up"}}),e._v(e._s(t._datetext))],1),a("span",[a("fa",{attrs:{icon:"angle-down"}}),e._v(e._s(e._notes[n+1]._datetext))],1)]):e._e()]}))],2),e.more?a("footer",[a("button",{style:{cursor:e.moreFetching?"wait":"pointer"},attrs:{disabled:e.moreFetching},on:{click:function(t){return e.fetchMore()}}},[e.moreFetching?e._e():[e._v(e._s(e.$t("@.load-more")))],e.moreFetching?[a("fa",{attrs:{icon:"spinner",pulse:"","fixed-width":""}})]:e._e()],2)]):e._e()],1)}),[],!1,null,"eaf1bbfa",null).exports},48269:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>l});var n=a(20144),i=a(67384),o=a(97270),r=a(51802),s=a(35927),d=a.n(s);const p=n.default.extend({i18n:(0,i.Z)("deck/deck.user-column.vue"),components:{XNotes:o.default,XPage:()=>Promise.all([a.e(6377),a.e(7174)]).then(a.bind(a,95249)).then((e=>e.default))},props:{user:{type:Object,required:!0}},data:()=>({withFiles:!1,images:[],chart:null}),computed:{pagination(){return{endpoint:"users/notes",limit:10,params:e=>({userId:this.user.id,untilDate:e?void 0:this.date?this.date.getTime():void 0,withFiles:this.withFiles,includeMyRenotes:this.$store.state.settings.showMyRenotes,includeRenotedMyNotes:this.$store.state.settings.showRenotedMyNotes,includeLocalRenotes:this.$store.state.settings.showLocalRenotes})}}},watch:{user(){this.fetch()}},created(){this.fetch()},methods:{fetch(){const e=["image/jpeg","image/png","image/gif","image/apng","image/vnd.mozilla.apng"];this.$root.api("users/notes",{userId:this.user.id,fileType:e,excludeNsfw:!this.$store.state.device.alwaysShowNsfw,limit:9}).then((t=>{for(const e of t)for(const t of e.files)t._note=e;const a=(0,r.zo)(t.map((e=>e.files)));this.images=a.filter((t=>e.includes(t.type))).slice(0,9)})),this.$root.api("charts/user/notes",{userId:this.user.id,span:"day",limit:21}).then((e=>{const t=[],a=[],n=[],i=new Date,o=i.getFullYear(),r=i.getMonth(),s=i.getDate();for(let i=0;i<21;i++){const d=new Date(o,r,s-i);t.push([d,e.diffs.normal[i]]),a.push([d,e.diffs.reply[i]]),n.push([d,e.diffs.renote[i]])}this.chart&&this.chart.destroy(),this.chart=new(d())(this.$refs.chart,{chart:{type:"bar",stacked:!0,height:100,sparkline:{enabled:!0}},plotOptions:{bar:{columnWidth:"80%"}},dataLabels:{enabled:!1},grid:{clipMarkers:!1,padding:{top:16,right:16,bottom:16,left:16}},tooltip:{shared:!0,intersect:!1},series:[{name:"Normal",data:t},{name:"Reply",data:a},{name:"Renote",data:n}],xaxis:{type:"datetime",crosshairs:{width:1,opacity:1}}}),this.chart.render()}))}}});a(16871);const l=(0,a(51900).Z)(p,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.user.pinnedPage?a("ui-container",{attrs:{"body-togglable":!0},scopedSlots:e._u([{key:"header",fn:function(){return[a("fa",{attrs:{icon:"thumbtack"}}),e._v(" "+e._s(e.$t("pinned-page")))]},proxy:!0}],null,!1,682258713)},[a("div",[a("x-page",{key:e.user.pinnedPage.id,attrs:{page:e.user.pinnedPage,"show-title":!e.user.pinnedPage.hideTitleWhenPinned}})],1)]):e._e(),e.user.pinnedNotes&&e.user.pinnedNotes.length>0?a("ui-container",{attrs:{"body-togglable":!0},scopedSlots:e._u([{key:"header",fn:function(){return[a("fa",{attrs:{icon:"thumbtack"}}),e._v(" "+e._s(e.$t("pinned-notes")))]},proxy:!0}],null,!1,2952226793)},[a("div",e._l(e.user.pinnedNotes,(function(e){return a("mk-note",{key:e.id,attrs:{note:e}})})),1)]):e._e(),e.images.length>0?a("ui-container",{attrs:{"body-togglable":!0,expanded:e.$store.state.device.expandUsersPhotos},on:{toggle:function(t){return e.$store.commit("device/set",{key:"expandUsersPhotos",value:t})}},scopedSlots:e._u([{key:"header",fn:function(){return[a("fa",{attrs:{icon:["far","images"]}}),e._v(" "+e._s(e.$t("images")))]},proxy:!0}],null,!1,1317083035)},[a("div",{staticClass:"sainvnaq"},e._l(e.images,(function(t){return a("router-link",{key:t.id+":"+t._note.id,style:"background-image: url("+t.thumbnailUrl+")",attrs:{to:e._f("notePage")(t._note),title:t.name+"\n"+new Date(t.createdAt).toLocaleString()}})})),1)]):e._e(),a("ui-container",{attrs:{"body-togglable":!0,expanded:e.$store.state.device.expandUsersActivity},on:{toggle:function(t){return e.$store.commit("device/set",{key:"expandUsersActivity",value:t})}},scopedSlots:e._u([{key:"header",fn:function(){return[a("fa",{attrs:{icon:["far","chart-bar"]}}),e._v(" "+e._s(e.$t("activity")))]},proxy:!0}])},[a("div",[a("div",{ref:"chart"})])]),a("ui-container",{scopedSlots:e._u([{key:"header",fn:function(){return[a("fa",{attrs:{icon:["far","comment-alt"]}}),e._v(" "+e._s(e.$t("timeline")))]},proxy:!0}])},[a("div",[a("x-notes",{key:e.user.id,ref:"timeline",attrs:{pagination:e.pagination},on:{inited:function(){return e.$emit("loaded")}}})],1)])],1)}),[],!1,null,"74716fa2",null).exports},96569:(e,t,a)=>{var n=a(77251);"string"==typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);(0,a(45346).Z)("8edf5156",n,!0,{})},16871:(e,t,a)=>{var n=a(5879);"string"==typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);(0,a(45346).Z)("08fe8602",n,!0,{})}}]);
//# sourceMappingURL=8269.11.37.1-amfe.js.map