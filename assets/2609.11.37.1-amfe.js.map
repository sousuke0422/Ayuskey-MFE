{"version":3,"sources":["webpack://ayuskey-mfe/./src/client/app/common/views/pages/room/room.vue?475b","webpack://ayuskey-mfe/./src/client/app/common/scripts/room/furnitures.json5","webpack://ayuskey-mfe/./src/client/app/common/views/pages/room/room.vue?d6e1","webpack://ayuskey-mfe/./src/client/app/common/scripts/room/room.ts","webpack://ayuskey-mfe/./src/client/app/common/views/pages/room/preview.vue?d3da","webpack://ayuskey-mfe/./src/client/app/common/views/pages/room/preview.vue?83eb","webpack://ayuskey-mfe/./src/client/app/common/views/pages/room/preview.vue","webpack://ayuskey-mfe/./src/client/app/common/views/pages/room/preview.vue?0eae","webpack://ayuskey-mfe/./src/client/app/common/views/pages/room/room.vue?cad5","webpack://ayuskey-mfe/./src/client/app/common/views/pages/room/room.vue?e589","webpack://ayuskey-mfe/./src/client/app/common/views/pages/room/room.vue","webpack://ayuskey-mfe/./src/client/app/common/views/pages/room/room.vue?038c"],"names":["___CSS_LOADER_API_SOURCEMAP_IMPORT___","___CSS_LOADER_EXPORT___","___CSS_LOADER_API_IMPORT___","push","module","id","exports","place","props","color","Table","Board","Chair","color1","color2","Cushion","Leg","Cover","Pad","screen","texture","Screen","prop","uv","x","y","width","height","CarpetAreaA","CarpetAreaB","Mat","main","Cube","photo","Photo","Frame","body","belly","Body","Belly","picture","Poster","Sofa","Step","Bin","image","Image_Front","Image_Back","__decorate","decorators","target","key","desc","d","c","arguments","length","r","Object","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","furnitureDefs","Room","user","isMyRoom","roomInfo","container","options","this","mixers","objects","selectedObject","isTransformMode","graphicsQuality","onChangeSelect","clock","scene","window","innerWidth","innerHeight","renderer","antialias","stencil","alpha","powerPreference","setPixelRatio","devicePixelRatio","setSize","autoClear","setClearColor","shadowMap","enabled","enableShadow","type","appendChild","canvas","camera","useOrthographicCamera","position","z","zoom","updateProjectionMatrix","add","ambientLight","roomLight","set","castShadow","shadow","bias","mapSize","shadowQuality","near","far","fov","outLight1","outLight2","controls","OrbitControls","enableZoom","enablePan","minPolarAngle","maxPolarAngle","Math","PI","minAzimuthAngle","maxAzimuthAngle","enableDamping","dampingFactor","mouseButtons","LEFT","MIDDLE","RIGHT","usePostFXs","renderTarget","minFilter","magFilter","format","stencilBuffer","fxaa","ShaderPass","FXAAShader","uniforms","value","renderToScreen","composer","EffectComposer","addPass","RenderPass","BloomPass","avatarUrl","url","textureLoader","crossOrigin","iconTexture","load","wrapS","wrapT","anisotropy","avatarMaterial","map","side","alphaTest","iconGeometry","avatarObject","rotation","name","username","font","nameGeometry","size","curveSegments","bevelThickness","bevelSize","bevelEnabled","nameMaterial","nameObject","furnitureControl","TransformControls","onmousemove","onmousedown","loadRoom","furniture","furnitures","loadFurniture","then","obj","renderWithPostFXs","renderWithoutPostFXs","domElement","renderFrameRequestId","requestAnimationFrame","getDelta","mixer","update","render","clear","roomType","GLTFLoader","gltf","traverse","child","receiveShadow","material","roomObj","applyCarpetColor","def","find","Promise","res","rej","model","animations","clip","clipAction","play","metalness","applyCustomColor","applyCustomTexture","colorHex","parseInt","carpetColor","substr","setHex","t","keys","val","undefined","document","createElement","emissive","img","Image","onload","uvInfo","getContext","drawImage","flipY","needsUpdate","src","ev","rect","getBoundingClientRect","clientX","left","clientY","top","pos","updateMatrixWorld","raycaster","setFromCamera","intersects","intersectObjects","object","isSelectedObject","intersected","getRoot","button","selectedObj","selectFurniture","found","parent","setMode","attach","detach","exitTransformMode","remove","filter","f","cancelAnimationFrame","dispose","prototype","data","selected","objectHeight","orbitRadius","$el","cullFace","light","grid","timer","Date","now","sin","cos","lookAt","clone","current","getObjectByName","objectBoundingBox","setFromObject","max","min","objectWidth","objectDepth","horizontal","hypot","aspect","tan","_h","$createElement","_self","_c","attrs","storeItems","room","i18n","components","XPreview","acct","String","required","objectSelected","selectedFurnitureName","selectedFurnitureInfo","selectedFurnitureProps","isTranslateMode","isRotateMode","changed","faBoxOpen","addEventListener","beforeunload","$root","api","assign","parse","$store","getters","isSignedIn","state","userId","device","roomGraphicsQuality","findFurnitureById","$t","JSON","stringify","$nextTick","$refs","preview","roomUseOrthographicCamera","to","from","next","dialog","text","showCancelButton","canceled","destroy","removeEventListener","methods","e","preventDefault","returnValue","result","title","select","items","item","addFurniture","removeFurniture","getRoomInfo","catch","message","removeAllFurnitures","$chooseDriveFile","multiple","file","updateProp","thumbnailUrl","getSelectedObject","updateCarpetColor","changeRoomType","exit","enterTransformMode","_vm","staticClass","_v","_s","ref","_l","k","on","$event","chooseImage","domProps","updateColor","_e","translate","faArrowsAlt","rotate","faUndo","faBan","faTrashAlt","updateRoomType","scopedSlots","_u","fn","proxy","save","faSave","faBroom","content","locals"],"mappings":"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","file":"2609.11.37.1-amfe.js","sourcesContent":["// Imports\nvar ___CSS_LOADER_API_SOURCEMAP_IMPORT___ = require(\"../../../../../../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\");\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../../../node_modules/css-loader/dist/runtime/api.js\");\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".hveuntkp>.controller[data-v-e5cbc970],.hveuntkp>.menu[data-v-e5cbc970]{position:fixed;z-index:1;padding:16px;background:var(--face);color:var(--text)}.hveuntkp>.controller>section[data-v-e5cbc970],.hveuntkp>.menu>section[data-v-e5cbc970]{padding:16px 0}.hveuntkp>.controller>section[data-v-e5cbc970]:first-child,.hveuntkp>.menu>section[data-v-e5cbc970]:first-child{padding-top:0}.hveuntkp>.controller>section[data-v-e5cbc970]:last-child,.hveuntkp>.menu>section[data-v-e5cbc970]:last-child{padding-bottom:0}.hveuntkp>.controller>section[data-v-e5cbc970]:not(:last-child),.hveuntkp>.menu>section[data-v-e5cbc970]:not(:last-child){border-bottom:1px solid var(--faceDivider)}.hveuntkp>.controller[data-v-e5cbc970]{top:16px;left:16px;width:256px}.hveuntkp>.controller>section>.name[data-v-e5cbc970]{margin:0}.hveuntkp>.menu[data-v-e5cbc970]{top:16px;right:16px;width:256px;backdrop-filter:blur(6px)}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/client/app/common/views/pages/room/room.vue\"],\"names\":[],\"mappings\":\"AAAA,wEAAwE,cAAc,CAAC,SAAS,CAAC,YAAY,CAAC,sBAAsB,CAAC,iBAAiB,CAAC,wFAAwF,cAAc,CAAC,gHAAgH,aAAa,CAAC,8GAA8G,gBAAgB,CAAC,0HAA0H,0CAA0C,CAAC,uCAAuC,QAAQ,CAAC,SAAS,CAAC,WAAW,CAAC,qDAAqD,QAAQ,CAAC,iCAAiC,QAAQ,CAAC,UAAU,CAAC,WAAW,CAAC,yBAAyB\",\"sourcesContent\":[\".hveuntkp>.controller[data-v-e5cbc970],.hveuntkp>.menu[data-v-e5cbc970]{position:fixed;z-index:1;padding:16px;background:var(--face);color:var(--text)}.hveuntkp>.controller>section[data-v-e5cbc970],.hveuntkp>.menu>section[data-v-e5cbc970]{padding:16px 0}.hveuntkp>.controller>section[data-v-e5cbc970]:first-child,.hveuntkp>.menu>section[data-v-e5cbc970]:first-child{padding-top:0}.hveuntkp>.controller>section[data-v-e5cbc970]:last-child,.hveuntkp>.menu>section[data-v-e5cbc970]:last-child{padding-bottom:0}.hveuntkp>.controller>section[data-v-e5cbc970]:not(:last-child),.hveuntkp>.menu>section[data-v-e5cbc970]:not(:last-child){border-bottom:1px solid var(--faceDivider)}.hveuntkp>.controller[data-v-e5cbc970]{top:16px;left:16px;width:256px}.hveuntkp>.controller>section>.name[data-v-e5cbc970]{margin:0}.hveuntkp>.menu[data-v-e5cbc970]{top:16px;right:16px;width:256px;backdrop-filter:blur(6px)}\"],\"sourceRoot\":\"\"}]);\n// Exports\nmodule.exports = ___CSS_LOADER_EXPORT___;\n","module.exports = [{id:'milk',place:'floor'},{id:'bed',place:'floor'},{id:'low-table',place:'floor',props:{color:'color'},color:{Table:'color'}},{id:'desk',place:'floor',props:{color:'color'},color:{Board:'color'}},{id:'chair',place:'floor',props:{color:'color'},color:{Chair:'color'}},{id:'chair2',place:'floor',props:{color1:'color',color2:'color'},color:{Cushion:'color1',Leg:'color2'}},{id:'fan',place:'wall'},{id:'pc',place:'floor'},{id:'plant',place:'floor'},{id:'plant2',place:'floor'},{id:'eraser',place:'floor'},{id:'pencil',place:'floor'},{id:'pudding',place:'floor'},{id:'cardboard-box',place:'floor'},{id:'cardboard-box2',place:'floor'},{id:'cardboard-box3',place:'floor'},{id:'book',place:'floor',props:{color:'color'},color:{Cover:'color'}},{id:'book2',place:'floor'},{id:'piano',place:'floor'},{id:'facial-tissue',place:'floor'},{id:'server',place:'floor'},{id:'moon',place:'floor'},{id:'corkboard',place:'wall'},{id:'mousepad',place:'floor',props:{color:'color'},color:{Pad:'color'}},{id:'monitor',place:'floor',props:{screen:'image'},texture:{Screen:{prop:'screen',uv:{x:0,y:434,width:1024,height:588}}}},{id:'tv',place:'floor',props:{screen:'image'},texture:{Screen:{prop:'screen',uv:{x:0,y:434,width:1024,height:588}}}},{id:'keyboard',place:'floor'},{id:'carpet-stripe',place:'floor',props:{color1:'color',color2:'color'},color:{CarpetAreaA:'color1',CarpetAreaB:'color2'}},{id:'mat',place:'floor',props:{color:'color'},color:{Mat:'color'}},{id:'color-box',place:'floor',props:{color:'color'},color:{main:'color'}},{id:'wall-clock',place:'wall'},{id:'cube',place:'floor',props:{color:'color'},color:{Cube:'color'}},{id:'photoframe',place:'wall',props:{photo:'image',color:'color'},texture:{Photo:{prop:'photo',uv:{x:0,y:342,width:1024,height:683}}},color:{Frame:'color'}},{id:'pinguin',place:'floor',props:{body:'color',belly:'color'},color:{Body:'body',Belly:'belly'}},{id:'rubik-cube',place:'floor'},{id:'poster-h',place:'wall',props:{picture:'image'},texture:{Poster:{prop:'picture',uv:{x:0,y:277,width:1024,height:745}}}},{id:'poster-v',place:'wall',props:{picture:'image'},texture:{Poster:{prop:'picture',uv:{x:0,y:0,width:745,height:1024}}}},{id:'sofa',place:'floor',props:{color:'color'},color:{Sofa:'color'}},{id:'spiral',place:'floor',props:{color:'color'},color:{Step:'color'}},{id:'bin',place:'floor',props:{color:'color'},color:{Bin:'color'}},{id:'cup-noodle',place:'floor'},{id:'holo-display',place:'floor',props:{image:'image'},texture:{Image_Front:{prop:'image',uv:{x:0,y:0,width:1024,height:1024}},Image_Back:{prop:'image',uv:{x:0,y:0,width:1024,height:1024}}}},{id:'energy-drink',place:'floor'},{id:'doll-ai',place:'floor'},{id:'banknote',place:'floor'}]","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"hveuntkp\"},[(_vm.objectSelected)?_c('div',{staticClass:\"controller\"},[_c('section',[_c('p',{staticClass:\"name\"},[_vm._v(_vm._s(_vm.selectedFurnitureName))]),_c('x-preview',{ref:\"preview\"}),(_vm.selectedFurnitureInfo.props)?_vm._l((Object.keys(_vm.selectedFurnitureInfo.props)),function(k){return _c('div',{key:k},[_c('p',[_vm._v(_vm._s(k))]),(_vm.selectedFurnitureInfo.props[k] === 'image')?[_c('ui-button',{on:{\"click\":function($event){return _vm.chooseImage(k)}}},[_vm._v(_vm._s(_vm.$t('chooseImage')))])]:(_vm.selectedFurnitureInfo.props[k] === 'color')?[_c('input',{attrs:{\"type\":\"color\"},domProps:{\"value\":_vm.selectedFurnitureProps ? _vm.selectedFurnitureProps[k] : null},on:{\"change\":function($event){return _vm.updateColor(k, $event)}}})]:_vm._e()],2)}):_vm._e()],2),_c('section',[_c('ui-button',{attrs:{\"primary\":_vm.isTranslateMode},on:{\"click\":function($event){return _vm.translate()}}},[_c('fa',{attrs:{\"icon\":_vm.faArrowsAlt}}),_vm._v(\" \"+_vm._s(_vm.$t('translate')))],1),_c('ui-button',{attrs:{\"primary\":_vm.isRotateMode},on:{\"click\":function($event){return _vm.rotate()}}},[_c('fa',{attrs:{\"icon\":_vm.faUndo}}),_vm._v(\" \"+_vm._s(_vm.$t('rotate')))],1),(_vm.isTranslateMode || _vm.isRotateMode)?_c('ui-button',{on:{\"click\":function($event){return _vm.exit()}}},[_c('fa',{attrs:{\"icon\":_vm.faBan}}),_vm._v(\" \"+_vm._s(_vm.$t('exit')))],1):_vm._e()],1),_c('section',[_c('ui-button',{on:{\"click\":function($event){return _vm.remove()}}},[_c('fa',{attrs:{\"icon\":_vm.faTrashAlt}}),_vm._v(\" \"+_vm._s(_vm.$t('remove')))],1)],1)]):_vm._e(),(_vm.isMyRoom)?_c('div',{staticClass:\"menu\"},[_c('section',[_c('ui-button',{on:{\"click\":function($event){return _vm.add()}}},[_c('fa',{attrs:{\"icon\":_vm.faBoxOpen}}),_vm._v(\" \"+_vm._s(_vm.$t('add-furniture')))],1)],1),_c('section',[_c('ui-select',{attrs:{\"value\":_vm.roomType},on:{\"input\":function($event){return _vm.updateRoomType($event)}},scopedSlots:_vm._u([{key:\"label\",fn:function(){return [_vm._v(_vm._s(_vm.$t('room-type')))]},proxy:true}],null,false,3739269933)},[_c('option',{attrs:{\"value\":\"default\"}},[_vm._v(_vm._s(_vm.$t('rooms.default')))]),_c('option',{attrs:{\"value\":\"washitsu\"}},[_vm._v(_vm._s(_vm.$t('rooms.washitsu')))])]),(_vm.roomType === 'default')?_c('label',[_c('span',[_vm._v(_vm._s(_vm.$t('carpet-color')))]),_c('input',{attrs:{\"type\":\"color\"},domProps:{\"value\":_vm.carpetColor},on:{\"change\":function($event){return _vm.updateCarpetColor($event)}}})]):_vm._e()],1),_c('section',[_c('ui-button',{attrs:{\"primary\":_vm.changed},on:{\"click\":function($event){return _vm.save()}}},[_c('fa',{attrs:{\"icon\":_vm.faSave}}),_vm._v(\" \"+_vm._s(_vm.$t('save')))],1),_c('ui-button',{on:{\"click\":function($event){return _vm.clear()}}},[_c('fa',{attrs:{\"icon\":_vm.faBroom}}),_vm._v(\" \"+_vm._s(_vm.$t('clear')))],1)],1)]):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport autobind from 'autobind-decorator';\nimport { v4 as uuid } from 'uuid';\nimport * as THREE from 'three';\nimport { GLTFLoader } from 'three/examples/jsm/loaders/GLTFLoader';\nimport { OrbitControls } from 'three/examples/jsm/controls/OrbitControls.js';\nimport { EffectComposer } from 'three/examples/jsm/postprocessing/EffectComposer.js';\nimport { RenderPass } from 'three/examples/jsm/postprocessing/RenderPass.js';\nimport { ShaderPass } from 'three/examples/jsm/postprocessing/ShaderPass.js';\nimport { BloomPass } from 'three/examples/jsm/postprocessing/BloomPass.js';\nimport { FXAAShader } from 'three/examples/jsm/shaders/FXAAShader.js';\nimport { TransformControls } from 'three/examples/jsm/controls/TransformControls.js';\nimport { query as urlQuery } from '../../../../../prelude/url';\nconst furnitureDefs = require('./furnitures.json5');\nTHREE.ImageUtils.crossOrigin = '';\n/**\n * MisskeyRoom Core Engine\n */\nexport class Room {\n    constructor(user, isMyRoom, roomInfo, container, options) {\n        this.mixers = [];\n        this.objects = [];\n        this.selectedObject = null;\n        this.isTransformMode = false;\n        this.roomInfo = roomInfo;\n        this.graphicsQuality = options.graphicsQuality;\n        this.onChangeSelect = options.onChangeSelect;\n        this.clock = new THREE.Clock(true);\n        //#region Init a scene\n        this.scene = new THREE.Scene();\n        const width = window.innerWidth;\n        const height = window.innerHeight;\n        //#region Init a renderer\n        this.renderer = new THREE.WebGLRenderer({\n            antialias: false,\n            stencil: false,\n            alpha: false,\n            powerPreference: this.graphicsQuality === 'ultra' ? 'high-performance' :\n                this.graphicsQuality === 'high' ? 'high-performance' :\n                    this.graphicsQuality === 'medium' ? 'default' :\n                        this.graphicsQuality === 'low' ? 'low-power' :\n                            'low-power' // cheep\n        });\n        this.renderer.setPixelRatio(window.devicePixelRatio);\n        this.renderer.setSize(width, height);\n        this.renderer.autoClear = false;\n        this.renderer.setClearColor(new THREE.Color(0x051f2d));\n        this.renderer.shadowMap.enabled = this.enableShadow;\n        this.renderer.shadowMap.type =\n            this.graphicsQuality === 'ultra' ? THREE.PCFSoftShadowMap :\n                this.graphicsQuality === 'high' ? THREE.PCFSoftShadowMap :\n                    this.graphicsQuality === 'medium' ? THREE.PCFShadowMap :\n                        this.graphicsQuality === 'low' ? THREE.BasicShadowMap :\n                            THREE.BasicShadowMap; // cheep\n        container.appendChild(this.canvas);\n        //#endregion\n        //#region Init a camera\n        this.camera = options.useOrthographicCamera\n            ? new THREE.OrthographicCamera(width / -2, width / 2, height / 2, height / -2, -10, 10)\n            : new THREE.PerspectiveCamera(45, width / height);\n        if (options.useOrthographicCamera) {\n            this.camera.position.x = 2;\n            this.camera.position.y = 2;\n            this.camera.position.z = 2;\n            this.camera.zoom = 100;\n            this.camera.updateProjectionMatrix();\n        }\n        else {\n            this.camera.position.x = 5;\n            this.camera.position.y = 2;\n            this.camera.position.z = 5;\n        }\n        this.scene.add(this.camera);\n        //#endregion\n        //#region AmbientLight\n        const ambientLight = new THREE.AmbientLight(0xffffff, 1);\n        this.scene.add(ambientLight);\n        //#endregion\n        if (this.graphicsQuality !== 'cheep') {\n            //#region Room light\n            const roomLight = new THREE.SpotLight(0xffffff, 0.1);\n            roomLight.position.set(0, 8, 0);\n            roomLight.castShadow = this.enableShadow;\n            roomLight.shadow.bias = -0.0001;\n            roomLight.shadow.mapSize.width = this.shadowQuality;\n            roomLight.shadow.mapSize.height = this.shadowQuality;\n            roomLight.shadow.camera.near = 0.1;\n            roomLight.shadow.camera.far = 9;\n            roomLight.shadow.camera.fov = 45;\n            this.scene.add(roomLight);\n            //#endregion\n        }\n        //#region Out light\n        const outLight1 = new THREE.SpotLight(0xffffff, 0.4);\n        outLight1.position.set(9, 3, -2);\n        outLight1.castShadow = this.enableShadow;\n        outLight1.shadow.bias = -0.001; // アクネ、アーチファクト対策 その代わりピーターパンが発生する可能性がある\n        outLight1.shadow.mapSize.width = this.shadowQuality;\n        outLight1.shadow.mapSize.height = this.shadowQuality;\n        outLight1.shadow.camera.near = 6;\n        outLight1.shadow.camera.far = 15;\n        outLight1.shadow.camera.fov = 45;\n        this.scene.add(outLight1);\n        const outLight2 = new THREE.SpotLight(0xffffff, 0.2);\n        outLight2.position.set(-2, 3, 9);\n        outLight2.castShadow = false;\n        outLight2.shadow.bias = -0.001; // アクネ、アーチファクト対策 その代わりピーターパンが発生する可能性がある\n        outLight2.shadow.camera.near = 6;\n        outLight2.shadow.camera.far = 15;\n        outLight2.shadow.camera.fov = 45;\n        this.scene.add(outLight2);\n        //#endregion\n        //#region Init a controller\n        this.controls = new OrbitControls(this.camera, this.canvas);\n        this.controls.target.set(0, 1, 0);\n        this.controls.enableZoom = true;\n        this.controls.enablePan = isMyRoom;\n        this.controls.minPolarAngle = 0;\n        this.controls.maxPolarAngle = Math.PI / 2;\n        this.controls.minAzimuthAngle = 0;\n        this.controls.maxAzimuthAngle = Math.PI / 2;\n        this.controls.enableDamping = true;\n        this.controls.dampingFactor = 0.2;\n        this.controls.mouseButtons.LEFT = 1;\n        this.controls.mouseButtons.MIDDLE = 2;\n        this.controls.mouseButtons.RIGHT = 0;\n        //#endregion\n        //#region POST FXs\n        if (!this.usePostFXs) {\n            this.composer = null;\n        }\n        else {\n            const renderTarget = new THREE.WebGLRenderTarget(width, height, {\n                minFilter: THREE.LinearFilter,\n                magFilter: THREE.LinearFilter,\n                format: THREE.RGBFormat,\n                stencilBuffer: false,\n            });\n            const fxaa = new ShaderPass(FXAAShader);\n            fxaa.uniforms['resolution'].value = new THREE.Vector2(1 / width, 1 / height);\n            fxaa.renderToScreen = true;\n            this.composer = new EffectComposer(this.renderer, renderTarget);\n            this.composer.addPass(new RenderPass(this.scene, this.camera));\n            if (this.graphicsQuality === 'ultra') {\n                this.composer.addPass(new BloomPass(0.25, 30, 128.0, 512));\n            }\n            this.composer.addPass(fxaa);\n        }\n        //#endregion\n        //#endregion\n        //#region Label\n        //#region Avatar\n        const avatarUrl = `/proxy/?${urlQuery({ url: user.avatarUrl })}`;\n        const textureLoader = new THREE.TextureLoader();\n        textureLoader.crossOrigin = 'anonymous';\n        const iconTexture = textureLoader.load(avatarUrl);\n        iconTexture.wrapS = THREE.RepeatWrapping;\n        iconTexture.wrapT = THREE.RepeatWrapping;\n        iconTexture.anisotropy = 16;\n        const avatarMaterial = new THREE.MeshBasicMaterial({\n            map: iconTexture,\n            side: THREE.DoubleSide,\n            alphaTest: 0.5\n        });\n        const iconGeometry = new THREE.PlaneGeometry(1, 1);\n        const avatarObject = new THREE.Mesh(iconGeometry, avatarMaterial);\n        avatarObject.position.set(-3, 2.5, 2);\n        avatarObject.rotation.y = Math.PI / 2;\n        avatarObject.castShadow = false;\n        this.scene.add(avatarObject);\n        //#endregion\n        //#region Username\n        const name = user.username;\n        new THREE.FontLoader().load('/assets/fonts/helvetiker_regular.typeface.json', font => {\n            const nameGeometry = new THREE.TextGeometry(name, {\n                size: 0.5,\n                height: 0,\n                curveSegments: 8,\n                font: font,\n                bevelThickness: 0,\n                bevelSize: 0,\n                bevelEnabled: false\n            });\n            const nameMaterial = new THREE.MeshLambertMaterial({\n                color: 0xffffff\n            });\n            const nameObject = new THREE.Mesh(nameGeometry, nameMaterial);\n            nameObject.position.set(-3, 2.25, 1.25);\n            nameObject.rotation.y = Math.PI / 2;\n            nameObject.castShadow = false;\n            this.scene.add(nameObject);\n        });\n        //#endregion\n        //#endregion\n        //#region Interaction\n        if (isMyRoom) {\n            this.furnitureControl = new TransformControls(this.camera, this.canvas);\n            this.scene.add(this.furnitureControl);\n            // Hover highlight\n            this.canvas.onmousemove = this.onmousemove;\n            // Click\n            this.canvas.onmousedown = this.onmousedown;\n        }\n        //#endregion\n        //#region Init room\n        this.loadRoom();\n        //#endregion\n        //#region Load furnitures\n        for (const furniture of this.furnitures) {\n            this.loadFurniture(furniture).then(obj => {\n                this.scene.add(obj.scene);\n                this.objects.push(obj.scene);\n            });\n        }\n        //#endregion\n        // Start render\n        if (this.usePostFXs) {\n            this.renderWithPostFXs();\n        }\n        else {\n            this.renderWithoutPostFXs();\n        }\n    }\n    get canvas() {\n        return this.renderer.domElement;\n    }\n    get furnitures() {\n        return this.roomInfo.furnitures;\n    }\n    set furnitures(furnitures) {\n        this.roomInfo.furnitures = furnitures;\n    }\n    get enableShadow() {\n        return this.graphicsQuality != 'cheep';\n    }\n    get usePostFXs() {\n        return this.graphicsQuality !== 'cheep' && this.graphicsQuality !== 'low';\n    }\n    get shadowQuality() {\n        return (this.graphicsQuality === 'ultra' ? 16384 :\n            this.graphicsQuality === 'high' ? 8192 :\n                this.graphicsQuality === 'medium' ? 4096 :\n                    this.graphicsQuality === 'low' ? 1024 :\n                        0); // cheep\n    }\n    renderWithoutPostFXs() {\n        this.renderFrameRequestId =\n            window.requestAnimationFrame(this.renderWithoutPostFXs);\n        // Update animations\n        const clock = this.clock.getDelta();\n        for (const mixer of this.mixers) {\n            mixer.update(clock);\n        }\n        this.controls.update();\n        this.renderer.render(this.scene, this.camera);\n    }\n    renderWithPostFXs() {\n        this.renderFrameRequestId =\n            window.requestAnimationFrame(this.renderWithPostFXs);\n        // Update animations\n        const clock = this.clock.getDelta();\n        for (const mixer of this.mixers) {\n            mixer.update(clock);\n        }\n        this.controls.update();\n        this.renderer.clear();\n        this.composer.render();\n    }\n    loadRoom() {\n        const type = this.roomInfo.roomType;\n        new GLTFLoader().load(`/assets/room/rooms/${type}/${type}.glb`, gltf => {\n            gltf.scene.traverse(child => {\n                if (!(child instanceof THREE.Mesh))\n                    return;\n                child.receiveShadow = this.enableShadow;\n                child.material = new THREE.MeshLambertMaterial({\n                    color: child.material.color,\n                    map: child.material.map,\n                    name: child.material.name,\n                });\n                // 異方性フィルタリング\n                if (child.material.map && this.graphicsQuality !== 'cheep') {\n                    child.material.map.minFilter = THREE.LinearMipMapLinearFilter;\n                    child.material.map.magFilter = THREE.LinearMipMapLinearFilter;\n                    child.material.map.anisotropy = 8;\n                }\n            });\n            gltf.scene.position.set(0, 0, 0);\n            this.scene.add(gltf.scene);\n            this.roomObj = gltf.scene;\n            if (this.roomInfo.roomType === 'default') {\n                this.applyCarpetColor();\n            }\n        });\n    }\n    loadFurniture(furniture) {\n        const def = furnitureDefs.find(d => d.id === furniture.type);\n        return new Promise((res, rej) => {\n            const loader = new GLTFLoader();\n            loader.load(`/assets/room/furnitures/${furniture.type}/${furniture.type}.glb`, gltf => {\n                const model = gltf.scene;\n                // Load animation\n                if (gltf.animations.length > 0) {\n                    const mixer = new THREE.AnimationMixer(model);\n                    this.mixers.push(mixer);\n                    for (const clip of gltf.animations) {\n                        mixer.clipAction(clip).play();\n                    }\n                }\n                model.name = furniture.id;\n                model.position.x = furniture.position.x;\n                model.position.y = furniture.position.y;\n                model.position.z = furniture.position.z;\n                model.rotation.x = furniture.rotation.x;\n                model.rotation.y = furniture.rotation.y;\n                model.rotation.z = furniture.rotation.z;\n                model.traverse(child => {\n                    if (!(child instanceof THREE.Mesh))\n                        return;\n                    child.castShadow = this.enableShadow;\n                    child.receiveShadow = this.enableShadow;\n                    child.material.metalness = 0;\n                    // 異方性フィルタリング\n                    if (child.material.map && this.graphicsQuality !== 'cheep') {\n                        child.material.map.minFilter = THREE.LinearMipMapLinearFilter;\n                        child.material.map.magFilter = THREE.LinearMipMapLinearFilter;\n                        child.material.map.anisotropy = 8;\n                    }\n                });\n                if (def.color) { // カスタムカラー\n                    this.applyCustomColor(model);\n                }\n                if (def.texture) { // カスタムテクスチャ\n                    this.applyCustomTexture(model);\n                }\n                res(gltf);\n            }, null, rej);\n        });\n    }\n    applyCarpetColor() {\n        this.roomObj.traverse(child => {\n            if (!(child instanceof THREE.Mesh))\n                return;\n            if (child.material &&\n                child.material.name &&\n                child.material.name === 'Carpet') {\n                const colorHex = parseInt(this.roomInfo.carpetColor.substr(1), 16);\n                child.material.color.setHex(colorHex);\n            }\n        });\n    }\n    applyCustomColor(model) {\n        const furniture = this.furnitures.find(furniture => furniture.id === model.name);\n        const def = furnitureDefs.find(d => d.id === furniture.type);\n        if (def.color == null)\n            return;\n        model.traverse(child => {\n            if (!(child instanceof THREE.Mesh))\n                return;\n            for (const t of Object.keys(def.color)) {\n                if (!child.material ||\n                    !child.material.name ||\n                    child.material.name !== t)\n                    continue;\n                const prop = def.color[t];\n                const val = furniture.props ? furniture.props[prop] : undefined;\n                if (val == null)\n                    continue;\n                const colorHex = parseInt(val.substr(1), 16);\n                child.material.color.setHex(colorHex);\n            }\n        });\n    }\n    applyCustomTexture(model) {\n        const furniture = this.furnitures.find(furniture => furniture.id === model.name);\n        const def = furnitureDefs.find(d => d.id === furniture.type);\n        if (def.texture == null)\n            return;\n        model.traverse(child => {\n            if (!(child instanceof THREE.Mesh))\n                return;\n            for (const t of Object.keys(def.texture)) {\n                if (child.name !== t)\n                    continue;\n                const prop = def.texture[t].prop;\n                const val = furniture.props ? furniture.props[prop] : undefined;\n                if (val == null)\n                    continue;\n                const canvas = document.createElement('canvas');\n                canvas.height = 1024;\n                canvas.width = 1024;\n                child.material = new THREE.MeshLambertMaterial({\n                    emissive: 0x111111,\n                    side: THREE.DoubleSide,\n                    alphaTest: 0.5,\n                });\n                const img = new Image();\n                img.crossOrigin = 'anonymous';\n                img.onload = () => {\n                    const uvInfo = def.texture[t].uv;\n                    const ctx = canvas.getContext('2d');\n                    ctx.drawImage(img, 0, 0, img.width, img.height, uvInfo.x, uvInfo.y, uvInfo.width, uvInfo.height);\n                    const texture = new THREE.Texture(canvas);\n                    texture.wrapS = THREE.RepeatWrapping;\n                    texture.wrapT = THREE.RepeatWrapping;\n                    texture.anisotropy = 16;\n                    texture.flipY = false;\n                    child.material.map = texture;\n                    child.material.needsUpdate = true;\n                    child.material.map.needsUpdate = true;\n                };\n                img.src = val;\n            }\n        });\n    }\n    onmousemove(ev) {\n        if (this.isTransformMode)\n            return;\n        const rect = ev.target.getBoundingClientRect();\n        const x = (((ev.clientX * window.devicePixelRatio) - rect.left) / this.canvas.width) * 2 - 1;\n        const y = -(((ev.clientY * window.devicePixelRatio) - rect.top) / this.canvas.height) * 2 + 1;\n        const pos = new THREE.Vector2(x, y);\n        this.camera.updateMatrixWorld();\n        const raycaster = new THREE.Raycaster();\n        raycaster.setFromCamera(pos, this.camera);\n        const intersects = raycaster.intersectObjects(this.objects, true);\n        for (const object of this.objects) {\n            if (this.isSelectedObject(object))\n                continue;\n            object.traverse(child => {\n                if (child instanceof THREE.Mesh) {\n                    child.material.emissive.setHex(0x000000);\n                }\n            });\n        }\n        if (intersects.length > 0) {\n            const intersected = this.getRoot(intersects[0].object);\n            if (this.isSelectedObject(intersected))\n                return;\n            intersected.traverse(child => {\n                if (child instanceof THREE.Mesh) {\n                    child.material.emissive.setHex(0x191919);\n                }\n            });\n        }\n    }\n    onmousedown(ev) {\n        if (this.isTransformMode)\n            return;\n        if (ev.target !== this.canvas || ev.button !== 0)\n            return;\n        const rect = ev.target.getBoundingClientRect();\n        const x = (((ev.clientX * window.devicePixelRatio) - rect.left) / this.canvas.width) * 2 - 1;\n        const y = -(((ev.clientY * window.devicePixelRatio) - rect.top) / this.canvas.height) * 2 + 1;\n        const pos = new THREE.Vector2(x, y);\n        this.camera.updateMatrixWorld();\n        const raycaster = new THREE.Raycaster();\n        raycaster.setFromCamera(pos, this.camera);\n        const intersects = raycaster.intersectObjects(this.objects, true);\n        for (const object of this.objects) {\n            object.traverse(child => {\n                if (child instanceof THREE.Mesh) {\n                    child.material.emissive.setHex(0x000000);\n                }\n            });\n        }\n        if (intersects.length > 0) {\n            const selectedObj = this.getRoot(intersects[0].object);\n            this.selectFurniture(selectedObj);\n        }\n        else {\n            this.selectedObject = null;\n            this.onChangeSelect(null);\n        }\n    }\n    getRoot(obj) {\n        let found = false;\n        let x = obj.parent;\n        while (!found) {\n            if (x.parent.parent == null) {\n                found = true;\n            }\n            else {\n                x = x.parent;\n            }\n        }\n        return x;\n    }\n    isSelectedObject(obj) {\n        if (this.selectedObject == null) {\n            return false;\n        }\n        else {\n            return obj.name === this.selectedObject.name;\n        }\n    }\n    selectFurniture(obj) {\n        this.selectedObject = obj;\n        this.onChangeSelect(obj);\n        obj.traverse(child => {\n            if (child instanceof THREE.Mesh) {\n                child.material.emissive.setHex(0xff0000);\n            }\n        });\n    }\n    /**\n     * 家具の移動/回転モードにします\n     * @param type 移動か回転か\n     */\n    enterTransformMode(type) {\n        this.isTransformMode = true;\n        this.furnitureControl.setMode(type);\n        this.furnitureControl.attach(this.selectedObject);\n    }\n    /**\n     * 家具の移動/回転モードを終了します\n     */\n    exitTransformMode() {\n        this.isTransformMode = false;\n        this.furnitureControl.detach();\n    }\n    /**\n     * 家具プロパティを更新します\n     * @param key プロパティ名\n     * @param value 値\n     */\n    updateProp(key, value) {\n        const furniture = this.furnitures.find(furniture => furniture.id === this.selectedObject.name);\n        if (furniture.props == null)\n            furniture.props = {};\n        furniture.props[key] = value;\n        this.applyCustomColor(this.selectedObject);\n        this.applyCustomTexture(this.selectedObject);\n    }\n    /**\n     * 部屋に家具を追加します\n     * @param type 家具の種類\n     */\n    addFurniture(type) {\n        const furniture = {\n            id: uuid(),\n            type: type,\n            position: {\n                x: 0,\n                y: 0,\n                z: 0,\n            },\n            rotation: {\n                x: 0,\n                y: 0,\n                z: 0,\n            },\n        };\n        this.furnitures.push(furniture);\n        this.loadFurniture(furniture).then(obj => {\n            this.scene.add(obj.scene);\n            this.objects.push(obj.scene);\n        });\n    }\n    /**\n     * 現在選択されている家具を部屋から削除します\n     */\n    removeFurniture() {\n        this.exitTransformMode();\n        const obj = this.selectedObject;\n        this.scene.remove(obj);\n        this.objects = this.objects.filter(object => object.name !== obj.name);\n        this.furnitures = this.furnitures.filter(furniture => furniture.id !== obj.name);\n        this.selectedObject = null;\n        this.onChangeSelect(null);\n    }\n    /**\n     * 全ての家具を部屋から削除します\n     */\n    removeAllFurnitures() {\n        this.exitTransformMode();\n        for (const obj of this.objects) {\n            this.scene.remove(obj);\n        }\n        this.objects = [];\n        this.furnitures = [];\n        this.selectedObject = null;\n        this.onChangeSelect(null);\n    }\n    /**\n     * 部屋の床の色を変更します\n     * @param color 色\n     */\n    updateCarpetColor(color) {\n        this.roomInfo.carpetColor = color;\n        this.applyCarpetColor();\n    }\n    /**\n     * 部屋の種類を変更します\n     * @param type 種類\n     */\n    changeRoomType(type) {\n        this.roomInfo.roomType = type;\n        this.scene.remove(this.roomObj);\n        this.loadRoom();\n    }\n    /**\n     * 部屋データを取得します\n     */\n    getRoomInfo() {\n        for (const obj of this.objects) {\n            const furniture = this.furnitures.find(f => f.id === obj.name);\n            furniture.position.x = obj.position.x;\n            furniture.position.y = obj.position.y;\n            furniture.position.z = obj.position.z;\n            furniture.rotation.x = obj.rotation.x;\n            furniture.rotation.y = obj.rotation.y;\n            furniture.rotation.z = obj.rotation.z;\n        }\n        return this.roomInfo;\n    }\n    /**\n     * 選択されている家具を取得します\n     */\n    getSelectedObject() {\n        return this.selectedObject;\n    }\n    findFurnitureById(id) {\n        return this.furnitures.find(furniture => furniture.id === id);\n    }\n    /**\n     * レンダリングを終了します\n     */\n    destroy() {\n        // Stop render loop\n        window.cancelAnimationFrame(this.renderFrameRequestId);\n        this.controls.dispose();\n        this.scene.dispose();\n    }\n}\n__decorate([\n    autobind\n], Room.prototype, \"renderWithoutPostFXs\", null);\n__decorate([\n    autobind\n], Room.prototype, \"renderWithPostFXs\", null);\n__decorate([\n    autobind\n], Room.prototype, \"loadRoom\", null);\n__decorate([\n    autobind\n], Room.prototype, \"loadFurniture\", null);\n__decorate([\n    autobind\n], Room.prototype, \"applyCarpetColor\", null);\n__decorate([\n    autobind\n], Room.prototype, \"applyCustomColor\", null);\n__decorate([\n    autobind\n], Room.prototype, \"applyCustomTexture\", null);\n__decorate([\n    autobind\n], Room.prototype, \"onmousemove\", null);\n__decorate([\n    autobind\n], Room.prototype, \"onmousedown\", null);\n__decorate([\n    autobind\n], Room.prototype, \"getRoot\", null);\n__decorate([\n    autobind\n], Room.prototype, \"isSelectedObject\", null);\n__decorate([\n    autobind\n], Room.prototype, \"selectFurniture\", null);\n__decorate([\n    autobind\n], Room.prototype, \"enterTransformMode\", null);\n__decorate([\n    autobind\n], Room.prototype, \"exitTransformMode\", null);\n__decorate([\n    autobind\n], Room.prototype, \"updateProp\", null);\n__decorate([\n    autobind\n], Room.prototype, \"addFurniture\", null);\n__decorate([\n    autobind\n], Room.prototype, \"removeFurniture\", null);\n__decorate([\n    autobind\n], Room.prototype, \"removeAllFurnitures\", null);\n__decorate([\n    autobind\n], Room.prototype, \"updateCarpetColor\", null);\n__decorate([\n    autobind\n], Room.prototype, \"changeRoomType\", null);\n__decorate([\n    autobind\n], Room.prototype, \"getRoomInfo\", null);\n__decorate([\n    autobind\n], Room.prototype, \"getSelectedObject\", null);\n__decorate([\n    autobind\n], Room.prototype, \"findFurnitureById\", null);\n__decorate([\n    autobind\n], Room.prototype, \"destroy\", null);\n","import Vue from 'vue';\nimport * as THREE from 'three';\nexport default Vue.extend({\n    data() {\n        return {\n            selected: null,\n            objectHeight: 0,\n            orbitRadius: 5\n        };\n    },\n    mounted() {\n        const canvas = this.$el;\n        const width = canvas.width;\n        const height = canvas.height;\n        const scene = new THREE.Scene();\n        const renderer = new THREE.WebGLRenderer({\n            canvas: canvas,\n            antialias: true,\n            alpha: false\n        });\n        renderer.setPixelRatio(window.devicePixelRatio);\n        renderer.setSize(width, height);\n        renderer.setClearColor(0x000000);\n        renderer.autoClear = false;\n        renderer.shadowMap.enabled = true;\n        renderer.shadowMap.cullFace = THREE.CullFaceBack;\n        const camera = new THREE.PerspectiveCamera(75, width / height, 0.1, 100);\n        camera.zoom = 10;\n        camera.position.x = 0;\n        camera.position.y = 2;\n        camera.position.z = 0;\n        camera.updateProjectionMatrix();\n        scene.add(camera);\n        const ambientLight = new THREE.AmbientLight(0xffffff, 1);\n        ambientLight.castShadow = false;\n        scene.add(ambientLight);\n        const light = new THREE.PointLight(0xffffff, 1, 100);\n        light.position.set(3, 3, 3);\n        scene.add(light);\n        const grid = new THREE.GridHelper(5, 16, 0x444444, 0x222222);\n        scene.add(grid);\n        const render = () => {\n            const timer = Date.now() * 0.0004;\n            requestAnimationFrame(render);\n            camera.position.y = Math.sin(Math.PI / 6) * this.orbitRadius; // Math.PI / 6 => 30deg\n            camera.position.z = Math.cos(timer) * this.orbitRadius;\n            camera.position.x = Math.sin(timer) * this.orbitRadius;\n            camera.lookAt(new THREE.Vector3(0, this.objectHeight / 2, 0));\n            renderer.render(scene, camera);\n        };\n        this.selected = selected => {\n            const obj = selected.clone();\n            // Remove current object\n            const current = scene.getObjectByName('obj');\n            if (current != null) {\n                scene.remove(current);\n            }\n            // Add new object\n            obj.name = 'obj';\n            obj.position.x = 0;\n            obj.position.y = 0;\n            obj.position.z = 0;\n            obj.rotation.x = 0;\n            obj.rotation.y = 0;\n            obj.rotation.z = 0;\n            obj.traverse(child => {\n                if (child instanceof THREE.Mesh) {\n                    child.material = child.material.clone();\n                    return child.material.emissive.setHex(0x000000);\n                }\n            });\n            const objectBoundingBox = new THREE.Box3().setFromObject(obj);\n            this.objectHeight = objectBoundingBox.max.y - objectBoundingBox.min.y;\n            const objectWidth = objectBoundingBox.max.x - objectBoundingBox.min.x;\n            const objectDepth = objectBoundingBox.max.z - objectBoundingBox.min.z;\n            const horizontal = Math.hypot(objectWidth, objectDepth) / camera.aspect;\n            this.orbitRadius = Math.max(horizontal, this.objectHeight) * camera.zoom * 0.625 / Math.tan(camera.fov * 0.5 * (Math.PI / 180));\n            scene.add(obj);\n        };\n        render();\n    },\n});\n","import mod from \"-!../../../../../../../node_modules/ts-loader/index.js??clonedRuleSet-7[0].rules[0].use[0]!../../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../../node_modules/vue-svg-inline-loader/src/index.js!./preview.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../../../../node_modules/ts-loader/index.js??clonedRuleSet-7[0].rules[0].use[0]!../../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../../node_modules/vue-svg-inline-loader/src/index.js!./preview.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./preview.vue?vue&type=template&id=a9872372&\"\nimport script from \"./preview.vue?vue&type=script&lang=ts&\"\nexport * from \"./preview.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('canvas',{attrs:{\"width\":\"224\",\"height\":\"128\"}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import Vue from 'vue';\nimport i18n from '../../../../i18n';\nimport { Room } from '../../../scripts/room/room';\nimport parseAcct from '../../../../../../misc/acct/parse';\nimport XPreview from './preview.vue';\nconst storeItems = require('../../../scripts/room/furnitures.json5');\nimport { faBoxOpen, faUndo, faArrowsAlt, faBan, faBroom } from '@fortawesome/free-solid-svg-icons';\nimport { faSave, faTrashAlt } from '@fortawesome/free-regular-svg-icons';\nimport { query as urlQuery } from '../../../../../../prelude/url';\nlet room;\nexport default Vue.extend({\n    i18n: i18n('room'),\n    components: {\n        XPreview\n    },\n    props: {\n        acct: {\n            type: String,\n            required: true\n        },\n    },\n    data() {\n        return {\n            objectSelected: false,\n            selectedFurnitureName: null,\n            selectedFurnitureInfo: null,\n            selectedFurnitureProps: null,\n            roomType: null,\n            carpetColor: null,\n            isTranslateMode: false,\n            isRotateMode: false,\n            isMyRoom: false,\n            changed: false,\n            faBoxOpen, faSave, faTrashAlt, faUndo, faArrowsAlt, faBan, faBroom,\n        };\n    },\n    async mounted() {\n        window.addEventListener('beforeunload', this.beforeunload);\n        const user = await this.$root.api('users/show', Object.assign({}, parseAcct(this.acct)));\n        this.isMyRoom = this.$store.getters.isSignedIn && this.$store.state.i.id === user.id;\n        const roomInfo = await this.$root.api('room/show', {\n            userId: user.id\n        });\n        this.roomType = roomInfo.roomType;\n        this.carpetColor = roomInfo.carpetColor;\n        room = new Room(user, this.isMyRoom, roomInfo, this.$el, {\n            graphicsQuality: this.$store.state.device.roomGraphicsQuality,\n            onChangeSelect: obj => {\n                this.objectSelected = obj != null;\n                if (obj) {\n                    const f = room.findFurnitureById(obj.name);\n                    this.selectedFurnitureName = this.$t('furnitures.' + f.type);\n                    this.selectedFurnitureInfo = storeItems.find(x => x.id === f.type);\n                    this.selectedFurnitureProps = f.props\n                        ? JSON.parse(JSON.stringify(f.props)) // Disable reactivity\n                        : null;\n                    this.$nextTick(() => {\n                        this.$refs.preview.selected(obj);\n                    });\n                }\n            },\n            useOrthographicCamera: this.$store.state.device.roomUseOrthographicCamera\n        });\n    },\n    beforeRouteLeave(to, from, next) {\n        if (this.changed) {\n            this.$root.dialog({\n                type: 'warning',\n                text: this.$t('leave-confirm'),\n                showCancelButton: true\n            }).then(({ canceled }) => {\n                if (canceled) {\n                    next(false);\n                }\n                else {\n                    next();\n                }\n            });\n        }\n        else {\n            next();\n        }\n    },\n    beforeDestroy() {\n        room.destroy();\n        window.removeEventListener('beforeunload', this.beforeunload);\n    },\n    methods: {\n        beforeunload(e) {\n            if (this.changed) {\n                e.preventDefault();\n                e.returnValue = '';\n            }\n        },\n        async add() {\n            const { canceled, result: id } = await this.$root.dialog({\n                type: null,\n                title: this.$t('add-furniture'),\n                select: {\n                    items: storeItems.map(item => ({\n                        value: item.id, text: this.$t('furnitures.' + item.id)\n                    }))\n                },\n                showCancelButton: true\n            });\n            if (canceled)\n                return;\n            room.addFurniture(id);\n            this.changed = true;\n        },\n        remove() {\n            this.isTranslateMode = false;\n            this.isRotateMode = false;\n            room.removeFurniture();\n            this.changed = true;\n        },\n        save() {\n            this.$root.api('room/update', {\n                room: room.getRoomInfo()\n            }).then(() => {\n                this.changed = false;\n                this.$root.dialog({\n                    type: 'success',\n                    text: this.$t('saved')\n                });\n            }).catch((e) => {\n                this.$root.dialog({\n                    type: 'error',\n                    text: e.message\n                });\n            });\n        },\n        clear() {\n            this.$root.dialog({\n                type: 'warning',\n                text: this.$t('clear-confirm'),\n                showCancelButton: true\n            }).then(({ canceled }) => {\n                if (canceled)\n                    return;\n                room.removeAllFurnitures();\n                this.changed = true;\n            });\n        },\n        chooseImage(key) {\n            this.$chooseDriveFile({\n                multiple: false\n            }).then(file => {\n                room.updateProp(key, `/proxy/?${urlQuery({ url: file.thumbnailUrl })}`);\n                this.$refs.preview.selected(room.getSelectedObject());\n                this.changed = true;\n            });\n        },\n        updateColor(key, ev) {\n            room.updateProp(key, ev.target.value);\n            this.$refs.preview.selected(room.getSelectedObject());\n            this.changed = true;\n        },\n        updateCarpetColor(ev) {\n            room.updateCarpetColor(ev.target.value);\n            this.carpetColor = ev.target.value;\n            this.changed = true;\n        },\n        updateRoomType(type) {\n            room.changeRoomType(type);\n            this.roomType = type;\n            this.changed = true;\n        },\n        translate() {\n            if (this.isTranslateMode) {\n                this.exit();\n            }\n            else {\n                this.isRotateMode = false;\n                this.isTranslateMode = true;\n                room.enterTransformMode('translate');\n            }\n            this.changed = true;\n        },\n        rotate() {\n            if (this.isRotateMode) {\n                this.exit();\n            }\n            else {\n                this.isTranslateMode = false;\n                this.isRotateMode = true;\n                room.enterTransformMode('rotate');\n            }\n            this.changed = true;\n        },\n        exit() {\n            this.isTranslateMode = false;\n            this.isRotateMode = false;\n            room.exitTransformMode();\n            this.changed = true;\n        }\n    }\n});\n","import mod from \"-!../../../../../../../node_modules/ts-loader/index.js??clonedRuleSet-7[0].rules[0].use[0]!../../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../../node_modules/vue-svg-inline-loader/src/index.js!./room.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../../../../node_modules/ts-loader/index.js??clonedRuleSet-7[0].rules[0].use[0]!../../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../../node_modules/vue-svg-inline-loader/src/index.js!./room.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./room.vue?vue&type=template&id=e5cbc970&scoped=true&\"\nimport script from \"./room.vue?vue&type=script&lang=ts&\"\nexport * from \"./room.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./room.vue?vue&type=style&index=0&id=e5cbc970&lang=stylus&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"e5cbc970\",\n  null\n  \n)\n\nexport default component.exports","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-3[0].rules[0].use[1]!../../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../node_modules/postcss-loader/src/index.js??clonedRuleSet-3[0].rules[0].use[2]!../../../../../../../node_modules/stylus-loader/dist/cjs.js!../../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../../node_modules/vue-svg-inline-loader/src/index.js!./room.vue?vue&type=style&index=0&id=e5cbc970&lang=stylus&scoped=true&\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"07ec9112\", content, true, {});"],"sourceRoot":""}