(self.webpackChunkayuskey_mfe=self.webpackChunkayuskey_mfe||[]).push([[6733],{18927:(e,t,a)=>{var i=a(94015),o=a(23645)(i);o.push([e.id,".zdjebgpv[data-v-7108a140]{display:flex;position:relative}.zdjebgpv>.icon-sub[data-v-7108a140]{position:absolute;width:30%;height:auto;margin:0;right:4%;bottom:4%}.zdjebgpv>*[data-v-7108a140]{margin:auto}.zdjebgpv>.icon[data-v-7108a140]{pointer-events:none;height:65%;width:65%}","",{version:3,sources:["webpack://./src/client/app/common/views/components/drive-file-thumbnail.vue"],names:[],mappings:"AAAA,2BAA2B,YAAY,CAAC,iBAAiB,CAAC,qCAAqC,iBAAiB,CAAC,SAAS,CAAC,WAAW,CAAC,QAAQ,CAAC,QAAQ,CAAC,SAAS,CAAC,6BAA6B,WAAW,CAAC,iCAAiC,mBAAmB,CAAC,UAAU,CAAC,SAAS",sourcesContent:[".zdjebgpv[data-v-7108a140]{display:flex;position:relative}.zdjebgpv>.icon-sub[data-v-7108a140]{position:absolute;width:30%;height:auto;margin:0;right:4%;bottom:4%}.zdjebgpv>*[data-v-7108a140]{margin:auto}.zdjebgpv>.icon[data-v-7108a140]{pointer-events:none;height:65%;width:65%}"],sourceRoot:""}]),e.exports=o},25640:(e,t,a)=>{var i=a(94015),o=a(23645)(i);o.push([e.id,'.gvfdktuvdgwhmztnuekzkswkjygptfcv[data-v-be458310]{padding:8px 0 0;min-height:180px;border-radius:4px}.gvfdktuvdgwhmztnuekzkswkjygptfcv[data-v-be458310],.gvfdktuvdgwhmztnuekzkswkjygptfcv *[data-v-be458310]{cursor:pointer}.gvfdktuvdgwhmztnuekzkswkjygptfcv[data-v-be458310]:hover{background:rgba(0,0,0,.05)}.gvfdktuvdgwhmztnuekzkswkjygptfcv:hover>.label[data-v-be458310]:after,.gvfdktuvdgwhmztnuekzkswkjygptfcv:hover>.label[data-v-be458310]:before{background:#0b65a5}.gvfdktuvdgwhmztnuekzkswkjygptfcv:hover>.label.red[data-v-be458310]:after,.gvfdktuvdgwhmztnuekzkswkjygptfcv:hover>.label.red[data-v-be458310]:before{background:#c12113}.gvfdktuvdgwhmztnuekzkswkjygptfcv[data-v-be458310]:active{background:rgba(0,0,0,.1)}.gvfdktuvdgwhmztnuekzkswkjygptfcv:active>.label[data-v-be458310]:after,.gvfdktuvdgwhmztnuekzkswkjygptfcv:active>.label[data-v-be458310]:before{background:#0b588c}.gvfdktuvdgwhmztnuekzkswkjygptfcv:active>.label.red[data-v-be458310]:after,.gvfdktuvdgwhmztnuekzkswkjygptfcv:active>.label.red[data-v-be458310]:before{background:#ce2212}.gvfdktuvdgwhmztnuekzkswkjygptfcv[data-is-selected][data-v-be458310]{background:var(--primary)}.gvfdktuvdgwhmztnuekzkswkjygptfcv[data-is-selected][data-v-be458310]:hover{background:var(--primaryLighten10)}.gvfdktuvdgwhmztnuekzkswkjygptfcv[data-is-selected][data-v-be458310]:active{background:var(--primaryDarken10)}.gvfdktuvdgwhmztnuekzkswkjygptfcv[data-is-selected]>.label[data-v-be458310]:after,.gvfdktuvdgwhmztnuekzkswkjygptfcv[data-is-selected]>.label[data-v-be458310]:before{display:none}.gvfdktuvdgwhmztnuekzkswkjygptfcv[data-is-selected]>.name[data-v-be458310],.gvfdktuvdgwhmztnuekzkswkjygptfcv[data-is-selected]>.thumbnail[data-v-be458310]{color:var(--primaryForeground)}.gvfdktuvdgwhmztnuekzkswkjygptfcv[data-is-contextmenu-showing][data-v-be458310]:after{content:"";pointer-events:none;position:absolute;top:-4px;right:-4px;bottom:-4px;left:-4px;border:2px dashed var(--primaryAlpha03);border-radius:4px}.gvfdktuvdgwhmztnuekzkswkjygptfcv>.label[data-v-be458310]{position:absolute;top:0;left:0;pointer-events:none}.gvfdktuvdgwhmztnuekzkswkjygptfcv>.label[data-v-be458310]:after,.gvfdktuvdgwhmztnuekzkswkjygptfcv>.label[data-v-be458310]:before{content:"";display:block;position:absolute;z-index:1;background:#0c7ac9}.gvfdktuvdgwhmztnuekzkswkjygptfcv>.label[data-v-be458310]:before{top:0;left:57px;width:28px;height:8px}.gvfdktuvdgwhmztnuekzkswkjygptfcv>.label[data-v-be458310]:after{top:57px;left:0;width:8px;height:28px}.gvfdktuvdgwhmztnuekzkswkjygptfcv>.label.red[data-v-be458310]:after,.gvfdktuvdgwhmztnuekzkswkjygptfcv>.label.red[data-v-be458310]:before{background:#c12113}.gvfdktuvdgwhmztnuekzkswkjygptfcv>.label>img[data-v-be458310]{position:absolute;z-index:2;top:0;left:0}.gvfdktuvdgwhmztnuekzkswkjygptfcv>.label>p[data-v-be458310]{position:absolute;z-index:3;top:19px;left:-28px;width:120px;margin:0;text-align:center;line-height:28px;color:#fff;transform:rotate(-45deg)}.gvfdktuvdgwhmztnuekzkswkjygptfcv>.thumbnail[data-v-be458310]{width:128px;height:128px;margin:auto;color:var(--driveFileIcon)}.gvfdktuvdgwhmztnuekzkswkjygptfcv>.name[data-v-be458310]{display:block;margin:4px 0 0;font-size:.8em;text-align:center;word-break:break-all;color:var(--text);overflow:hidden}.gvfdktuvdgwhmztnuekzkswkjygptfcv>.name>.ext[data-v-be458310]{opacity:.5}',"",{version:3,sources:["webpack://./src/client/app/desktop/views/components/drive.file.vue"],names:[],mappings:"AAAA,mDAAmD,eAAe,CAAC,gBAAgB,CAAC,iBAAiB,CAAC,wGAAwG,cAAc,CAAC,yDAAyD,0BAA0B,CAAC,6IAA6I,kBAAkB,CAAC,qJAAqJ,kBAAkB,CAAC,0DAA0D,yBAAyB,CAAC,+IAA+I,kBAAkB,CAAC,uJAAuJ,kBAAkB,CAAC,qEAAqE,yBAAyB,CAAC,2EAA2E,kCAAkC,CAAC,4EAA4E,iCAAiC,CAAC,qKAAqK,YAAY,CAAC,2JAA2J,8BAA8B,CAAC,sFAAsF,UAAU,CAAC,mBAAmB,CAAC,iBAAiB,CAAC,QAAQ,CAAC,UAAU,CAAC,WAAW,CAAC,SAAS,CAAC,uCAAuC,CAAC,iBAAiB,CAAC,0DAA0D,iBAAiB,CAAC,KAAK,CAAC,MAAM,CAAC,mBAAmB,CAAC,iIAAiI,UAAU,CAAC,aAAa,CAAC,iBAAiB,CAAC,SAAS,CAAC,kBAAkB,CAAC,iEAAiE,KAAK,CAAC,SAAS,CAAC,UAAU,CAAC,UAAU,CAAC,gEAAgE,QAAQ,CAAC,MAAM,CAAC,SAAS,CAAC,WAAW,CAAC,yIAAyI,kBAAkB,CAAC,8DAA8D,iBAAiB,CAAC,SAAS,CAAC,KAAK,CAAC,MAAM,CAAC,4DAA4D,iBAAiB,CAAC,SAAS,CAAC,QAAQ,CAAC,UAAU,CAAC,WAAW,CAAC,QAAQ,CAAC,iBAAiB,CAAC,gBAAgB,CAAC,UAAU,CAAC,wBAAwB,CAAC,8DAA8D,WAAW,CAAC,YAAY,CAAC,WAAW,CAAC,0BAA0B,CAAC,yDAAyD,aAAa,CAAC,cAAc,CAAC,cAAc,CAAC,iBAAiB,CAAC,oBAAoB,CAAC,iBAAiB,CAAC,eAAe,CAAC,8DAA8D,UAAU",sourcesContent:['.gvfdktuvdgwhmztnuekzkswkjygptfcv[data-v-be458310]{padding:8px 0 0;min-height:180px;border-radius:4px}.gvfdktuvdgwhmztnuekzkswkjygptfcv[data-v-be458310],.gvfdktuvdgwhmztnuekzkswkjygptfcv *[data-v-be458310]{cursor:pointer}.gvfdktuvdgwhmztnuekzkswkjygptfcv[data-v-be458310]:hover{background:rgba(0,0,0,.05)}.gvfdktuvdgwhmztnuekzkswkjygptfcv:hover>.label[data-v-be458310]:after,.gvfdktuvdgwhmztnuekzkswkjygptfcv:hover>.label[data-v-be458310]:before{background:#0b65a5}.gvfdktuvdgwhmztnuekzkswkjygptfcv:hover>.label.red[data-v-be458310]:after,.gvfdktuvdgwhmztnuekzkswkjygptfcv:hover>.label.red[data-v-be458310]:before{background:#c12113}.gvfdktuvdgwhmztnuekzkswkjygptfcv[data-v-be458310]:active{background:rgba(0,0,0,.1)}.gvfdktuvdgwhmztnuekzkswkjygptfcv:active>.label[data-v-be458310]:after,.gvfdktuvdgwhmztnuekzkswkjygptfcv:active>.label[data-v-be458310]:before{background:#0b588c}.gvfdktuvdgwhmztnuekzkswkjygptfcv:active>.label.red[data-v-be458310]:after,.gvfdktuvdgwhmztnuekzkswkjygptfcv:active>.label.red[data-v-be458310]:before{background:#ce2212}.gvfdktuvdgwhmztnuekzkswkjygptfcv[data-is-selected][data-v-be458310]{background:var(--primary)}.gvfdktuvdgwhmztnuekzkswkjygptfcv[data-is-selected][data-v-be458310]:hover{background:var(--primaryLighten10)}.gvfdktuvdgwhmztnuekzkswkjygptfcv[data-is-selected][data-v-be458310]:active{background:var(--primaryDarken10)}.gvfdktuvdgwhmztnuekzkswkjygptfcv[data-is-selected]>.label[data-v-be458310]:after,.gvfdktuvdgwhmztnuekzkswkjygptfcv[data-is-selected]>.label[data-v-be458310]:before{display:none}.gvfdktuvdgwhmztnuekzkswkjygptfcv[data-is-selected]>.name[data-v-be458310],.gvfdktuvdgwhmztnuekzkswkjygptfcv[data-is-selected]>.thumbnail[data-v-be458310]{color:var(--primaryForeground)}.gvfdktuvdgwhmztnuekzkswkjygptfcv[data-is-contextmenu-showing][data-v-be458310]:after{content:"";pointer-events:none;position:absolute;top:-4px;right:-4px;bottom:-4px;left:-4px;border:2px dashed var(--primaryAlpha03);border-radius:4px}.gvfdktuvdgwhmztnuekzkswkjygptfcv>.label[data-v-be458310]{position:absolute;top:0;left:0;pointer-events:none}.gvfdktuvdgwhmztnuekzkswkjygptfcv>.label[data-v-be458310]:after,.gvfdktuvdgwhmztnuekzkswkjygptfcv>.label[data-v-be458310]:before{content:"";display:block;position:absolute;z-index:1;background:#0c7ac9}.gvfdktuvdgwhmztnuekzkswkjygptfcv>.label[data-v-be458310]:before{top:0;left:57px;width:28px;height:8px}.gvfdktuvdgwhmztnuekzkswkjygptfcv>.label[data-v-be458310]:after{top:57px;left:0;width:8px;height:28px}.gvfdktuvdgwhmztnuekzkswkjygptfcv>.label.red[data-v-be458310]:after,.gvfdktuvdgwhmztnuekzkswkjygptfcv>.label.red[data-v-be458310]:before{background:#c12113}.gvfdktuvdgwhmztnuekzkswkjygptfcv>.label>img[data-v-be458310]{position:absolute;z-index:2;top:0;left:0}.gvfdktuvdgwhmztnuekzkswkjygptfcv>.label>p[data-v-be458310]{position:absolute;z-index:3;top:19px;left:-28px;width:120px;margin:0;text-align:center;line-height:28px;color:#fff;transform:rotate(-45deg)}.gvfdktuvdgwhmztnuekzkswkjygptfcv>.thumbnail[data-v-be458310]{width:128px;height:128px;margin:auto;color:var(--driveFileIcon)}.gvfdktuvdgwhmztnuekzkswkjygptfcv>.name[data-v-be458310]{display:block;margin:4px 0 0;font-size:.8em;text-align:center;word-break:break-all;color:var(--text);overflow:hidden}.gvfdktuvdgwhmztnuekzkswkjygptfcv>.name>.ext[data-v-be458310]{opacity:.5}'],sourceRoot:""}]),e.exports=o},52074:(e,t,a)=>{var i=a(94015),o=a(23645)(i);o.push([e.id,'.ynntpczxvnusfwdyxsfuhvcmuypqopdd[data-v-009c4c3a]{padding:8px;height:64px;background:var(--desktopDriveFolderBg);border-radius:4px}.ynntpczxvnusfwdyxsfuhvcmuypqopdd[data-v-009c4c3a],.ynntpczxvnusfwdyxsfuhvcmuypqopdd *[data-v-009c4c3a]{cursor:pointer}.ynntpczxvnusfwdyxsfuhvcmuypqopdd *[data-v-009c4c3a]{pointer-events:none}.ynntpczxvnusfwdyxsfuhvcmuypqopdd[data-v-009c4c3a]:hover{background:var(--desktopDriveFolderHoverBg)}.ynntpczxvnusfwdyxsfuhvcmuypqopdd[data-v-009c4c3a]:active{background:var(--desktopDriveFolderActiveBg)}.ynntpczxvnusfwdyxsfuhvcmuypqopdd[data-draghover][data-v-009c4c3a]:after,.ynntpczxvnusfwdyxsfuhvcmuypqopdd[data-is-contextmenu-showing][data-v-009c4c3a]:after{content:"";pointer-events:none;position:absolute;top:-4px;right:-4px;bottom:-4px;left:-4px;border:2px dashed var(--primaryAlpha03);border-radius:4px}.ynntpczxvnusfwdyxsfuhvcmuypqopdd[data-draghover][data-v-009c4c3a]{background:var(--desktopDriveFolderActiveBg)}.ynntpczxvnusfwdyxsfuhvcmuypqopdd>.name[data-v-009c4c3a]{margin:0;font-size:.9em;color:var(--desktopDriveFolderFg)}.ynntpczxvnusfwdyxsfuhvcmuypqopdd>.name>[data-icon][data-v-009c4c3a]{margin-right:4px;margin-left:2px;text-align:left}.ynntpczxvnusfwdyxsfuhvcmuypqopdd>.upload[data-v-009c4c3a]{margin:4px;font-size:.8em;text-align:right;color:var(--desktopDriveFolderFg)}',"",{version:3,sources:["webpack://./src/client/app/desktop/views/components/drive.folder.vue"],names:[],mappings:"AAAA,mDAAmD,WAAW,CAAC,WAAW,CAAC,sCAAsC,CAAC,iBAAiB,CAAC,wGAAwG,cAAc,CAAC,qDAAqD,mBAAmB,CAAC,yDAAyD,2CAA2C,CAAC,0DAA0D,4CAA4C,CAAC,+JAA+J,UAAU,CAAC,mBAAmB,CAAC,iBAAiB,CAAC,QAAQ,CAAC,UAAU,CAAC,WAAW,CAAC,SAAS,CAAC,uCAAuC,CAAC,iBAAiB,CAAC,mEAAmE,4CAA4C,CAAC,yDAAyD,QAAQ,CAAC,cAAc,CAAC,iCAAiC,CAAC,qEAAqE,gBAAgB,CAAC,eAAe,CAAC,eAAe,CAAC,2DAA2D,UAAU,CAAC,cAAc,CAAC,gBAAgB,CAAC,iCAAiC",sourcesContent:['.ynntpczxvnusfwdyxsfuhvcmuypqopdd[data-v-009c4c3a]{padding:8px;height:64px;background:var(--desktopDriveFolderBg);border-radius:4px}.ynntpczxvnusfwdyxsfuhvcmuypqopdd[data-v-009c4c3a],.ynntpczxvnusfwdyxsfuhvcmuypqopdd *[data-v-009c4c3a]{cursor:pointer}.ynntpczxvnusfwdyxsfuhvcmuypqopdd *[data-v-009c4c3a]{pointer-events:none}.ynntpczxvnusfwdyxsfuhvcmuypqopdd[data-v-009c4c3a]:hover{background:var(--desktopDriveFolderHoverBg)}.ynntpczxvnusfwdyxsfuhvcmuypqopdd[data-v-009c4c3a]:active{background:var(--desktopDriveFolderActiveBg)}.ynntpczxvnusfwdyxsfuhvcmuypqopdd[data-draghover][data-v-009c4c3a]:after,.ynntpczxvnusfwdyxsfuhvcmuypqopdd[data-is-contextmenu-showing][data-v-009c4c3a]:after{content:"";pointer-events:none;position:absolute;top:-4px;right:-4px;bottom:-4px;left:-4px;border:2px dashed var(--primaryAlpha03);border-radius:4px}.ynntpczxvnusfwdyxsfuhvcmuypqopdd[data-draghover][data-v-009c4c3a]{background:var(--desktopDriveFolderActiveBg)}.ynntpczxvnusfwdyxsfuhvcmuypqopdd>.name[data-v-009c4c3a]{margin:0;font-size:.9em;color:var(--desktopDriveFolderFg)}.ynntpczxvnusfwdyxsfuhvcmuypqopdd>.name>[data-icon][data-v-009c4c3a]{margin-right:4px;margin-left:2px;text-align:left}.ynntpczxvnusfwdyxsfuhvcmuypqopdd>.upload[data-v-009c4c3a]{margin:4px;font-size:.8em;text-align:right;color:var(--desktopDriveFolderFg)}'],sourceRoot:""}]),e.exports=o},45475:(e,t,a)=>{var i=a(94015),o=a(23645)(i);o.push([e.id,".root.nav-folder>*[data-v-bc9dcd2c]{pointer-events:none}.root.nav-folder[data-draghover][data-v-bc9dcd2c]{background:#eee}.root.nav-folder i.cloud[data-v-bc9dcd2c]{margin-right:4px}","",{version:3,sources:["webpack://./src/client/app/desktop/views/components/drive.nav-folder.vue"],names:[],mappings:"AAAA,oCAAoC,mBAAmB,CAAC,kDAAkD,eAAe,CAAC,0CAA0C,gBAAgB",sourcesContent:[".root.nav-folder>*[data-v-bc9dcd2c]{pointer-events:none}.root.nav-folder[data-draghover][data-v-bc9dcd2c]{background:#eee}.root.nav-folder i.cloud[data-v-bc9dcd2c]{margin-right:4px}"],sourceRoot:""}]),e.exports=o},85974:(e,t,a)=>{var i=a(94015),o=a(23645)(i);o.push([e.id,".mk-drive>nav[data-v-fae14316]{display:block;z-index:2;width:100%;overflow:auto;font-size:.9em;color:var(--text);background:var(--face);box-shadow:0 1px 0 rgba(0,0,0,.05)}.mk-drive>nav[data-v-fae14316],.mk-drive>nav *[data-v-fae14316]{user-select:none}.mk-drive>nav>.path[data-v-fae14316]{vertical-align:bottom;width:calc(100% - 200px);white-space:nowrap}.mk-drive>nav>.path[data-v-fae14316],.mk-drive>nav>.path>*[data-v-fae14316]{display:inline-block;margin:0;padding:0 8px;line-height:38px}.mk-drive>nav>.path>*[data-v-fae14316]{cursor:pointer}.mk-drive>nav>.path>* *[data-v-fae14316]{pointer-events:none}.mk-drive>nav>.path[data-v-fae14316]>:hover{text-decoration:underline}.mk-drive>nav>.path>.current[data-v-fae14316]{font-weight:700;cursor:default}.mk-drive>nav>.path>.current[data-v-fae14316]:hover{text-decoration:none}.mk-drive>nav>.path>.separator[data-v-fae14316]{margin:0;padding:0;opacity:.5;cursor:default}.mk-drive>nav>.path>.separator>[data-icon][data-v-fae14316]{margin:0}.mk-drive>.main[data-v-fae14316]{padding:8px;height:calc(100% - 38px);overflow:auto;background:var(--desktopDriveBg)}.mk-drive>.main[data-v-fae14316],.mk-drive>.main *[data-v-fae14316]{user-select:none}.mk-drive>.main.fetching[data-v-fae14316]{cursor:wait!important}.mk-drive>.main.fetching *[data-v-fae14316]{pointer-events:none}.mk-drive>.main.fetching>.contents[data-v-fae14316]{opacity:.5}.mk-drive>.main.uploading[data-v-fae14316]{height:calc(100% - 138px)}.mk-drive>.main>.selection[data-v-fae14316]{display:none;position:absolute;z-index:128;top:0;left:0;border:1px solid var(--primary);background:var(--primaryAlpha05);pointer-events:none}.mk-drive>.main>.contents>.files[data-v-fae14316],.mk-drive>.main>.contents>.folders[data-v-fae14316]{display:flex;flex-wrap:wrap}.mk-drive>.main>.contents>.files>.file[data-v-fae14316],.mk-drive>.main>.contents>.files>.folder[data-v-fae14316],.mk-drive>.main>.contents>.folders>.file[data-v-fae14316],.mk-drive>.main>.contents>.folders>.folder[data-v-fae14316]{flex-grow:1;width:144px;margin:4px}.mk-drive>.main>.contents>.files>.padding[data-v-fae14316],.mk-drive>.main>.contents>.folders>.padding[data-v-fae14316]{flex-grow:1;pointer-events:none;width:152px}.mk-drive>.main>.contents>.empty[data-v-fae14316]{padding:16px;text-align:center;color:#999;pointer-events:none}.mk-drive>.main>.contents>.empty>p[data-v-fae14316]{margin:0}.mk-drive>.main>.fetching .spinner[data-v-fae14316]{margin:100px auto;width:40px;height:40px;text-align:center;animation:sk-rotate-data-v-fae14316 2s linear infinite}.mk-drive>.main>.fetching .dot1[data-v-fae14316],.mk-drive>.main>.fetching .dot2[data-v-fae14316]{width:60%;height:60%;display:inline-block;position:absolute;top:0;background-color:rgba(0,0,0,.3);border-radius:100%;animation:sk-bounce-data-v-fae14316 2s ease-in-out infinite}.mk-drive>.main>.fetching .dot2[data-v-fae14316]{top:auto;bottom:0;animation-delay:-1s}@-moz-keyframes sk-rotate-data-v-fae14316{to{transform:rotate(1turn)}}@-webkit-keyframes sk-rotate-data-v-fae14316{to{transform:rotate(1turn)}}@-o-keyframes sk-rotate-data-v-fae14316{to{transform:rotate(1turn)}}@keyframes sk-rotate-data-v-fae14316{to{transform:rotate(1turn)}}@-moz-keyframes sk-bounce-data-v-fae14316{0%,to{transform:scale(0)}50%{transform:scale(1)}}@-webkit-keyframes sk-bounce-data-v-fae14316{0%,to{transform:scale(0)}50%{transform:scale(1)}}@-o-keyframes sk-bounce-data-v-fae14316{0%,to{transform:scale(0)}50%{transform:scale(1)}}@keyframes sk-bounce-data-v-fae14316{0%,to{transform:scale(0)}50%{transform:scale(1)}}.mk-drive>.dropzone[data-v-fae14316]{position:absolute;left:0;top:38px;width:100%;height:calc(100% - 38px);border:2px dashed var(--primaryAlpha05);pointer-events:none}.mk-drive>.mk-uploader[data-v-fae14316]{height:100px;padding:16px}.mk-drive>input[data-v-fae14316]{display:none}","",{version:3,sources:["webpack://./src/client/app/desktop/views/components/drive.vue"],names:[],mappings:"AAAA,+BAA+B,aAAa,CAAC,SAAS,CAAC,UAAU,CAAC,aAAa,CAAC,cAAc,CAAC,iBAAiB,CAAC,sBAAsB,CAAC,kCAAkC,CAAC,gEAAgE,gBAAgB,CAAC,qCAAqC,qBAAqB,CAAC,wBAAwB,CAAC,kBAAkB,CAAC,4EAA4E,oBAAoB,CAAC,QAAQ,CAAC,aAAa,CAAC,gBAAgB,CAAC,uCAAuC,cAAc,CAAC,yCAAyC,mBAAmB,CAAC,4CAA4C,yBAAyB,CAAC,8CAA8C,eAAe,CAAC,cAAc,CAAC,oDAAoD,oBAAoB,CAAC,gDAAgD,QAAQ,CAAC,SAAS,CAAC,UAAU,CAAC,cAAc,CAAC,4DAA4D,QAAQ,CAAC,iCAAiC,WAAW,CAAC,wBAAwB,CAAC,aAAa,CAAC,gCAAgC,CAAC,oEAAoE,gBAAgB,CAAC,0CAA0C,qBAAqB,CAAC,4CAA4C,mBAAmB,CAAC,oDAAoD,UAAU,CAAC,2CAA2C,yBAAyB,CAAC,4CAA4C,YAAY,CAAC,iBAAiB,CAAC,WAAW,CAAC,KAAK,CAAC,MAAM,CAAC,+BAA+B,CAAC,gCAAgC,CAAC,mBAAmB,CAAC,sGAAsG,YAAY,CAAC,cAAc,CAAC,wOAAwO,WAAW,CAAC,WAAW,CAAC,UAAU,CAAC,wHAAwH,WAAW,CAAC,mBAAmB,CAAC,WAAW,CAAC,kDAAkD,YAAY,CAAC,iBAAiB,CAAC,UAAU,CAAC,mBAAmB,CAAC,oDAAoD,QAAQ,CAAC,oDAAoD,iBAAiB,CAAC,UAAU,CAAC,WAAW,CAAC,iBAAiB,CAAC,sDAAsD,CAAC,kGAAkG,SAAS,CAAC,UAAU,CAAC,oBAAoB,CAAC,iBAAiB,CAAC,KAAK,CAAC,+BAA+B,CAAC,kBAAkB,CAAC,2DAA2D,CAAC,iDAAiD,QAAQ,CAAC,QAAQ,CAAC,mBAAmB,CAAC,0CAA0C,GAAG,uBAAuB,CAAC,CAAC,6CAA6C,GAAG,uBAAuB,CAAC,CAAC,wCAAwC,GAAG,uBAAuB,CAAC,CAAC,qCAAqC,GAAG,uBAAuB,CAAC,CAAC,0CAA0C,MAAM,kBAAkB,CAAC,IAAI,kBAAkB,CAAC,CAAC,6CAA6C,MAAM,kBAAkB,CAAC,IAAI,kBAAkB,CAAC,CAAC,wCAAwC,MAAM,kBAAkB,CAAC,IAAI,kBAAkB,CAAC,CAAC,qCAAqC,MAAM,kBAAkB,CAAC,IAAI,kBAAkB,CAAC,CAAC,qCAAqC,iBAAiB,CAAC,MAAM,CAAC,QAAQ,CAAC,UAAU,CAAC,wBAAwB,CAAC,uCAAuC,CAAC,mBAAmB,CAAC,wCAAwC,YAAY,CAAC,YAAY,CAAC,iCAAiC,YAAY",sourcesContent:[".mk-drive>nav[data-v-fae14316]{display:block;z-index:2;width:100%;overflow:auto;font-size:.9em;color:var(--text);background:var(--face);box-shadow:0 1px 0 rgba(0,0,0,.05)}.mk-drive>nav[data-v-fae14316],.mk-drive>nav *[data-v-fae14316]{user-select:none}.mk-drive>nav>.path[data-v-fae14316]{vertical-align:bottom;width:calc(100% - 200px);white-space:nowrap}.mk-drive>nav>.path[data-v-fae14316],.mk-drive>nav>.path>*[data-v-fae14316]{display:inline-block;margin:0;padding:0 8px;line-height:38px}.mk-drive>nav>.path>*[data-v-fae14316]{cursor:pointer}.mk-drive>nav>.path>* *[data-v-fae14316]{pointer-events:none}.mk-drive>nav>.path[data-v-fae14316]>:hover{text-decoration:underline}.mk-drive>nav>.path>.current[data-v-fae14316]{font-weight:700;cursor:default}.mk-drive>nav>.path>.current[data-v-fae14316]:hover{text-decoration:none}.mk-drive>nav>.path>.separator[data-v-fae14316]{margin:0;padding:0;opacity:.5;cursor:default}.mk-drive>nav>.path>.separator>[data-icon][data-v-fae14316]{margin:0}.mk-drive>.main[data-v-fae14316]{padding:8px;height:calc(100% - 38px);overflow:auto;background:var(--desktopDriveBg)}.mk-drive>.main[data-v-fae14316],.mk-drive>.main *[data-v-fae14316]{user-select:none}.mk-drive>.main.fetching[data-v-fae14316]{cursor:wait!important}.mk-drive>.main.fetching *[data-v-fae14316]{pointer-events:none}.mk-drive>.main.fetching>.contents[data-v-fae14316]{opacity:.5}.mk-drive>.main.uploading[data-v-fae14316]{height:calc(100% - 138px)}.mk-drive>.main>.selection[data-v-fae14316]{display:none;position:absolute;z-index:128;top:0;left:0;border:1px solid var(--primary);background:var(--primaryAlpha05);pointer-events:none}.mk-drive>.main>.contents>.files[data-v-fae14316],.mk-drive>.main>.contents>.folders[data-v-fae14316]{display:flex;flex-wrap:wrap}.mk-drive>.main>.contents>.files>.file[data-v-fae14316],.mk-drive>.main>.contents>.files>.folder[data-v-fae14316],.mk-drive>.main>.contents>.folders>.file[data-v-fae14316],.mk-drive>.main>.contents>.folders>.folder[data-v-fae14316]{flex-grow:1;width:144px;margin:4px}.mk-drive>.main>.contents>.files>.padding[data-v-fae14316],.mk-drive>.main>.contents>.folders>.padding[data-v-fae14316]{flex-grow:1;pointer-events:none;width:152px}.mk-drive>.main>.contents>.empty[data-v-fae14316]{padding:16px;text-align:center;color:#999;pointer-events:none}.mk-drive>.main>.contents>.empty>p[data-v-fae14316]{margin:0}.mk-drive>.main>.fetching .spinner[data-v-fae14316]{margin:100px auto;width:40px;height:40px;text-align:center;animation:sk-rotate-data-v-fae14316 2s linear infinite}.mk-drive>.main>.fetching .dot1[data-v-fae14316],.mk-drive>.main>.fetching .dot2[data-v-fae14316]{width:60%;height:60%;display:inline-block;position:absolute;top:0;background-color:rgba(0,0,0,.3);border-radius:100%;animation:sk-bounce-data-v-fae14316 2s ease-in-out infinite}.mk-drive>.main>.fetching .dot2[data-v-fae14316]{top:auto;bottom:0;animation-delay:-1s}@-moz-keyframes sk-rotate-data-v-fae14316{to{transform:rotate(1turn)}}@-webkit-keyframes sk-rotate-data-v-fae14316{to{transform:rotate(1turn)}}@-o-keyframes sk-rotate-data-v-fae14316{to{transform:rotate(1turn)}}@keyframes sk-rotate-data-v-fae14316{to{transform:rotate(1turn)}}@-moz-keyframes sk-bounce-data-v-fae14316{0%,to{transform:scale(0)}50%{transform:scale(1)}}@-webkit-keyframes sk-bounce-data-v-fae14316{0%,to{transform:scale(0)}50%{transform:scale(1)}}@-o-keyframes sk-bounce-data-v-fae14316{0%,to{transform:scale(0)}50%{transform:scale(1)}}@keyframes sk-bounce-data-v-fae14316{0%,to{transform:scale(0)}50%{transform:scale(1)}}.mk-drive>.dropzone[data-v-fae14316]{position:absolute;left:0;top:38px;width:100%;height:calc(100% - 38px);border:2px dashed var(--primaryAlpha05);pointer-events:none}.mk-drive>.mk-uploader[data-v-fae14316]{height:100px;padding:16px}.mk-drive>input[data-v-fae14316]{display:none}"],sourceRoot:""}]),e.exports=o},99017:(e,t,a)=>{"use strict";a.d(t,{Z:()=>d});var i=a(20144),o=a(51436),r=a(6119);const n=i.default.extend({components:{ImgWithBlurhash:r.Z},props:{file:{type:Object,required:!0},fit:{type:String,required:!1,default:"cover"}},data:()=>({isContextmenuShowing:!1,isDragging:!1,faFile:o.gMD,faFileAlt:o.cwv,faFileImage:o.Oi0,faMusic:o.Xig,faFileVideo:o.hvm,faFileCsv:o.fUD,faFilePdf:o.gSj,faFileArchive:o.W2U,faFilm:o.CjD}),computed:{is(){return this.file.type.startsWith("image/")?"image":this.file.type.startsWith("video/")?"video":"audio/midi"===this.file.type?"midi":this.file.type.startsWith("audio/")?"audio":this.file.type.endsWith("/csv")?"csv":this.file.type.endsWith("/pdf")?"pdf":this.file.type.startsWith("text/")?"textfile":["application/zip","application/x-cpio","application/x-bzip","application/x-bzip2","application/java-archive","application/x-rar-compressed","application/x-tar","application/gzip","application/x-7z-compressed"].some((e=>e===this.file.type))?"archive":"unknown"},isThumbnailAvailable(){return!!this.file.thumbnailUrl&&("image"===this.is||"video"===this.is)}},mounted(){const e=this.$refs.volumectrl;e&&(e.volume=this.$store.state.device.mediaVolume)},methods:{volumechange(){const e=this.$refs.volumectrl;this.$store.commit("device/set",{key:"mediaVolume",value:e.volume})}}});a(18266);const d=(0,a(51900).Z)(n,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{ref:"thumbnail",staticClass:"zdjebgpv"},[e.isThumbnailAvailable?a("img-with-blurhash",{style:"object-fit: "+e.fit,attrs:{hash:e.file.blurhash,src:e.file.thumbnailUrl,alt:e.file.name,title:e.file.name}}):"image"===e.is?a("fa",{staticClass:"icon",attrs:{icon:e.faFileImage}}):"video"===e.is?a("fa",{staticClass:"icon",attrs:{icon:e.faFileVideo}}):"audio"===e.is||"midi"===e.is?a("fa",{staticClass:"icon",attrs:{icon:e.faMusic}}):"csv"===e.is?a("fa",{staticClass:"icon",attrs:{icon:e.faFileCsv}}):"pdf"===e.is?a("fa",{staticClass:"icon",attrs:{icon:e.faFilePdf}}):"textfile"===e.is?a("fa",{staticClass:"icon",attrs:{icon:e.faFileAlt}}):"archive"===e.is?a("fa",{staticClass:"icon",attrs:{icon:e.faFileArchive}}):a("fa",{staticClass:"icon",attrs:{icon:e.faFile}}),e.isThumbnailAvailable&&"video"===e.is?a("fa",{staticClass:"icon-sub",attrs:{icon:e.faFilm}}):e._e()],1)}),[],!1,null,"7108a140",null).exports},46733:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>b});var i=a(20144),o=a(67384),r=a(24550);const n=i.default.extend({i18n:(0,o.Z)(),props:["folder"],data:()=>({hover:!1,draghover:!1}),computed:{browser(){return this.$parent}},methods:{onClick(){this.browser.move(this.folder)},onMouseover(){this.hover=!0},onMouseout(){this.hover=!1},onDragover(e){null==this.folder&&null==this.browser.folder&&(e.dataTransfer.dropEffect="none");const t="file"==e.dataTransfer.items[0].kind,a="mk_drive_file"==e.dataTransfer.types[0],i="mk_drive_folder"==e.dataTransfer.types[0];return e.dataTransfer.dropEffect=t||a||i?"all"==e.dataTransfer.effectAllowed?"copy":"move":"none",!1},onDragenter(){(this.folder||this.browser.folder)&&(this.draghover=!0)},onDragleave(){(this.folder||this.browser.folder)&&(this.draghover=!1)},onDrop(e){if(this.draghover=!1,e.dataTransfer.files.length>0){for(const t of Array.from(e.dataTransfer.files))this.browser.upload(t,this.folder);return}const t=e.dataTransfer.getData("mk_drive_file");if(null!=t&&""!=t){const e=JSON.parse(t);this.browser.removeFile(e.id),this.$root.api("drive/files/update",{fileId:e.id,folderId:this.folder?this.folder.id:null})}const a=e.dataTransfer.getData("mk_drive_folder");if(null!=a&&""!=a){const e=JSON.parse(a);if(this.folder&&e.id==this.folder.id)return;this.browser.removeFolder(e.id),this.$root.api("drive/folders/update",{folderId:e.id,parentId:this.folder?this.folder.id:null})}}}});a(80079);var d=a(51900);const s=(0,d.Z)(n,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"root nav-folder",attrs:{"data-draghover":e.draghover},on:{click:e.onClick,dragover:function(t){return t.preventDefault(),t.stopPropagation(),e.onDragover.apply(null,arguments)},dragenter:e.onDragenter,dragleave:e.onDragleave,drop:function(t){return t.stopPropagation(),e.onDrop.apply(null,arguments)}}},[null==e.folder?a("i",{staticClass:"cloud"},[a("fa",{attrs:{icon:"cloud"}})],1):e._e(),a("span",[e._v(e._s(null==e.folder?e.$t("@.drive"):e.folder.name))])])}),[],!1,null,"bc9dcd2c",null).exports;const l=i.default.extend({i18n:(0,o.Z)("desktop/views/components/drive.folder.vue"),props:["folder"],data:()=>({hover:!1,draghover:!1,isDragging:!1,isContextmenuShowing:!1}),computed:{browser(){return this.$parent},title(){return this.folder.name}},methods:{onClick(){this.browser.move(this.folder)},onContextmenu(e){this.isContextmenuShowing=!0,this.$contextmenu(e,[{type:"item",text:this.$t("contextmenu.move-to-this-folder"),icon:"arrow-right",action:this.go},{type:"item",text:this.$t("contextmenu.show-in-new-window"),icon:["far","window-restore"],action:this.newWindow},null,{type:"item",text:this.$t("contextmenu.rename"),icon:"i-cursor",action:this.rename},null,{type:"item",text:this.$t("@.delete"),icon:["far","trash-alt"],action:this.deleteFolder},null,{type:"nest",text:this.$t("contextmenu.else-folders"),menu:[{type:"item",text:this.$t("contextmenu.set-as-upload-folder"),action:this.setAsUploadFolder}]}],{closed:()=>{this.isContextmenuShowing=!1}})},onMouseover(){this.hover=!0},onMouseout(){this.hover=!1},onDragover(e){if(this.isDragging)return void(e.dataTransfer.dropEffect="none");const t="file"==e.dataTransfer.items[0].kind,a="mk_drive_file"==e.dataTransfer.types[0],i="mk_drive_folder"==e.dataTransfer.types[0];e.dataTransfer.dropEffect=t||a||i?"all"==e.dataTransfer.effectAllowed?"copy":"move":"none"},onDragenter(){this.isDragging||(this.draghover=!0)},onDragleave(){this.draghover=!1},onDrop(e){if(this.draghover=!1,e.dataTransfer.files.length>0){for(const t of Array.from(e.dataTransfer.files))this.browser.upload(t,this.folder);return}const t=e.dataTransfer.getData("mk_drive_file");if(null!=t&&""!=t){const e=JSON.parse(t);this.browser.removeFile(e.id),this.$root.api("drive/files/update",{fileId:e.id,folderId:this.folder.id})}const a=e.dataTransfer.getData("mk_drive_folder");if(null!=a&&""!=a){const e=JSON.parse(a);if(e.id==this.folder.id)return;this.browser.removeFolder(e.id),this.$root.api("drive/folders/update",{folderId:e.id,parentId:this.folder.id}).then((()=>{})).catch((e=>{switch(e){case"detected-circular-definition":this.$root.dialog({title:this.$t("unable-to-process"),text:this.$t("circular-reference-detected")});break;default:this.$root.dialog({type:"error",text:this.$t("unhandled-error")})}}))}},onDragstart(e){e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("mk_drive_folder",JSON.stringify(this.folder)),this.isDragging=!0,this.browser.isDragSource=!0},onDragend(){this.isDragging=!1,this.browser.isDragSource=!1},go(){this.browser.move(this.folder.id)},newWindow(){this.browser.newWindow(this.folder)},rename(){this.$root.dialog({title:this.$t("contextmenu.rename-folder"),input:{placeholder:this.$t("contextmenu.input-new-folder-name"),default:this.folder.name}}).then((({canceled:e,result:t})=>{e||this.$root.api("drive/folders/update",{folderId:this.folder.id,name:t})}))},deleteFolder(){this.$root.api("drive/folders/delete",{folderId:this.folder.id}).then((()=>{this.$store.state.settings.uploadFolder===this.folder.id&&this.$store.dispatch("settings/set",{key:"uploadFolder",value:null})})).catch((e=>{switch(e.id){case"b0fc8a17-963c-405d-bfbc-859a487295e1":this.$root.dialog({type:"error",title:this.$t("unable-to-delete"),text:this.$t("has-child-files-or-folders")});break;default:this.$root.dialog({type:"error",text:this.$t("unable-to-delete")})}}))},setAsUploadFolder(){this.$store.dispatch("settings/set",{key:"uploadFolder",value:this.folder.id})}}});a(43107);const A=(0,d.Z)(l,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ynntpczxvnusfwdyxsfuhvcmuypqopdd",attrs:{"data-is-contextmenu-showing":e.isContextmenuShowing,"data-draghover":e.draghover,draggable:"true",title:e.title},on:{click:e.onClick,mouseover:e.onMouseover,mouseout:e.onMouseout,dragover:function(t){return t.preventDefault(),t.stopPropagation(),e.onDragover.apply(null,arguments)},dragenter:function(t){return t.preventDefault(),e.onDragenter.apply(null,arguments)},dragleave:e.onDragleave,drop:function(t){return t.preventDefault(),t.stopPropagation(),e.onDrop.apply(null,arguments)},dragstart:e.onDragstart,dragend:e.onDragend,contextmenu:function(t){return t.preventDefault(),t.stopPropagation(),e.onContextmenu.apply(null,arguments)}}},[a("p",{staticClass:"name"},[e.hover?[a("fa",{attrs:{icon:["far","folder-open"],"fixed-width":""}})]:e._e(),e.hover?e._e():[a("fa",{attrs:{icon:["far","folder"],"fixed-width":""}})],e._v("\n\t\t"+e._s(e.folder.name)+"\n\t")],2),e.$store.state.settings.uploadFolder==e.folder.id?a("p",{staticClass:"upload"},[e._v("\n\t\t"+e._s(e.$t("upload-folder"))+"\n\t")]):e._e()])}),[],!1,null,"009c4c3a",null).exports;var f=a(88866),v=a(76342),c=a(64536),p=a(99017);const u=i.default.extend({i18n:(0,o.Z)("desktop/views/components/drive.file.vue"),props:["file"],components:{XFileThumbnail:p.Z},data:()=>({isContextmenuShowing:!1,isDragging:!1}),computed:{browser(){return this.$parent},isSelected(){return this.browser.selectedFiles.some((e=>e.id==this.file.id))},title(){return`${this.file.name}\n${this.file.type} ${i.default.filter("bytes")(this.file.size)}`}},methods:{onClick(){this.browser.chooseFile(this.file)},onContextmenu(e){this.isContextmenuShowing=!0,this.$contextmenu(e,[{type:"item",text:this.$t("contextmenu.rename"),icon:"i-cursor",action:this.rename},{type:"item",text:this.file.isSensitive?this.$t("contextmenu.unmark-as-sensitive"):this.$t("contextmenu.mark-as-sensitive"),icon:this.file.isSensitive?["far","eye"]:["far","eye-slash"],action:this.toggleSensitive},null,{type:"item",text:this.$t("contextmenu.copy-url"),icon:"link",action:this.copyUrl},{type:"link",href:this.file.url,target:"_blank",text:this.$t("contextmenu.download"),icon:"download",download:this.file.name},null,{type:"item",text:this.$t("@.delete"),icon:["far","trash-alt"],action:this.deleteFile},null,{type:"nest",text:this.$t("contextmenu.else-files"),menu:[{type:"item",text:this.$t("contextmenu.set-as-avatar"),action:this.setAsAvatar},{type:"item",text:this.$t("contextmenu.set-as-banner"),action:this.setAsBanner}]}],{closed:()=>{this.isContextmenuShowing=!1}})},onDragstart(e){e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("mk_drive_file",JSON.stringify(this.file)),this.isDragging=!0,this.browser.isDragSource=!0},onDragend(e){this.isDragging=!1,this.browser.isDragSource=!1},rename(){this.$root.dialog({title:this.$t("contextmenu.rename-file"),input:{placeholder:this.$t("contextmenu.input-new-file-name"),default:this.file.name,allowEmpty:!1}}).then((({canceled:e,result:t})=>{e||this.$root.api("drive/files/update",{fileId:this.file.id,name:t})}))},toggleSensitive(){this.$root.api("drive/files/update",{fileId:this.file.id,isSensitive:!this.file.isSensitive})},copyUrl(){(0,f.Z)(this.file.url),this.$root.dialog({title:this.$t("contextmenu.copied"),text:this.$t("contextmenu.copied-url-to-clipboard")})},setAsAvatar(){(0,v.Z)(this.$root)(this.file)},setAsBanner(){(0,c.Z)(this.$root)(this.file)},addApp(){alert("not implemented yet")},deleteFile(){this.$root.api("drive/files/delete",{fileId:this.file.id})}}});a(30531);const h=(0,d.Z)(u,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"gvfdktuvdgwhmztnuekzkswkjygptfcv",attrs:{"data-is-selected":e.isSelected,"data-is-contextmenu-showing":e.isContextmenuShowing,draggable:"true",title:e.title},on:{click:e.onClick,dragstart:e.onDragstart,dragend:e.onDragend,contextmenu:function(t){return t.preventDefault(),t.stopPropagation(),e.onContextmenu.apply(null,arguments)}}},[e.$store.state.i.avatarId==e.file.id?a("div",{staticClass:"label"},[a("img",{attrs:{src:"/assets/label.svg"}}),a("p",[e._v(e._s(e.$t("avatar")))])]):e._e(),e.$store.state.i.bannerId==e.file.id?a("div",{staticClass:"label"},[a("img",{attrs:{src:"/assets/label.svg"}}),a("p",[e._v(e._s(e.$t("banner")))])]):e._e(),e.file.isSensitive?a("div",{staticClass:"label red"},[a("img",{attrs:{src:"/assets/label-red.svg"}}),a("p",[e._v(e._s(e.$t("nsfw")))])]):e._e(),a("x-file-thumbnail",{staticClass:"thumbnail",attrs:{file:e.file,fit:"contain"}}),a("p",{staticClass:"name"},[a("span",[e._v(e._s(-1!=e.file.name.lastIndexOf(".")?e.file.name.substr(0,e.file.name.lastIndexOf(".")):e.file.name))]),-1!=e.file.name.lastIndexOf(".")?a("span",{staticClass:"ext"},[e._v(e._s(e.file.name.substr(e.file.name.lastIndexOf("."))))]):e._e()])],1)}),[],!1,null,"be458310",null).exports;var m=a(82852),g=a(33671),C=a(51436);const k=i.default.extend({i18n:(0,o.Z)("desktop/views/components/drive.vue"),components:{XNavFolder:s,XFolder:A,XFile:h},props:{initFolder:{type:Object,required:!1},type:{type:String,required:!1,default:void 0},multiple:{type:Boolean,default:!1}},data:()=>({folder:null,files:[],folders:[],moreFiles:!1,moreFolders:!1,hierarchyFolders:[],selectedFiles:[],uploadings:[],connection:null,draghover:!1,isDragSource:!1,fetching:!0}),mounted(){this.connection=this.$root.stream.useSharedConnection("drive"),this.connection.on("fileCreated",this.onStreamDriveFileCreated),this.connection.on("fileUpdated",this.onStreamDriveFileUpdated),this.connection.on("fileDeleted",this.onStreamDriveFileDeleted),this.connection.on("folderCreated",this.onStreamDriveFolderCreated),this.connection.on("folderUpdated",this.onStreamDriveFolderUpdated),this.connection.on("folderDeleted",this.onStreamDriveFolderDeleted),this.initFolder?this.move(this.initFolder):this.fetch()},beforeDestroy(){this.connection.dispose()},methods:{onContextmenu(e){this.$contextmenu(e,[{type:"item",text:this.$t("contextmenu.create-folder"),icon:["far","folder"],action:this.createFolder},{type:"item",text:this.$t("contextmenu.upload"),icon:"upload",action:this.selectLocalFile},{type:"item",text:this.$t("contextmenu.url-upload"),icon:C.r6c,action:this.urlUpload}])},onStreamDriveFileCreated(e){this.addFile(e,!0)},onStreamDriveFileUpdated(e){(this.folder?this.folder.id:null)!=e.folderId?this.removeFile(e):this.addFile(e,!0)},onStreamDriveFileDeleted(e){this.removeFile(e)},onStreamDriveFolderCreated(e){this.addFolder(e,!0)},onStreamDriveFolderUpdated(e){(this.folder?this.folder.id:null)!=e.parentId?this.removeFolder(e):this.addFolder(e,!0)},onStreamDriveFolderDeleted(e){this.removeFolder(e)},onChangeUploaderUploads(e){this.uploadings=e},onUploaderUploaded(e){this.addFile(e,!0)},onMousedown(e){if((0,m.Z)(this.$refs.foldersContainer,e.target)||(0,m.Z)(this.$refs.filesContainer,e.target))return!0;const t=this.$refs.main,a=this.$refs.selection,i=t.getBoundingClientRect(),o=e.pageX+t.scrollLeft-i.left-window.pageXOffset,r=e.pageY+t.scrollTop-i.top-window.pageYOffset,n=e=>{a.style.display="block";const n=e.pageX+t.scrollLeft-i.left-window.pageXOffset,d=e.pageY+t.scrollTop-i.top-window.pageYOffset,s=n-o,l=d-r;s>0?(a.style.width=s+"px",a.style.left=o+"px"):(a.style.width=-s+"px",a.style.left=n+"px"),l>0?(a.style.height=l+"px",a.style.top=r+"px"):(a.style.height=-l+"px",a.style.top=d+"px")},d=e=>{document.documentElement.removeEventListener("mousemove",n),document.documentElement.removeEventListener("mouseup",d),a.style.display="none"};document.documentElement.addEventListener("mousemove",n),document.documentElement.addEventListener("mouseup",d)},onDragover(e){if(this.isDragSource)return void(e.dataTransfer.dropEffect="none");const t="file"==e.dataTransfer.items[0].kind,a="mk_drive_file"==e.dataTransfer.types[0],i="mk_drive_folder"==e.dataTransfer.types[0];return e.dataTransfer.dropEffect=t||a||i?"all"==e.dataTransfer.effectAllowed?"copy":"move":"none",!1},onDragenter(e){this.isDragSource||(this.draghover=!0)},onDragleave(e){this.draghover=!1},onDrop(e){if(this.draghover=!1,e.dataTransfer.files.length>0){for(const t of Array.from(e.dataTransfer.files))this.upload(t,this.folder);return}const t=e.dataTransfer.getData("mk_drive_file");if(null!=t&&""!=t){const e=JSON.parse(t);if(this.files.some((t=>t.id==e.id)))return;this.removeFile(e.id),this.$root.api("drive/files/update",{fileId:e.id,folderId:this.folder?this.folder.id:null})}const a=e.dataTransfer.getData("mk_drive_folder");if(null!=a&&""!=a){const e=JSON.parse(a);if(this.folder&&e.id==this.folder.id)return!1;if(this.folders.some((t=>t.id==e.id)))return!1;this.removeFolder(e.id),this.$root.api("drive/folders/update",{folderId:e.id,parentId:this.folder?this.folder.id:null}).then((()=>{})).catch((e=>{switch(e){case"detected-circular-definition":this.$root.dialog({title:this.$t("unable-to-process"),text:this.$t("circular-reference-detected")});break;default:this.$root.dialog({type:"error",text:this.$t("unhandled-error")})}}))}},selectLocalFile(){this.$refs.fileInput.click()},urlUpload(){this.$root.dialog({title:this.$t("url-upload"),input:{placeholder:this.$t("url-of-file")}}).then((({canceled:e,result:t})=>{e||(this.$root.api("drive/files/upload_from_url",{url:t,folderId:this.folder?this.folder.id:void 0}),this.$root.dialog({title:this.$t("url-upload-requested"),text:this.$t("may-take-time")}))}))},createFolder(){this.$root.dialog({title:this.$t("create-folder"),input:{placeholder:this.$t("folder-name")}}).then((({canceled:e,result:t})=>{e||this.$root.api("drive/folders/create",{name:t,parentId:this.folder?this.folder.id:void 0}).then((e=>{this.addFolder(e,!0)}))}))},onChangeFileInput(){for(const e of Array.from(this.$refs.fileInput.files))this.upload(e,this.folder)},upload(e,t){t&&"object"==typeof t&&(t=t.id),this.$refs.uploader.upload(e,t)},chooseFile(e){const t=this.selectedFiles.some((t=>t.id==e.id));this.multiple?(t?this.selectedFiles=this.selectedFiles.filter((t=>t.id!=e.id)):this.selectedFiles.push(e),this.$emit("change-selection",this.selectedFiles)):t?this.$emit("selected",e):(this.selectedFiles=[e],this.$emit("change-selection",[e]))},newWindow(e){document.body.clientWidth>800?this.$root.new(r.Z,{folder:e}):window.open(`${g.HQ}/i/drive/folder/${e.id}`,"drive_window","height=500, width=800")},move(e){null!=e?("object"==typeof e&&(e=e.id),this.fetching=!0,this.$root.api("drive/folders/show",{folderId:e}).then((e=>{this.folder=e,this.hierarchyFolders=[];const t=e=>{this.hierarchyFolders.unshift(e),e.parent&&t(e.parent)};e.parent&&t(e.parent),this.$emit("open-folder",e),this.fetch()}))):this.goRoot()},addFolder(e,t=!1){if((this.folder?this.folder.id:null)==e.parentId)if(this.folders.some((t=>t.id==e.id))){const t=this.folders.map((e=>e.id)).indexOf(e.id);i.default.set(this.folders,t,e)}else t?this.folders.unshift(e):this.folders.push(e)},addFile(e,t=!1){if((this.folder?this.folder.id:null)==e.folderId)if(this.files.some((t=>t.id==e.id))){const t=this.files.map((e=>e.id)).indexOf(e.id);i.default.set(this.files,t,e)}else t?this.files.unshift(e):this.files.push(e)},removeFolder(e){"object"==typeof e&&(e=e.id),this.folders=this.folders.filter((t=>t.id!=e))},removeFile(e){"object"==typeof e&&(e=e.id),this.files=this.files.filter((t=>t.id!=e))},appendFile(e){this.addFile(e)},appendFolder(e){this.addFolder(e)},prependFile(e){this.addFile(e,!0)},prependFolder(e){this.addFolder(e,!0)},goRoot(){null!=this.folder&&(this.folder=null,this.hierarchyFolders=[],this.$emit("move-root"),this.fetch())},fetch(){this.folders=[],this.files=[],this.moreFolders=!1,this.moreFiles=!1,this.fetching=!0;let e=null,t=null;this.$root.api("drive/folders",{folderId:this.folder?this.folder.id:null,limit:31}).then((t=>{31==t.length&&(this.moreFolders=!0,t.pop()),e=t,i()})),this.$root.api("drive/files",{folderId:this.folder?this.folder.id:null,type:this.type,limit:31}).then((e=>{31==e.length&&(this.moreFiles=!0,e.pop()),t=e,i()}));let a=!1;const i=()=>{if(a){for(const t of e)this.appendFolder(t);for(const e of t)this.appendFile(e);this.fetching=!1}else a=!0}},fetchMoreFiles(){this.fetching=!0;this.$root.api("drive/files",{folderId:this.folder?this.folder.id:null,type:this.type,untilId:this.files[this.files.length-1].id,limit:31}).then((e=>{31==e.length?(this.moreFiles=!0,e.pop()):this.moreFiles=!1;for(const t of e)this.appendFile(t);this.fetching=!1}))}}});a(35444);const b=(0,d.Z)(k,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"mk-drive"},[a("nav",[a("div",{staticClass:"path",on:{contextmenu:function(e){return e.preventDefault(),e.stopPropagation(),function(){}.apply(null,arguments)}}},[a("x-nav-folder",{class:{current:null==e.folder}}),e._l(e.hierarchyFolders,(function(e){return[a("span",{staticClass:"separator"},[a("fa",{attrs:{icon:"angle-right"}})],1),a("x-nav-folder",{key:e.id,attrs:{folder:e}})]})),null!=e.folder?a("span",{staticClass:"separator"},[a("fa",{attrs:{icon:"angle-right"}})],1):e._e(),null!=e.folder?a("span",{staticClass:"folder current"},[e._v(e._s(e.folder.name))]):e._e()],2)]),a("div",{ref:"main",staticClass:"main",class:{uploading:e.uploadings.length>0,fetching:e.fetching},on:{mousedown:e.onMousedown,dragover:function(t){return t.preventDefault(),t.stopPropagation(),e.onDragover.apply(null,arguments)},dragenter:e.onDragenter,dragleave:e.onDragleave,drop:function(t){return t.preventDefault(),t.stopPropagation(),e.onDrop.apply(null,arguments)},contextmenu:function(t){return t.preventDefault(),t.stopPropagation(),e.onContextmenu.apply(null,arguments)}}},[a("div",{ref:"selection",staticClass:"selection"}),a("div",{ref:"contents",staticClass:"contents"},[e.folders.length>0||e.moreFolders?a("div",{ref:"foldersContainer",staticClass:"folders"},[e._l(e.folders,(function(e){return a("x-folder",{key:e.id,staticClass:"folder",attrs:{folder:e}})})),e._l(16,(function(e){return a("div",{staticClass:"padding"})})),e.moreFolders?a("ui-button",[e._v(e._s(e.$t("@.load-more")))]):e._e()],2):e._e(),e.files.length>0||e.moreFiles?a("div",{ref:"filesContainer",staticClass:"files"},[e._l(e.files,(function(e){return a("x-file",{key:e.id,staticClass:"file",attrs:{file:e}})})),e._l(16,(function(e){return a("div",{staticClass:"padding"})})),e.moreFiles?a("ui-button",{on:{click:e.fetchMoreFiles}},[e._v(e._s(e.$t("@.load-more")))]):e._e()],2):e._e(),0!=e.files.length||e.moreFiles||0!=e.folders.length||e.moreFolders||e.fetching?e._e():a("div",{staticClass:"empty"},[e.draghover?a("p",[e._v(e._s(e.$t("empty-draghover")))]):e._e(),e.draghover||null!=e.folder?e._e():a("p",[a("strong",[e._v(e._s(e.$t("empty-drive")))]),a("br"),e._v(e._s(e.$t("empty-drive-description")))]),e.draghover||null==e.folder?e._e():a("p",[e._v(e._s(e.$t("empty-folder")))])])]),e.fetching?a("div",{staticClass:"fetching"},[e._m(0)]):e._e()]),e.draghover?a("div",{staticClass:"dropzone"}):e._e(),a("mk-uploader",{ref:"uploader",on:{change:e.onChangeUploaderUploads,uploaded:e.onUploaderUploaded}}),a("input",{ref:"fileInput",attrs:{type:"file",accept:"*/*",multiple:"multiple",tabindex:"-1"},on:{change:e.onChangeFileInput}})],1)}),[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"spinner"},[t("div",{staticClass:"dot1"}),t("div",{staticClass:"dot2"})])}],!1,null,"fae14316",null).exports},18266:(e,t,a)=>{var i=a(18927);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[e.id,i,""]]),i.locals&&(e.exports=i.locals);(0,a(45346).Z)("5d8d0ca0",i,!0,{})},30531:(e,t,a)=>{var i=a(25640);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[e.id,i,""]]),i.locals&&(e.exports=i.locals);(0,a(45346).Z)("23263235",i,!0,{})},43107:(e,t,a)=>{var i=a(52074);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[e.id,i,""]]),i.locals&&(e.exports=i.locals);(0,a(45346).Z)("6192e6de",i,!0,{})},80079:(e,t,a)=>{var i=a(45475);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[e.id,i,""]]),i.locals&&(e.exports=i.locals);(0,a(45346).Z)("39011296",i,!0,{})},35444:(e,t,a)=>{var i=a(85974);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[e.id,i,""]]),i.locals&&(e.exports=i.locals);(0,a(45346).Z)("357db48c",i,!0,{})}}]);
//# sourceMappingURL=6733.11.37.1-amfe.js.map