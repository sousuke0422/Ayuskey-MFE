{"version":3,"sources":["webpack://ayuskey-mfe/./node_modules/autosize/dist/autosize.js","webpack://ayuskey-mfe/./src/client/app/common/views/components/messaging-room.form.vue?69cf","webpack://ayuskey-mfe/./src/client/app/common/views/components/messaging-room.message.vue?66a3","webpack://ayuskey-mfe/./src/client/app/common/views/components/messaging-room.vue?acfe","webpack://ayuskey-mfe/./src/client/app/common/views/components/messaging-room.vue?f819","webpack://ayuskey-mfe/./src/client/app/common/views/components/messaging-room.message.vue?2339","webpack://ayuskey-mfe/./src/client/app/common/views/components/messaging-room.message.vue?0f04","webpack://ayuskey-mfe/./src/client/app/common/views/components/messaging-room.message.vue","webpack://ayuskey-mfe/./src/client/app/common/views/components/messaging-room.message.vue?3c4c","webpack://ayuskey-mfe/./src/client/app/common/views/components/messaging-room.form.vue?c1dd","webpack://ayuskey-mfe/./src/client/app/common/views/components/messaging-room.form.vue?fcf5","webpack://ayuskey-mfe/./src/client/app/common/views/components/messaging-room.form.vue?1b3a","webpack://ayuskey-mfe/./src/client/app/common/views/components/messaging-room.form.vue","webpack://ayuskey-mfe/./src/client/app/common/views/components/messaging-room.vue?fd6a","webpack://ayuskey-mfe/./src/client/app/common/views/components/messaging-room.vue?7529","webpack://ayuskey-mfe/./src/client/app/common/views/components/messaging-room.vue","webpack://ayuskey-mfe/./src/client/app/common/views/components/messaging-room.form.vue?7605","webpack://ayuskey-mfe/./src/client/app/common/views/components/messaging-room.message.vue?eb6b","webpack://ayuskey-mfe/./src/client/app/common/views/components/messaging-room.vue?ecc3"],"names":["module","exports","keys","values","map","Map","has","key","indexOf","get","set","value","push","delete","index","splice","createEvent","name","Event","bubbles","e","evt","document","initEvent","assign","ta","nodeName","heightOffset","clientWidth","cachedHeight","pageResize","update","destroy","style","window","removeEventListener","Object","forEach","bind","height","resize","overflowY","overflowX","wordWrap","addEventListener","init","getComputedStyle","boxSizing","parseFloat","paddingTop","paddingBottom","borderTopWidth","borderBottomWidth","isNaN","changeOverflow","width","offsetWidth","getParentOverflows","el","arr","parentNode","Element","scrollTop","node","scrollHeight","overflows","docTop","documentElement","styleHeight","Math","round","computed","actualHeight","offsetHeight","dispatchEvent","err","methods","autosize","options","Array","prototype","call","length","x","default","___CSS_LOADER_API_SOURCEMAP_IMPORT___","___CSS_LOADER_EXPORT___","___CSS_LOADER_API_IMPORT___","id","i18n","props","message","required","isGroup","this","userId","$store","state","i","text","ast","parse","filter","t","type","url","silent","$root","api","messageId","_vm","_h","$createElement","_c","_self","staticClass","attrs","isMe","user","$t","on","del","_e","isDeleted","_v","_s","ref","file","split","_l","reads","isRead","createdAt","requird","group","data","sending","$parent","watch","saveDraft","room","isBottom","scrollToBottom","$refs","textarea","draft","JSON","localStorage","getItem","draftId","items","clipboardData","kind","getAsFile","lio","lastIndexOf","ext","slice","formatted","Date","lastModified","settings","pastedFileName","replace","pasteDialog","dialog","title","input","allowEmpty","then","canceled","result","upload","isFile","dataTransfer","isDriveFile","types","preventDefault","dropEffect","effectAllowed","files","driveFile","getData","which","ctrlKey","metaKey","canSend","send","click","$chooseDriveFile","multiple","uploader","uploadFolder","undefined","groupId","fileId","clear","catch","console","error","deleteDraft","updatedAt","setItem","stringify","$event","stopPropagation","onDragover","onDrop","directives","rawName","expression","model","domProps","onKeypress","onPaste","target","composing","onUploaded","chooseFile","chooseFileFromDrive","onChangeFile","components","XMessage","XForm","isNaked","Boolean","fetchingMoreMessages","messages","existMoreMessages","connection","showIndicator","timer","faArrowCircleDown","date","getDate","month","getMonth","_date","_datetext","toString","form","stream","connectToChannel","otherparty","onMessage","onRead","onDeleted","onScroll","passive","$el","onVisibilitychange","fetchMessages","dispose","Promise","resolve","reject","max","limit","untilId","pop","unshift","apply","reverse","device","enableSounds","sound","Audio","volume","soundVolume","play","hidden","$nextTick","notifyNewMessage","isArray","some","exist","ids","msg","find","m","scrollY","innerHeight","body","scroll","clearTimeout","setTimeout","clientHeight","faFlag","class","fetching","fetchMoreMessages","_messages","onIndicatorClick","content","locals","add"],"mappings":"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","file":"3351.11.37.1-amfe.js","sourcesContent":["/*!\n\tautosize 4.0.2\n\tlicense: MIT\n\thttp://www.jacklmoore.com/autosize\n*/\n(function (global, factory) {\n\tif (typeof define === \"function\" && define.amd) {\n\t\tdefine(['module', 'exports'], factory);\n\t} else if (typeof exports !== \"undefined\") {\n\t\tfactory(module, exports);\n\t} else {\n\t\tvar mod = {\n\t\t\texports: {}\n\t\t};\n\t\tfactory(mod, mod.exports);\n\t\tglobal.autosize = mod.exports;\n\t}\n})(this, function (module, exports) {\n\t'use strict';\n\n\tvar map = typeof Map === \"function\" ? new Map() : function () {\n\t\tvar keys = [];\n\t\tvar values = [];\n\n\t\treturn {\n\t\t\thas: function has(key) {\n\t\t\t\treturn keys.indexOf(key) > -1;\n\t\t\t},\n\t\t\tget: function get(key) {\n\t\t\t\treturn values[keys.indexOf(key)];\n\t\t\t},\n\t\t\tset: function set(key, value) {\n\t\t\t\tif (keys.indexOf(key) === -1) {\n\t\t\t\t\tkeys.push(key);\n\t\t\t\t\tvalues.push(value);\n\t\t\t\t}\n\t\t\t},\n\t\t\tdelete: function _delete(key) {\n\t\t\t\tvar index = keys.indexOf(key);\n\t\t\t\tif (index > -1) {\n\t\t\t\t\tkeys.splice(index, 1);\n\t\t\t\t\tvalues.splice(index, 1);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t}();\n\n\tvar createEvent = function createEvent(name) {\n\t\treturn new Event(name, { bubbles: true });\n\t};\n\ttry {\n\t\tnew Event('test');\n\t} catch (e) {\n\t\t// IE does not support `new Event()`\n\t\tcreateEvent = function createEvent(name) {\n\t\t\tvar evt = document.createEvent('Event');\n\t\t\tevt.initEvent(name, true, false);\n\t\t\treturn evt;\n\t\t};\n\t}\n\n\tfunction assign(ta) {\n\t\tif (!ta || !ta.nodeName || ta.nodeName !== 'TEXTAREA' || map.has(ta)) return;\n\n\t\tvar heightOffset = null;\n\t\tvar clientWidth = null;\n\t\tvar cachedHeight = null;\n\n\t\tfunction init() {\n\t\t\tvar style = window.getComputedStyle(ta, null);\n\n\t\t\tif (style.resize === 'vertical') {\n\t\t\t\tta.style.resize = 'none';\n\t\t\t} else if (style.resize === 'both') {\n\t\t\t\tta.style.resize = 'horizontal';\n\t\t\t}\n\n\t\t\tif (style.boxSizing === 'content-box') {\n\t\t\t\theightOffset = -(parseFloat(style.paddingTop) + parseFloat(style.paddingBottom));\n\t\t\t} else {\n\t\t\t\theightOffset = parseFloat(style.borderTopWidth) + parseFloat(style.borderBottomWidth);\n\t\t\t}\n\t\t\t// Fix when a textarea is not on document body and heightOffset is Not a Number\n\t\t\tif (isNaN(heightOffset)) {\n\t\t\t\theightOffset = 0;\n\t\t\t}\n\n\t\t\tupdate();\n\t\t}\n\n\t\tfunction changeOverflow(value) {\n\t\t\t{\n\t\t\t\t// Chrome/Safari-specific fix:\n\t\t\t\t// When the textarea y-overflow is hidden, Chrome/Safari do not reflow the text to account for the space\n\t\t\t\t// made available by removing the scrollbar. The following forces the necessary text reflow.\n\t\t\t\tvar width = ta.style.width;\n\t\t\t\tta.style.width = '0px';\n\t\t\t\t// Force reflow:\n\t\t\t\t/* jshint ignore:start */\n\t\t\t\tta.offsetWidth;\n\t\t\t\t/* jshint ignore:end */\n\t\t\t\tta.style.width = width;\n\t\t\t}\n\n\t\t\tta.style.overflowY = value;\n\t\t}\n\n\t\tfunction getParentOverflows(el) {\n\t\t\tvar arr = [];\n\n\t\t\twhile (el && el.parentNode && el.parentNode instanceof Element) {\n\t\t\t\tif (el.parentNode.scrollTop) {\n\t\t\t\t\tarr.push({\n\t\t\t\t\t\tnode: el.parentNode,\n\t\t\t\t\t\tscrollTop: el.parentNode.scrollTop\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tel = el.parentNode;\n\t\t\t}\n\n\t\t\treturn arr;\n\t\t}\n\n\t\tfunction resize() {\n\t\t\tif (ta.scrollHeight === 0) {\n\t\t\t\t// If the scrollHeight is 0, then the element probably has display:none or is detached from the DOM.\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar overflows = getParentOverflows(ta);\n\t\t\tvar docTop = document.documentElement && document.documentElement.scrollTop; // Needed for Mobile IE (ticket #240)\n\n\t\t\tta.style.height = '';\n\t\t\tta.style.height = ta.scrollHeight + heightOffset + 'px';\n\n\t\t\t// used to check if an update is actually necessary on window.resize\n\t\t\tclientWidth = ta.clientWidth;\n\n\t\t\t// prevents scroll-position jumping\n\t\t\toverflows.forEach(function (el) {\n\t\t\t\tel.node.scrollTop = el.scrollTop;\n\t\t\t});\n\n\t\t\tif (docTop) {\n\t\t\t\tdocument.documentElement.scrollTop = docTop;\n\t\t\t}\n\t\t}\n\n\t\tfunction update() {\n\t\t\tresize();\n\n\t\t\tvar styleHeight = Math.round(parseFloat(ta.style.height));\n\t\t\tvar computed = window.getComputedStyle(ta, null);\n\n\t\t\t// Using offsetHeight as a replacement for computed.height in IE, because IE does not account use of border-box\n\t\t\tvar actualHeight = computed.boxSizing === 'content-box' ? Math.round(parseFloat(computed.height)) : ta.offsetHeight;\n\n\t\t\t// The actual height not matching the style height (set via the resize method) indicates that \n\t\t\t// the max-height has been exceeded, in which case the overflow should be allowed.\n\t\t\tif (actualHeight < styleHeight) {\n\t\t\t\tif (computed.overflowY === 'hidden') {\n\t\t\t\t\tchangeOverflow('scroll');\n\t\t\t\t\tresize();\n\t\t\t\t\tactualHeight = computed.boxSizing === 'content-box' ? Math.round(parseFloat(window.getComputedStyle(ta, null).height)) : ta.offsetHeight;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Normally keep overflow set to hidden, to avoid flash of scrollbar as the textarea expands.\n\t\t\t\tif (computed.overflowY !== 'hidden') {\n\t\t\t\t\tchangeOverflow('hidden');\n\t\t\t\t\tresize();\n\t\t\t\t\tactualHeight = computed.boxSizing === 'content-box' ? Math.round(parseFloat(window.getComputedStyle(ta, null).height)) : ta.offsetHeight;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (cachedHeight !== actualHeight) {\n\t\t\t\tcachedHeight = actualHeight;\n\t\t\t\tvar evt = createEvent('autosize:resized');\n\t\t\t\ttry {\n\t\t\t\t\tta.dispatchEvent(evt);\n\t\t\t\t} catch (err) {\n\t\t\t\t\t// Firefox will throw an error on dispatchEvent for a detached element\n\t\t\t\t\t// https://bugzilla.mozilla.org/show_bug.cgi?id=889376\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tvar pageResize = function pageResize() {\n\t\t\tif (ta.clientWidth !== clientWidth) {\n\t\t\t\tupdate();\n\t\t\t}\n\t\t};\n\n\t\tvar destroy = function (style) {\n\t\t\twindow.removeEventListener('resize', pageResize, false);\n\t\t\tta.removeEventListener('input', update, false);\n\t\t\tta.removeEventListener('keyup', update, false);\n\t\t\tta.removeEventListener('autosize:destroy', destroy, false);\n\t\t\tta.removeEventListener('autosize:update', update, false);\n\n\t\t\tObject.keys(style).forEach(function (key) {\n\t\t\t\tta.style[key] = style[key];\n\t\t\t});\n\n\t\t\tmap.delete(ta);\n\t\t}.bind(ta, {\n\t\t\theight: ta.style.height,\n\t\t\tresize: ta.style.resize,\n\t\t\toverflowY: ta.style.overflowY,\n\t\t\toverflowX: ta.style.overflowX,\n\t\t\twordWrap: ta.style.wordWrap\n\t\t});\n\n\t\tta.addEventListener('autosize:destroy', destroy, false);\n\n\t\t// IE9 does not fire onpropertychange or oninput for deletions,\n\t\t// so binding to onkeyup to catch most of those events.\n\t\t// There is no way that I know of to detect something like 'cut' in IE9.\n\t\tif ('onpropertychange' in ta && 'oninput' in ta) {\n\t\t\tta.addEventListener('keyup', update, false);\n\t\t}\n\n\t\twindow.addEventListener('resize', pageResize, false);\n\t\tta.addEventListener('input', update, false);\n\t\tta.addEventListener('autosize:update', update, false);\n\t\tta.style.overflowX = 'hidden';\n\t\tta.style.wordWrap = 'break-word';\n\n\t\tmap.set(ta, {\n\t\t\tdestroy: destroy,\n\t\t\tupdate: update\n\t\t});\n\n\t\tinit();\n\t}\n\n\tfunction destroy(ta) {\n\t\tvar methods = map.get(ta);\n\t\tif (methods) {\n\t\t\tmethods.destroy();\n\t\t}\n\t}\n\n\tfunction update(ta) {\n\t\tvar methods = map.get(ta);\n\t\tif (methods) {\n\t\t\tmethods.update();\n\t\t}\n\t}\n\n\tvar autosize = null;\n\n\t// Do nothing in Node.js environment and IE8 (or lower)\n\tif (typeof window === 'undefined' || typeof window.getComputedStyle !== 'function') {\n\t\tautosize = function autosize(el) {\n\t\t\treturn el;\n\t\t};\n\t\tautosize.destroy = function (el) {\n\t\t\treturn el;\n\t\t};\n\t\tautosize.update = function (el) {\n\t\t\treturn el;\n\t\t};\n\t} else {\n\t\tautosize = function autosize(el, options) {\n\t\t\tif (el) {\n\t\t\t\tArray.prototype.forEach.call(el.length ? el : [el], function (x) {\n\t\t\t\t\treturn assign(x, options);\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn el;\n\t\t};\n\t\tautosize.destroy = function (el) {\n\t\t\tif (el) {\n\t\t\t\tArray.prototype.forEach.call(el.length ? el : [el], destroy);\n\t\t\t}\n\t\t\treturn el;\n\t\t};\n\t\tautosize.update = function (el) {\n\t\t\tif (el) {\n\t\t\t\tArray.prototype.forEach.call(el.length ? el : [el], update);\n\t\t\t}\n\t\t\treturn el;\n\t\t};\n\t}\n\n\texports.default = autosize;\n\tmodule.exports = exports['default'];\n});","// Imports\nvar ___CSS_LOADER_API_SOURCEMAP_IMPORT___ = require(\"../../../../../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\");\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../../node_modules/css-loader/dist/runtime/api.js\");\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".mk-messaging-form>textarea[data-v-0e2f5def]{cursor:auto;display:block;width:100%;min-width:100%;max-width:100%;height:64px;margin:0;padding:8px;resize:none;font-size:1em;color:var(--inputText);outline:none;border:none;border-top:1px solid var(--faceDivider);border-radius:0;box-shadow:none;background:transparent}.mk-messaging-form>.file[data-v-0e2f5def]{padding:8px;color:#444;background:#eee;cursor:pointer}.mk-messaging-form>.send[data-v-0e2f5def]{position:absolute;bottom:0;right:0;margin:0;padding:10px 14px;font-size:1em;color:#aaa;transition:color .1s ease}.mk-messaging-form>.send[data-v-0e2f5def]:hover{color:var(--primary)}.mk-messaging-form>.send[data-v-0e2f5def]:active{color:var(--primaryDarken10);transition:color 0s ease}.mk-messaging-form .files[data-v-0e2f5def]{display:block;margin:0;padding:0 8px;list-style:none}.mk-messaging-form .files[data-v-0e2f5def]:after{content:\\\"\\\";display:block;clear:both}.mk-messaging-form .files>li[data-v-0e2f5def]{display:block;float:left;margin:4px;padding:0;width:64px;height:64px;background-color:#eee;background-repeat:no-repeat;background-position:50%;background-size:cover;cursor:move}.mk-messaging-form .files>li:hover>.remove[data-v-0e2f5def]{display:block}.mk-messaging-form .files>li>.remove[data-v-0e2f5def]{display:none;position:absolute;right:-6px;top:-6px;margin:0;padding:0;background:transparent;outline:none;border:none;border-radius:0;box-shadow:none;cursor:pointer}.mk-messaging-form .attach-from-drive[data-v-0e2f5def],.mk-messaging-form .attach-from-local[data-v-0e2f5def]{margin:0;padding:10px 14px;font-size:1em;font-weight:400;text-decoration:none;color:#aaa;transition:color .1s ease}.mk-messaging-form .attach-from-drive[data-v-0e2f5def]:hover,.mk-messaging-form .attach-from-local[data-v-0e2f5def]:hover{color:var(--primary)}.mk-messaging-form .attach-from-drive[data-v-0e2f5def]:active,.mk-messaging-form .attach-from-local[data-v-0e2f5def]:active{color:var(--primaryDarken10);transition:color 0s ease}.mk-messaging-form input[type=file][data-v-0e2f5def]{display:none}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/client/app/common/views/components/messaging-room.form.vue\"],\"names\":[],\"mappings\":\"AAAA,6CAA6C,WAAW,CAAC,aAAa,CAAC,UAAU,CAAC,cAAc,CAAC,cAAc,CAAC,WAAW,CAAC,QAAQ,CAAC,WAAW,CAAC,WAAW,CAAC,aAAa,CAAC,sBAAsB,CAAC,YAAY,CAAC,WAAW,CAAC,uCAAuC,CAAC,eAAe,CAAC,eAAe,CAAC,sBAAsB,CAAC,0CAA0C,WAAW,CAAC,UAAU,CAAC,eAAe,CAAC,cAAc,CAAC,0CAA0C,iBAAiB,CAAC,QAAQ,CAAC,OAAO,CAAC,QAAQ,CAAC,iBAAiB,CAAC,aAAa,CAAC,UAAU,CAAC,yBAAyB,CAAC,gDAAgD,oBAAoB,CAAC,iDAAiD,4BAA4B,CAAC,wBAAwB,CAAC,2CAA2C,aAAa,CAAC,QAAQ,CAAC,aAAa,CAAC,eAAe,CAAC,iDAAiD,UAAU,CAAC,aAAa,CAAC,UAAU,CAAC,8CAA8C,aAAa,CAAC,UAAU,CAAC,UAAU,CAAC,SAAS,CAAC,UAAU,CAAC,WAAW,CAAC,qBAAqB,CAAC,2BAA2B,CAAC,uBAAuB,CAAC,qBAAqB,CAAC,WAAW,CAAC,4DAA4D,aAAa,CAAC,sDAAsD,YAAY,CAAC,iBAAiB,CAAC,UAAU,CAAC,QAAQ,CAAC,QAAQ,CAAC,SAAS,CAAC,sBAAsB,CAAC,YAAY,CAAC,WAAW,CAAC,eAAe,CAAC,eAAe,CAAC,cAAc,CAAC,8GAA8G,QAAQ,CAAC,iBAAiB,CAAC,aAAa,CAAC,eAAe,CAAC,oBAAoB,CAAC,UAAU,CAAC,yBAAyB,CAAC,0HAA0H,oBAAoB,CAAC,4HAA4H,4BAA4B,CAAC,wBAAwB,CAAC,qDAAqD,YAAY\",\"sourcesContent\":[\".mk-messaging-form>textarea[data-v-0e2f5def]{cursor:auto;display:block;width:100%;min-width:100%;max-width:100%;height:64px;margin:0;padding:8px;resize:none;font-size:1em;color:var(--inputText);outline:none;border:none;border-top:1px solid var(--faceDivider);border-radius:0;box-shadow:none;background:transparent}.mk-messaging-form>.file[data-v-0e2f5def]{padding:8px;color:#444;background:#eee;cursor:pointer}.mk-messaging-form>.send[data-v-0e2f5def]{position:absolute;bottom:0;right:0;margin:0;padding:10px 14px;font-size:1em;color:#aaa;transition:color .1s ease}.mk-messaging-form>.send[data-v-0e2f5def]:hover{color:var(--primary)}.mk-messaging-form>.send[data-v-0e2f5def]:active{color:var(--primaryDarken10);transition:color 0s ease}.mk-messaging-form .files[data-v-0e2f5def]{display:block;margin:0;padding:0 8px;list-style:none}.mk-messaging-form .files[data-v-0e2f5def]:after{content:\\\"\\\";display:block;clear:both}.mk-messaging-form .files>li[data-v-0e2f5def]{display:block;float:left;margin:4px;padding:0;width:64px;height:64px;background-color:#eee;background-repeat:no-repeat;background-position:50%;background-size:cover;cursor:move}.mk-messaging-form .files>li:hover>.remove[data-v-0e2f5def]{display:block}.mk-messaging-form .files>li>.remove[data-v-0e2f5def]{display:none;position:absolute;right:-6px;top:-6px;margin:0;padding:0;background:transparent;outline:none;border:none;border-radius:0;box-shadow:none;cursor:pointer}.mk-messaging-form .attach-from-drive[data-v-0e2f5def],.mk-messaging-form .attach-from-local[data-v-0e2f5def]{margin:0;padding:10px 14px;font-size:1em;font-weight:400;text-decoration:none;color:#aaa;transition:color .1s ease}.mk-messaging-form .attach-from-drive[data-v-0e2f5def]:hover,.mk-messaging-form .attach-from-local[data-v-0e2f5def]:hover{color:var(--primary)}.mk-messaging-form .attach-from-drive[data-v-0e2f5def]:active,.mk-messaging-form .attach-from-local[data-v-0e2f5def]:active{color:var(--primaryDarken10);transition:color 0s ease}.mk-messaging-form input[type=file][data-v-0e2f5def]{display:none}\"],\"sourceRoot\":\"\"}]);\n// Exports\nmodule.exports = ___CSS_LOADER_EXPORT___;\n","// Imports\nvar ___CSS_LOADER_API_SOURCEMAP_IMPORT___ = require(\"../../../../../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\");\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../../node_modules/css-loader/dist/runtime/api.js\");\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".message[data-v-7ed2dfe6]{padding:10px 12px;background-color:transparent}.message>.avatar[data-v-7ed2dfe6]{display:block;position:absolute;top:10px;width:54px;height:54px;border-radius:8px;transition:all .1s ease}.message>.content>.balloon[data-v-7ed2dfe6]{display:flex;align-items:center;padding:0;max-width:calc(100% - 16px);min-height:38px;border-radius:16px}.message>.content>.balloon[data-v-7ed2dfe6]:before{content:\\\"\\\";pointer-events:none;display:block;position:absolute;top:12px}.message>.content>.balloon+*[data-v-7ed2dfe6]{clear:both}.message>.content>.balloon:hover>.delete-button[data-v-7ed2dfe6]{display:block}.message>.content>.balloon>.delete-button[data-v-7ed2dfe6]{display:none;position:absolute;z-index:1;top:-4px;right:-4px;margin:0;padding:0;cursor:pointer;outline:none;border:none;border-radius:0;box-shadow:none;background:transparent}.message>.content>.balloon>.delete-button>img[data-v-7ed2dfe6]{vertical-align:bottom;width:16px;height:16px;cursor:pointer}.message>.content>.balloon>.content[data-v-7ed2dfe6]{max-width:100%}.message>.content>.balloon>.content>.is-deleted[data-v-7ed2dfe6]{display:block;margin:0;padding:0;overflow:hidden;overflow-wrap:break-word;font-size:1em;color:rgba(0,0,0,.5)}.message>.content>.balloon>.content>.text[data-v-7ed2dfe6]{display:block;margin:0;padding:8px 16px;overflow:hidden;overflow-wrap:break-word;word-break:break-word;font-size:1em;color:rgba(0,0,0,.8)}.message>.content>.balloon>.content>.text+.file>a[data-v-7ed2dfe6]{border-radius:0 0 16px 16px}.message>.content>.balloon>.content>.file>a[data-v-7ed2dfe6]{display:block;max-width:100%;border-radius:16px;overflow:hidden;text-decoration:none}.message>.content>.balloon>.content>.file>a[data-v-7ed2dfe6]:hover{text-decoration:none}.message>.content>.balloon>.content>.file>a:hover>p[data-v-7ed2dfe6]{background:#ccc}.message>.content>.balloon>.content>.file>a>*[data-v-7ed2dfe6]{display:block;margin:0;width:100%;max-height:512px;object-fit:contain}.message>.content>.balloon>.content>.file>a>p[data-v-7ed2dfe6]{padding:30px;text-align:center;color:#555;background:#ddd}.message>.content>.mk-url-preview[data-v-7ed2dfe6]{margin:8px 0}.message>.content>footer[data-v-7ed2dfe6]{display:block;margin:2px 0 0;font-size:10px;color:var(--messagingRoomMessageInfo)}.message>.content>footer>.read[data-v-7ed2dfe6]{margin:0 8px}.message>.content>footer>[data-icon][data-v-7ed2dfe6]{margin-left:4px}.message:not([data-is-me])>.avatar[data-v-7ed2dfe6]{left:12px}.message:not([data-is-me])>.content[data-v-7ed2dfe6]{padding-left:66px}.message:not([data-is-me])>.content>.balloon[data-v-7ed2dfe6]{float:left;background:var(--messagingRoomMessageBg)}.message:not([data-is-me])>.content>.balloon[data-no-text][data-v-7ed2dfe6]{background:transparent}.message:not([data-is-me])>.content>.balloon[data-v-7ed2dfe6]:not([data-no-text]):before{left:-14px;border:8px solid transparent;border-right:8px solid var(--messagingRoomMessageBg)}.message:not([data-is-me])>.content>.balloon>.content>.text[data-v-7ed2dfe6]{color:var(--messagingRoomMessageFg)}.message:not([data-is-me])>.content>footer[data-v-7ed2dfe6]{text-align:left}.message[data-is-me]>.avatar[data-v-7ed2dfe6]{right:12px}.message[data-is-me]>.content[data-v-7ed2dfe6]{padding-right:66px}.message[data-is-me]>.content>.balloon[data-v-7ed2dfe6]{float:right;background:var(--primary)}.message[data-is-me]>.content>.balloon[data-no-text][data-v-7ed2dfe6]{background:transparent}.message[data-is-me]>.content>.balloon[data-v-7ed2dfe6]:not([data-no-text]):before{right:-14px;left:auto;border:8px solid transparent;border-left:8px solid var(--primary)}.message[data-is-me]>.content>.balloon>.content>p.is-deleted[data-v-7ed2dfe6]{color:hsla(0,0%,100%,.5)}.message[data-is-me]>.content>.balloon>.content>.text[data-v-7ed2dfe6] ,.message[data-is-me]>.content>.balloon>.content>.text[data-v-7ed2dfe6] *{color:#fff!important}.message[data-is-me]>.content>footer[data-v-7ed2dfe6]{text-align:right}.message[data-is-me]>.content>footer>.read[data-v-7ed2dfe6]{user-select:none}.message[data-is-deleted]>.balloon[data-v-7ed2dfe6]{opacity:.5}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/client/app/common/views/components/messaging-room.message.vue\"],\"names\":[],\"mappings\":\"AAAA,0BAA0B,iBAAiB,CAAC,4BAA4B,CAAC,kCAAkC,aAAa,CAAC,iBAAiB,CAAC,QAAQ,CAAC,UAAU,CAAC,WAAW,CAAC,iBAAiB,CAAC,uBAAuB,CAAC,4CAA4C,YAAY,CAAC,kBAAkB,CAAC,SAAS,CAAC,2BAA2B,CAAC,eAAe,CAAC,kBAAkB,CAAC,mDAAmD,UAAU,CAAC,mBAAmB,CAAC,aAAa,CAAC,iBAAiB,CAAC,QAAQ,CAAC,8CAA8C,UAAU,CAAC,iEAAiE,aAAa,CAAC,2DAA2D,YAAY,CAAC,iBAAiB,CAAC,SAAS,CAAC,QAAQ,CAAC,UAAU,CAAC,QAAQ,CAAC,SAAS,CAAC,cAAc,CAAC,YAAY,CAAC,WAAW,CAAC,eAAe,CAAC,eAAe,CAAC,sBAAsB,CAAC,+DAA+D,qBAAqB,CAAC,UAAU,CAAC,WAAW,CAAC,cAAc,CAAC,qDAAqD,cAAc,CAAC,iEAAiE,aAAa,CAAC,QAAQ,CAAC,SAAS,CAAC,eAAe,CAAC,wBAAwB,CAAC,aAAa,CAAC,oBAAoB,CAAC,2DAA2D,aAAa,CAAC,QAAQ,CAAC,gBAAgB,CAAC,eAAe,CAAC,wBAAwB,CAAC,qBAAqB,CAAC,aAAa,CAAC,oBAAoB,CAAC,mEAAmE,2BAA2B,CAAC,6DAA6D,aAAa,CAAC,cAAc,CAAC,kBAAkB,CAAC,eAAe,CAAC,oBAAoB,CAAC,mEAAmE,oBAAoB,CAAC,qEAAqE,eAAe,CAAC,+DAA+D,aAAa,CAAC,QAAQ,CAAC,UAAU,CAAC,gBAAgB,CAAC,kBAAkB,CAAC,+DAA+D,YAAY,CAAC,iBAAiB,CAAC,UAAU,CAAC,eAAe,CAAC,mDAAmD,YAAY,CAAC,0CAA0C,aAAa,CAAC,cAAc,CAAC,cAAc,CAAC,qCAAqC,CAAC,gDAAgD,YAAY,CAAC,sDAAsD,eAAe,CAAC,oDAAoD,SAAS,CAAC,qDAAqD,iBAAiB,CAAC,8DAA8D,UAAU,CAAC,wCAAwC,CAAC,4EAA4E,sBAAsB,CAAC,yFAAyF,UAAU,CAAC,4BAA4B,CAAC,oDAAoD,CAAC,6EAA6E,mCAAmC,CAAC,4DAA4D,eAAe,CAAC,8CAA8C,UAAU,CAAC,+CAA+C,kBAAkB,CAAC,wDAAwD,WAAW,CAAC,yBAAyB,CAAC,sEAAsE,sBAAsB,CAAC,mFAAmF,WAAW,CAAC,SAAS,CAAC,4BAA4B,CAAC,oCAAoC,CAAC,8EAA8E,wBAAwB,CAAC,iJAAiJ,oBAAoB,CAAC,sDAAsD,gBAAgB,CAAC,4DAA4D,gBAAgB,CAAC,oDAAoD,UAAU\",\"sourcesContent\":[\".message[data-v-7ed2dfe6]{padding:10px 12px;background-color:transparent}.message>.avatar[data-v-7ed2dfe6]{display:block;position:absolute;top:10px;width:54px;height:54px;border-radius:8px;transition:all .1s ease}.message>.content>.balloon[data-v-7ed2dfe6]{display:flex;align-items:center;padding:0;max-width:calc(100% - 16px);min-height:38px;border-radius:16px}.message>.content>.balloon[data-v-7ed2dfe6]:before{content:\\\"\\\";pointer-events:none;display:block;position:absolute;top:12px}.message>.content>.balloon+*[data-v-7ed2dfe6]{clear:both}.message>.content>.balloon:hover>.delete-button[data-v-7ed2dfe6]{display:block}.message>.content>.balloon>.delete-button[data-v-7ed2dfe6]{display:none;position:absolute;z-index:1;top:-4px;right:-4px;margin:0;padding:0;cursor:pointer;outline:none;border:none;border-radius:0;box-shadow:none;background:transparent}.message>.content>.balloon>.delete-button>img[data-v-7ed2dfe6]{vertical-align:bottom;width:16px;height:16px;cursor:pointer}.message>.content>.balloon>.content[data-v-7ed2dfe6]{max-width:100%}.message>.content>.balloon>.content>.is-deleted[data-v-7ed2dfe6]{display:block;margin:0;padding:0;overflow:hidden;overflow-wrap:break-word;font-size:1em;color:rgba(0,0,0,.5)}.message>.content>.balloon>.content>.text[data-v-7ed2dfe6]{display:block;margin:0;padding:8px 16px;overflow:hidden;overflow-wrap:break-word;word-break:break-word;font-size:1em;color:rgba(0,0,0,.8)}.message>.content>.balloon>.content>.text+.file>a[data-v-7ed2dfe6]{border-radius:0 0 16px 16px}.message>.content>.balloon>.content>.file>a[data-v-7ed2dfe6]{display:block;max-width:100%;border-radius:16px;overflow:hidden;text-decoration:none}.message>.content>.balloon>.content>.file>a[data-v-7ed2dfe6]:hover{text-decoration:none}.message>.content>.balloon>.content>.file>a:hover>p[data-v-7ed2dfe6]{background:#ccc}.message>.content>.balloon>.content>.file>a>*[data-v-7ed2dfe6]{display:block;margin:0;width:100%;max-height:512px;object-fit:contain}.message>.content>.balloon>.content>.file>a>p[data-v-7ed2dfe6]{padding:30px;text-align:center;color:#555;background:#ddd}.message>.content>.mk-url-preview[data-v-7ed2dfe6]{margin:8px 0}.message>.content>footer[data-v-7ed2dfe6]{display:block;margin:2px 0 0;font-size:10px;color:var(--messagingRoomMessageInfo)}.message>.content>footer>.read[data-v-7ed2dfe6]{margin:0 8px}.message>.content>footer>[data-icon][data-v-7ed2dfe6]{margin-left:4px}.message:not([data-is-me])>.avatar[data-v-7ed2dfe6]{left:12px}.message:not([data-is-me])>.content[data-v-7ed2dfe6]{padding-left:66px}.message:not([data-is-me])>.content>.balloon[data-v-7ed2dfe6]{float:left;background:var(--messagingRoomMessageBg)}.message:not([data-is-me])>.content>.balloon[data-no-text][data-v-7ed2dfe6]{background:transparent}.message:not([data-is-me])>.content>.balloon[data-v-7ed2dfe6]:not([data-no-text]):before{left:-14px;border:8px solid transparent;border-right:8px solid var(--messagingRoomMessageBg)}.message:not([data-is-me])>.content>.balloon>.content>.text[data-v-7ed2dfe6]{color:var(--messagingRoomMessageFg)}.message:not([data-is-me])>.content>footer[data-v-7ed2dfe6]{text-align:left}.message[data-is-me]>.avatar[data-v-7ed2dfe6]{right:12px}.message[data-is-me]>.content[data-v-7ed2dfe6]{padding-right:66px}.message[data-is-me]>.content>.balloon[data-v-7ed2dfe6]{float:right;background:var(--primary)}.message[data-is-me]>.content>.balloon[data-no-text][data-v-7ed2dfe6]{background:transparent}.message[data-is-me]>.content>.balloon[data-v-7ed2dfe6]:not([data-no-text]):before{right:-14px;left:auto;border:8px solid transparent;border-left:8px solid var(--primary)}.message[data-is-me]>.content>.balloon>.content>p.is-deleted[data-v-7ed2dfe6]{color:hsla(0,0%,100%,.5)}.message[data-is-me]>.content>.balloon>.content>.text[data-v-7ed2dfe6] ,.message[data-is-me]>.content>.balloon>.content>.text[data-v-7ed2dfe6] *{color:#fff!important}.message[data-is-me]>.content>footer[data-v-7ed2dfe6]{text-align:right}.message[data-is-me]>.content>footer>.read[data-v-7ed2dfe6]{user-select:none}.message[data-is-deleted]>.balloon[data-v-7ed2dfe6]{opacity:.5}\"],\"sourceRoot\":\"\"}]);\n// Exports\nmodule.exports = ___CSS_LOADER_EXPORT___;\n","// Imports\nvar ___CSS_LOADER_API_SOURCEMAP_IMPORT___ = require(\"../../../../../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\");\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../../node_modules/css-loader/dist/runtime/api.js\");\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".mk-messaging-room>.body[data-v-06566fd1]{width:100%;max-width:600px;margin:0 auto;min-height:calc(100% - 103px);background:var(--face)}.mk-messaging-room>.body>.empty[data-v-06566fd1],.mk-messaging-room>.body>.init[data-v-06566fd1]{width:100%;margin:0;padding:16px 8px 8px;text-align:center;font-size:.8em;color:var(--messagingRoomInfo);opacity:.5}.mk-messaging-room>.body>.empty [data-icon][data-v-06566fd1],.mk-messaging-room>.body>.init [data-icon][data-v-06566fd1]{margin-right:4px}.mk-messaging-room>.body>.no-history[data-v-06566fd1]{display:block;margin:0;padding:16px;text-align:center;font-size:.8em;color:var(--messagingRoomInfo);opacity:.5}.mk-messaging-room>.body>.no-history [data-icon][data-v-06566fd1]{margin-right:4px}.mk-messaging-room>.body>.more[data-v-06566fd1]{display:block;margin:16px auto;padding:0 12px;line-height:24px;color:#fff;background:rgba(0,0,0,.3);border-radius:12px}.mk-messaging-room>.body>.more[data-v-06566fd1]:hover{background:rgba(0,0,0,.4)}.mk-messaging-room>.body>.more[data-v-06566fd1]:active{background:rgba(0,0,0,.5)}.mk-messaging-room>.body>.more.fetching[data-v-06566fd1]{cursor:wait}.mk-messaging-room>.body>.more>[data-icon][data-v-06566fd1]{margin-right:4px}.mk-messaging-room>.body>.date[data-v-06566fd1]{display:block;margin:8px 0;text-align:center}.mk-messaging-room>.body>.date[data-v-06566fd1]:before{content:\\\"\\\";display:block;position:absolute;height:1px;width:90%;top:16px;left:0;right:0;margin:0 auto;background:var(--messagingRoomDateDividerLine)}.mk-messaging-room>.body>.date>span[data-v-06566fd1]{display:inline-block;margin:0;padding:0 16px;line-height:32px;color:var(--messagingRoomDateDividerText);background:var(--messagingRoomBg)}.mk-messaging-room>footer[data-v-06566fd1]{position:-webkit-sticky;position:sticky;z-index:2;bottom:0;width:100%;max-width:600px;margin:0 auto;padding:0;background:var(--messagingRoomBg);background-clip:content-box}.mk-messaging-room>footer>.new-message[data-v-06566fd1]{position:absolute;top:-48px;width:100%;padding:8px 0;text-align:center}.mk-messaging-room>footer>.new-message>button[data-v-06566fd1]{display:inline-block;margin:0;padding:0 12px 0 30px;cursor:pointer;line-height:32px;font-size:12px;color:var(--primaryForeground);background:var(--primary);border-radius:16px}.mk-messaging-room>footer>.new-message>button[data-v-06566fd1]:hover{background:var(--primaryLighten10)}.mk-messaging-room>footer>.new-message>button[data-v-06566fd1]:active{background:var(--primaryDarken10)}.mk-messaging-room>footer>.new-message>button>i[data-v-06566fd1]{position:absolute;top:0;left:10px;line-height:32px;font-size:16px}.fade-enter-active[data-v-06566fd1],.fade-leave-active[data-v-06566fd1]{transition:opacity .1s}.fade-enter[data-v-06566fd1],.fade-leave-to[data-v-06566fd1]{transition:opacity .5s;opacity:0}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/client/app/common/views/components/messaging-room.vue\"],\"names\":[],\"mappings\":\"AAAA,0CAA0C,UAAU,CAAC,eAAe,CAAC,aAAa,CAAC,6BAA6B,CAAC,sBAAsB,CAAC,iGAAiG,UAAU,CAAC,QAAQ,CAAC,oBAAoB,CAAC,iBAAiB,CAAC,cAAc,CAAC,8BAA8B,CAAC,UAAU,CAAC,yHAAyH,gBAAgB,CAAC,sDAAsD,aAAa,CAAC,QAAQ,CAAC,YAAY,CAAC,iBAAiB,CAAC,cAAc,CAAC,8BAA8B,CAAC,UAAU,CAAC,kEAAkE,gBAAgB,CAAC,gDAAgD,aAAa,CAAC,gBAAgB,CAAC,cAAc,CAAC,gBAAgB,CAAC,UAAU,CAAC,yBAAyB,CAAC,kBAAkB,CAAC,sDAAsD,yBAAyB,CAAC,uDAAuD,yBAAyB,CAAC,yDAAyD,WAAW,CAAC,4DAA4D,gBAAgB,CAAC,gDAAgD,aAAa,CAAC,YAAY,CAAC,iBAAiB,CAAC,uDAAuD,UAAU,CAAC,aAAa,CAAC,iBAAiB,CAAC,UAAU,CAAC,SAAS,CAAC,QAAQ,CAAC,MAAM,CAAC,OAAO,CAAC,aAAa,CAAC,8CAA8C,CAAC,qDAAqD,oBAAoB,CAAC,QAAQ,CAAC,cAAc,CAAC,gBAAgB,CAAC,yCAAyC,CAAC,iCAAiC,CAAC,2CAA2C,uBAAuB,CAAC,eAAe,CAAC,SAAS,CAAC,QAAQ,CAAC,UAAU,CAAC,eAAe,CAAC,aAAa,CAAC,SAAS,CAAC,iCAAiC,CAAC,2BAA2B,CAAC,wDAAwD,iBAAiB,CAAC,SAAS,CAAC,UAAU,CAAC,aAAa,CAAC,iBAAiB,CAAC,+DAA+D,oBAAoB,CAAC,QAAQ,CAAC,qBAAqB,CAAC,cAAc,CAAC,gBAAgB,CAAC,cAAc,CAAC,8BAA8B,CAAC,yBAAyB,CAAC,kBAAkB,CAAC,qEAAqE,kCAAkC,CAAC,sEAAsE,iCAAiC,CAAC,iEAAiE,iBAAiB,CAAC,KAAK,CAAC,SAAS,CAAC,gBAAgB,CAAC,cAAc,CAAC,wEAAwE,sBAAsB,CAAC,6DAA6D,sBAAsB,CAAC,SAAS\",\"sourcesContent\":[\".mk-messaging-room>.body[data-v-06566fd1]{width:100%;max-width:600px;margin:0 auto;min-height:calc(100% - 103px);background:var(--face)}.mk-messaging-room>.body>.empty[data-v-06566fd1],.mk-messaging-room>.body>.init[data-v-06566fd1]{width:100%;margin:0;padding:16px 8px 8px;text-align:center;font-size:.8em;color:var(--messagingRoomInfo);opacity:.5}.mk-messaging-room>.body>.empty [data-icon][data-v-06566fd1],.mk-messaging-room>.body>.init [data-icon][data-v-06566fd1]{margin-right:4px}.mk-messaging-room>.body>.no-history[data-v-06566fd1]{display:block;margin:0;padding:16px;text-align:center;font-size:.8em;color:var(--messagingRoomInfo);opacity:.5}.mk-messaging-room>.body>.no-history [data-icon][data-v-06566fd1]{margin-right:4px}.mk-messaging-room>.body>.more[data-v-06566fd1]{display:block;margin:16px auto;padding:0 12px;line-height:24px;color:#fff;background:rgba(0,0,0,.3);border-radius:12px}.mk-messaging-room>.body>.more[data-v-06566fd1]:hover{background:rgba(0,0,0,.4)}.mk-messaging-room>.body>.more[data-v-06566fd1]:active{background:rgba(0,0,0,.5)}.mk-messaging-room>.body>.more.fetching[data-v-06566fd1]{cursor:wait}.mk-messaging-room>.body>.more>[data-icon][data-v-06566fd1]{margin-right:4px}.mk-messaging-room>.body>.date[data-v-06566fd1]{display:block;margin:8px 0;text-align:center}.mk-messaging-room>.body>.date[data-v-06566fd1]:before{content:\\\"\\\";display:block;position:absolute;height:1px;width:90%;top:16px;left:0;right:0;margin:0 auto;background:var(--messagingRoomDateDividerLine)}.mk-messaging-room>.body>.date>span[data-v-06566fd1]{display:inline-block;margin:0;padding:0 16px;line-height:32px;color:var(--messagingRoomDateDividerText);background:var(--messagingRoomBg)}.mk-messaging-room>footer[data-v-06566fd1]{position:-webkit-sticky;position:sticky;z-index:2;bottom:0;width:100%;max-width:600px;margin:0 auto;padding:0;background:var(--messagingRoomBg);background-clip:content-box}.mk-messaging-room>footer>.new-message[data-v-06566fd1]{position:absolute;top:-48px;width:100%;padding:8px 0;text-align:center}.mk-messaging-room>footer>.new-message>button[data-v-06566fd1]{display:inline-block;margin:0;padding:0 12px 0 30px;cursor:pointer;line-height:32px;font-size:12px;color:var(--primaryForeground);background:var(--primary);border-radius:16px}.mk-messaging-room>footer>.new-message>button[data-v-06566fd1]:hover{background:var(--primaryLighten10)}.mk-messaging-room>footer>.new-message>button[data-v-06566fd1]:active{background:var(--primaryDarken10)}.mk-messaging-room>footer>.new-message>button>i[data-v-06566fd1]{position:absolute;top:0;left:10px;line-height:32px;font-size:16px}.fade-enter-active[data-v-06566fd1],.fade-leave-active[data-v-06566fd1]{transition:opacity .1s}.fade-enter[data-v-06566fd1],.fade-leave-to[data-v-06566fd1]{transition:opacity .5s;opacity:0}\"],\"sourceRoot\":\"\"}]);\n// Exports\nmodule.exports = ___CSS_LOADER_EXPORT___;\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"mk-messaging-room\",on:{\"dragover\":function($event){$event.preventDefault();$event.stopPropagation();return _vm.onDragover($event)},\"drop\":function($event){$event.preventDefault();$event.stopPropagation();return _vm.onDrop($event)}}},[_c('div',{staticClass:\"body\"},[(_vm.init)?_c('p',{staticClass:\"init\"},[_c('fa',{attrs:{\"icon\":\"spinner\",\"pulse\":\"\",\"fixed-width\":\"\"}}),_vm._v(_vm._s(_vm.$t('@.loading')))],1):_vm._e(),(!_vm.init && _vm.messages.length == 0)?_c('p',{staticClass:\"empty\"},[_c('fa',{attrs:{\"icon\":\"info-circle\"}}),_vm._v(_vm._s(_vm.user ? _vm.$t('not-talked-user') : _vm.$t('not-talked-group')))],1):_vm._e(),(!_vm.init && _vm.messages.length > 0 && !_vm.existMoreMessages)?_c('p',{staticClass:\"no-history\"},[_c('fa',{attrs:{\"icon\":_vm.faFlag}}),_vm._v(_vm._s(_vm.$t('no-history')))],1):_vm._e(),(_vm.existMoreMessages)?_c('button',{staticClass:\"more\",class:{ fetching: _vm.fetchingMoreMessages },attrs:{\"disabled\":_vm.fetchingMoreMessages},on:{\"click\":_vm.fetchMoreMessages}},[(_vm.fetchingMoreMessages)?[_c('fa',{attrs:{\"icon\":\"spinner\",\"pulse\":\"\",\"fixed-width\":\"\"}})]:_vm._e(),_vm._v(_vm._s(_vm.fetchingMoreMessages ? _vm.$t('@.loading') : _vm.$t('@.load-more'))+\"\\n\\t\\t\")],2):_vm._e(),_vm._l((_vm._messages),function(message,i){return [_c('x-message',{key:message.id,attrs:{\"message\":message,\"is-group\":_vm.group != null}}),(i != _vm.messages.length - 1 && message._date != _vm._messages[i + 1]._date)?_c('p',{staticClass:\"date\"},[_c('span',[_vm._v(_vm._s(_vm._messages[i + 1]._datetext))])]):_vm._e()]})],2),_c('footer',[_c('transition',{attrs:{\"name\":\"fade\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.showIndicator),expression:\"showIndicator\"}],staticClass:\"new-message\"},[_c('button',{on:{\"click\":_vm.onIndicatorClick}},[_c('i',[_c('fa',{attrs:{\"icon\":_vm.faArrowCircleDown}})],1),_vm._v(_vm._s(_vm.$t('new-message')))])])]),_c('x-form',{ref:\"form\",attrs:{\"user\":_vm.user,\"group\":_vm.group}})],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import Vue from 'vue';\nimport i18n from '../../../i18n';\nimport { parse } from '../../../../../mfm/parse';\nimport { unique } from '../../../../../prelude/array';\nexport default Vue.extend({\n    i18n: i18n('common/views/components/messaging-room.message.vue'),\n    props: {\n        message: {\n            required: true\n        },\n        isGroup: {\n            required: false\n        }\n    },\n    computed: {\n        isMe() {\n            return this.message.userId == this.$store.state.i.id;\n        },\n        urls() {\n            if (this.message.text) {\n                const ast = parse(this.message.text);\n                return unique(ast\n                    .filter(t => ((t.node.type == 'url' || t.node.type == 'link') && t.node.props.url && !t.node.props.silent))\n                    .map(t => t.node.props.url));\n            }\n            else {\n                return null;\n            }\n        }\n    },\n    methods: {\n        del() {\n            this.$root.api('messaging/messages/delete', {\n                messageId: this.message.id\n            });\n        }\n    }\n});\n","import mod from \"-!../../../../../../node_modules/ts-loader/index.js??clonedRuleSet-7[0].rules[0].use[0]!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../node_modules/vue-svg-inline-loader/src/index.js!./messaging-room.message.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../../../node_modules/ts-loader/index.js??clonedRuleSet-7[0].rules[0].use[0]!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../node_modules/vue-svg-inline-loader/src/index.js!./messaging-room.message.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./messaging-room.message.vue?vue&type=template&id=7ed2dfe6&scoped=true&\"\nimport script from \"./messaging-room.message.vue?vue&type=script&lang=ts&\"\nexport * from \"./messaging-room.message.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./messaging-room.message.vue?vue&type=style&index=0&id=7ed2dfe6&lang=stylus&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7ed2dfe6\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"message\",attrs:{\"data-is-me\":_vm.isMe}},[_c('mk-avatar',{staticClass:\"avatar\",attrs:{\"user\":_vm.message.user,\"target\":\"_blank\"}}),_c('div',{staticClass:\"content\"},[_c('div',{staticClass:\"balloon\",attrs:{\"data-no-text\":_vm.message.text == null}},[(_vm.isMe)?_c('button',{staticClass:\"delete-button\",attrs:{\"title\":_vm.$t('@.delete')},on:{\"click\":_vm.del}},[_c('img',{attrs:{\"src\":\"/assets/desktop/remove.png\",\"alt\":\"Delete\"}})]):_vm._e(),(!_vm.message.isDeleted)?_c('div',{staticClass:\"content\"},[(_vm.message.text)?_c('mfm',{ref:\"text\",staticClass:\"text\",attrs:{\"text\":_vm.message.text,\"i\":_vm.$store.state.i}}):_vm._e(),(_vm.message.file)?_c('div',{staticClass:\"file\"},[_c('a',{attrs:{\"href\":_vm.message.file.url,\"rel\":\"noopener\",\"target\":\"_blank\",\"title\":_vm.message.file.name}},[(_vm.message.file.type.split('/')[0] == 'image')?_c('img',{attrs:{\"src\":_vm.message.file.url,\"alt\":_vm.message.file.name}}):_c('p',[_vm._v(_vm._s(_vm.message.file.name))])])]):_vm._e()],1):_c('div',{staticClass:\"content\"},[_c('p',{staticClass:\"is-deleted\"},[_vm._v(_vm._s(_vm.$t('deleted')))])])]),_c('div'),_vm._l((_vm.urls),function(url){return _c('mk-url-preview',{key:url,attrs:{\"url\":url}})}),_c('footer',[(_vm.isGroup)?[(_vm.message.reads.length > 0)?_c('span',{staticClass:\"read\"},[_vm._v(_vm._s(_vm.$t('is-read'))+\" \"+_vm._s(_vm.message.reads.length))]):_vm._e()]:[(_vm.isMe && _vm.message.isRead)?_c('span',{staticClass:\"read\"},[_vm._v(_vm._s(_vm.$t('is-read')))]):_vm._e()],_c('mk-time',{attrs:{\"time\":_vm.message.createdAt}}),(_vm.message.is_edited)?[_c('fa',{attrs:{\"icon\":\"pencil-alt\"}})]:_vm._e()],2)],2)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"mk-messaging-form\",on:{\"dragover\":function($event){$event.stopPropagation();return _vm.onDragover($event)},\"drop\":function($event){$event.stopPropagation();return _vm.onDrop($event)}}},[_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.text),expression:\"text\"},{name:\"autocomplete\",rawName:\"v-autocomplete\",value:({ model: 'text' }),expression:\"{ model: 'text' }\"}],ref:\"textarea\",attrs:{\"placeholder\":_vm.$t('input-message-here')},domProps:{\"value\":(_vm.text)},on:{\"keypress\":_vm.onKeypress,\"paste\":_vm.onPaste,\"input\":function($event){if($event.target.composing){ return; }_vm.text=$event.target.value}}}),(_vm.file)?_c('div',{staticClass:\"file\",on:{\"click\":function($event){_vm.file = null}}},[_vm._v(_vm._s(_vm.file.name))]):_vm._e(),_c('mk-uploader',{ref:\"uploader\",on:{\"uploaded\":_vm.onUploaded}}),_c('button',{staticClass:\"send\",attrs:{\"disabled\":!_vm.canSend || _vm.sending,\"title\":_vm.$t('send')},on:{\"click\":_vm.send}},[(!_vm.sending)?[_c('fa',{attrs:{\"icon\":\"paper-plane\"}})]:_vm._e(),(_vm.sending)?[_c('fa',{attrs:{\"icon\":\"spinner .spin\"}})]:_vm._e()],2),_c('button',{staticClass:\"attach-from-local\",attrs:{\"title\":_vm.$t('attach-from-local')},on:{\"click\":_vm.chooseFile}},[_c('fa',{attrs:{\"icon\":\"upload\"}})],1),_c('button',{staticClass:\"attach-from-drive\",attrs:{\"title\":_vm.$t('attach-from-drive')},on:{\"click\":_vm.chooseFileFromDrive}},[_c('fa',{attrs:{\"icon\":['far', 'folder-open']}})],1),_c('input',{ref:\"file\",attrs:{\"type\":\"file\"},on:{\"change\":_vm.onChangeFile}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import Vue from 'vue';\nimport i18n from '../../../i18n';\nimport * as autosize from 'autosize';\nimport { formatTimeString } from '../../../../../misc/format-time-string';\nexport default Vue.extend({\n    i18n: i18n('common/views/components/messaging-room.form.vue'),\n    props: {\n        user: {\n            type: Object,\n            requird: false,\n        },\n        group: {\n            type: Object,\n            requird: false,\n        },\n    },\n    data() {\n        return {\n            text: null,\n            file: null,\n            sending: false\n        };\n    },\n    computed: {\n        draftId() {\n            return this.user ? 'user:' + this.user.id : 'group:' + this.group.id;\n        },\n        canSend() {\n            return (this.text != null && this.text != '') || this.file != null;\n        },\n        room() {\n            return this.$parent;\n        }\n    },\n    watch: {\n        text() {\n            this.saveDraft();\n        },\n        file() {\n            this.saveDraft();\n            if (this.room.isBottom()) {\n                this.room.scrollToBottom();\n            }\n        }\n    },\n    mounted() {\n        autosize(this.$refs.textarea);\n        // \n        const draft = JSON.parse(localStorage.getItem('message_drafts') || '{}')[this.draftId];\n        if (draft) {\n            this.text = draft.data.text;\n            this.file = draft.data.file;\n        }\n    },\n    methods: {\n        async onPaste(e) {\n            const data = e.clipboardData;\n            const items = data.items;\n            if (items.length == 1) {\n                if (items[0].kind == 'file') {\n                    const file = items[0].getAsFile();\n                    const lio = file.name.lastIndexOf('.');\n                    const ext = lio >= 0 ? file.name.slice(lio) : '';\n                    const formatted = `${formatTimeString(new Date(file.lastModified), this.$store.state.settings.pastedFileName).replace(/{{number}}/g, '1')}${ext}`;\n                    const name = this.$store.state.settings.pasteDialog\n                        ? await this.$root.dialog({\n                            title: this.$t('@.post-form.enter-file-name'),\n                            input: {\n                                default: formatted\n                            },\n                            allowEmpty: false\n                        }).then(({ canceled, result }) => canceled ? false : result)\n                        : formatted;\n                    if (name)\n                        this.upload(file, name);\n                }\n            }\n            else {\n                if (items[0].kind == 'file') {\n                    this.$root.dialog({\n                        type: 'error',\n                        text: this.$t('only-one-file-attached')\n                    });\n                }\n            }\n        },\n        onDragover(e) {\n            const isFile = e.dataTransfer.items[0].kind == 'file';\n            const isDriveFile = e.dataTransfer.types[0] == 'mk_drive_file';\n            if (isFile || isDriveFile) {\n                e.preventDefault();\n                e.dataTransfer.dropEffect = e.dataTransfer.effectAllowed == 'all' ? 'copy' : 'move';\n            }\n        },\n        onDrop(e) {\n            // \n            if (e.dataTransfer.files.length == 1) {\n                e.preventDefault();\n                this.upload(e.dataTransfer.files[0]);\n                return;\n            }\n            else if (e.dataTransfer.files.length > 1) {\n                e.preventDefault();\n                this.$root.dialog({\n                    type: 'error',\n                    text: this.$t('only-one-file-attached')\n                });\n                return;\n            }\n            //#region \n            const driveFile = e.dataTransfer.getData('mk_drive_file');\n            if (driveFile != null && driveFile != '') {\n                this.file = JSON.parse(driveFile);\n                e.preventDefault();\n            }\n            //#endregion\n        },\n        onKeypress(e) {\n            if ((e.which == 10 || e.which == 13) && (e.ctrlKey || e.metaKey) && this.canSend) {\n                this.send();\n            }\n        },\n        chooseFile() {\n            this.$refs.file.click();\n        },\n        chooseFileFromDrive() {\n            this.$chooseDriveFile({\n                multiple: false\n            }).then(file => {\n                this.file = file;\n            });\n        },\n        onChangeFile() {\n            this.upload(this.$refs.file.files[0]);\n        },\n        upload(file, name) {\n            this.$refs.uploader.upload(file, this.$store.state.settings.uploadFolder, name);\n        },\n        onUploaded(file) {\n            this.file = file;\n        },\n        send() {\n            this.sending = true;\n            this.$root.api('messaging/messages/create', {\n                userId: this.user ? this.user.id : undefined,\n                groupId: this.group ? this.group.id : undefined,\n                text: this.text ? this.text : undefined,\n                fileId: this.file ? this.file.id : undefined\n            }).then(message => {\n                this.clear();\n            }).catch(err => {\n                console.error(err);\n            }).then(() => {\n                this.sending = false;\n            });\n        },\n        clear() {\n            this.text = '';\n            this.file = null;\n            this.deleteDraft();\n        },\n        saveDraft() {\n            const data = JSON.parse(localStorage.getItem('message_drafts') || '{}');\n            data[this.draftId] = {\n                updatedAt: new Date(),\n                data: {\n                    text: this.text,\n                    file: this.file\n                }\n            };\n            localStorage.setItem('message_drafts', JSON.stringify(data));\n        },\n        deleteDraft() {\n            const data = JSON.parse(localStorage.getItem('message_drafts') || '{}');\n            delete data[this.draftId];\n            localStorage.setItem('message_drafts', JSON.stringify(data));\n        },\n    }\n});\n","import mod from \"-!../../../../../../node_modules/ts-loader/index.js??clonedRuleSet-7[0].rules[0].use[0]!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../node_modules/vue-svg-inline-loader/src/index.js!./messaging-room.form.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../../../node_modules/ts-loader/index.js??clonedRuleSet-7[0].rules[0].use[0]!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../node_modules/vue-svg-inline-loader/src/index.js!./messaging-room.form.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./messaging-room.form.vue?vue&type=template&id=0e2f5def&scoped=true&\"\nimport script from \"./messaging-room.form.vue?vue&type=script&lang=ts&\"\nexport * from \"./messaging-room.form.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./messaging-room.form.vue?vue&type=style&index=0&id=0e2f5def&lang=stylus&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0e2f5def\",\n  null\n  \n)\n\nexport default component.exports","import Vue from 'vue';\nimport i18n from '../../../i18n';\nimport XMessage from './messaging-room.message.vue';\nimport XForm from './messaging-room.form.vue';\nimport { url } from '../../../config';\nimport { faArrowCircleDown, faFlag } from '@fortawesome/free-solid-svg-icons';\nexport default Vue.extend({\n    i18n: i18n('common/views/components/messaging-room.vue'),\n    components: {\n        XMessage,\n        XForm\n    },\n    props: {\n        user: {\n            type: Object,\n            requird: false,\n        },\n        group: {\n            type: Object,\n            requird: false,\n        },\n        isNaked: {\n            type: Boolean,\n            requird: false,\n        },\n    },\n    data() {\n        return {\n            init: true,\n            fetchingMoreMessages: false,\n            messages: [],\n            existMoreMessages: false,\n            connection: null,\n            showIndicator: false,\n            timer: null,\n            faArrowCircleDown, faFlag,\n        };\n    },\n    computed: {\n        _messages() {\n            return this.messages.map(message => {\n                const date = new Date(message.createdAt).getDate();\n                const month = new Date(message.createdAt).getMonth() + 1;\n                message._date = date;\n                message._datetext = this.$t('@.month-and-day').replace('{month}', month.toString()).replace('{day}', date.toString());\n                return message;\n            });\n        },\n        form() {\n            return this.$refs.form;\n        }\n    },\n    mounted() {\n        this.connection = this.$root.stream.connectToChannel('messaging', {\n            otherparty: this.user ? this.user.id : undefined,\n            group: this.group ? this.group.id : undefined,\n        });\n        this.connection.on('message', this.onMessage);\n        this.connection.on('read', this.onRead);\n        this.connection.on('deleted', this.onDeleted);\n        if (this.isNaked) {\n            window.addEventListener('scroll', this.onScroll, { passive: true });\n        }\n        else {\n            this.$el.addEventListener('scroll', this.onScroll, { passive: true });\n        }\n        document.addEventListener('visibilitychange', this.onVisibilitychange);\n        this.fetchMessages().then(() => {\n            this.init = false;\n            this.scrollToBottom();\n        });\n    },\n    beforeDestroy() {\n        this.connection.dispose();\n        if (this.isNaked) {\n            window.removeEventListener('scroll', this.onScroll);\n        }\n        else {\n            this.$el.removeEventListener('scroll', this.onScroll);\n        }\n        document.removeEventListener('visibilitychange', this.onVisibilitychange);\n    },\n    methods: {\n        onDragover(e) {\n            const isFile = e.dataTransfer.items[0].kind == 'file';\n            const isDriveFile = e.dataTransfer.types[0] == 'mk_drive_file';\n            if (isFile || isDriveFile) {\n                e.dataTransfer.dropEffect = e.dataTransfer.effectAllowed == 'all' ? 'copy' : 'move';\n            }\n            else {\n                e.dataTransfer.dropEffect = 'none';\n            }\n        },\n        onDrop(e) {\n            // \n            if (e.dataTransfer.files.length == 1) {\n                this.form.upload(e.dataTransfer.files[0]);\n                return;\n            }\n            else if (e.dataTransfer.files.length > 1) {\n                this.$root.dialog({\n                    type: 'error',\n                    text: this.$t('only-one-file-attached')\n                });\n                return;\n            }\n            //#region \n            const driveFile = e.dataTransfer.getData('mk_drive_file');\n            if (driveFile != null && driveFile != '') {\n                const file = JSON.parse(driveFile);\n                this.form.file = file;\n            }\n            //#endregion\n        },\n        fetchMessages() {\n            return new Promise((resolve, reject) => {\n                const max = this.existMoreMessages ? 20 : 10;\n                this.$root.api('messaging/messages', {\n                    userId: this.user ? this.user.id : undefined,\n                    groupId: this.group ? this.group.id : undefined,\n                    limit: max + 1,\n                    untilId: this.existMoreMessages ? this.messages[0].id : undefined\n                }).then(messages => {\n                    if (messages.length == max + 1) {\n                        this.existMoreMessages = true;\n                        messages.pop();\n                    }\n                    else {\n                        this.existMoreMessages = false;\n                    }\n                    this.messages.unshift.apply(this.messages, messages.reverse());\n                    resolve();\n                });\n            });\n        },\n        fetchMoreMessages() {\n            this.fetchingMoreMessages = true;\n            this.fetchMessages().then(() => {\n                this.fetchingMoreMessages = false;\n            });\n        },\n        onMessage(message) {\n            // \n            if (this.$store.state.device.enableSounds) {\n                const sound = new Audio(`${url}/assets/waon.mp3`);\n                sound.volume = this.$store.state.device.soundVolume;\n                sound.play();\n            }\n            const isBottom = this.isBottom();\n            this.messages.push(message);\n            if (message.userId != this.$store.state.i.id && !document.hidden) {\n                this.connection.send('read', {\n                    id: message.id\n                });\n            }\n            if (isBottom) {\n                // Scroll to bottom\n                this.$nextTick(() => {\n                    this.scrollToBottom();\n                });\n            }\n            else if (message.userId != this.$store.state.i.id) {\n                // Notify\n                this.notifyNewMessage();\n            }\n        },\n        onRead(x) {\n            if (this.user) {\n                if (!Array.isArray(x))\n                    x = [x];\n                for (const id of x) {\n                    if (this.messages.some(x => x.id == id)) {\n                        const exist = this.messages.map(x => x.id).indexOf(id);\n                        this.messages[exist].isRead = true;\n                    }\n                }\n            }\n            else if (this.group) {\n                for (const id of x.ids) {\n                    if (this.messages.some(x => x.id == id)) {\n                        const exist = this.messages.map(x => x.id).indexOf(id);\n                        this.messages[exist].reads.push(x.userId);\n                    }\n                }\n            }\n        },\n        onDeleted(id) {\n            const msg = this.messages.find(m => m.id === id);\n            if (msg) {\n                this.messages = this.messages.filter(m => m.id !== msg.id);\n            }\n        },\n        isBottom() {\n            const asobi = 64;\n            const current = this.isNaked\n                ? window.scrollY + window.innerHeight\n                : this.$el.scrollTop + this.$el.offsetHeight;\n            const max = this.isNaked\n                ? document.body.offsetHeight\n                : this.$el.scrollHeight;\n            return current > (max - asobi);\n        },\n        scrollToBottom() {\n            if (this.isNaked) {\n                window.scroll(0, document.body.offsetHeight);\n            }\n            else {\n                this.$el.scrollTop = this.$el.scrollHeight;\n            }\n        },\n        onIndicatorClick() {\n            this.showIndicator = false;\n            this.scrollToBottom();\n        },\n        notifyNewMessage() {\n            this.showIndicator = true;\n            if (this.timer)\n                clearTimeout(this.timer);\n            this.timer = setTimeout(() => {\n                this.showIndicator = false;\n            }, 4000);\n        },\n        onScroll() {\n            const el = this.isNaked ? window.document.documentElement : this.$el;\n            const current = el.scrollTop + el.clientHeight;\n            if (current > el.scrollHeight - 1) {\n                this.showIndicator = false;\n            }\n        },\n        onVisibilitychange() {\n            if (document.hidden)\n                return;\n            for (const message of this.messages) {\n                if (message.userId !== this.$store.state.i.id && !message.isRead) {\n                    this.connection.send('read', {\n                        id: message.id\n                    });\n                }\n            }\n        }\n    }\n});\n","import mod from \"-!../../../../../../node_modules/ts-loader/index.js??clonedRuleSet-7[0].rules[0].use[0]!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../node_modules/vue-svg-inline-loader/src/index.js!./messaging-room.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../../../node_modules/ts-loader/index.js??clonedRuleSet-7[0].rules[0].use[0]!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../node_modules/vue-svg-inline-loader/src/index.js!./messaging-room.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./messaging-room.vue?vue&type=template&id=06566fd1&scoped=true&\"\nimport script from \"./messaging-room.vue?vue&type=script&lang=ts&\"\nexport * from \"./messaging-room.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./messaging-room.vue?vue&type=style&index=0&id=06566fd1&lang=stylus&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"06566fd1\",\n  null\n  \n)\n\nexport default component.exports","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-3[0].rules[0].use[1]!../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../node_modules/postcss-loader/src/index.js??clonedRuleSet-3[0].rules[0].use[2]!../../../../../../node_modules/stylus-loader/dist/cjs.js!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../node_modules/vue-svg-inline-loader/src/index.js!./messaging-room.form.vue?vue&type=style&index=0&id=0e2f5def&lang=stylus&scoped=true&\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"50d6b3ad\", content, true, {});","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-3[0].rules[0].use[1]!../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../node_modules/postcss-loader/src/index.js??clonedRuleSet-3[0].rules[0].use[2]!../../../../../../node_modules/stylus-loader/dist/cjs.js!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../node_modules/vue-svg-inline-loader/src/index.js!./messaging-room.message.vue?vue&type=style&index=0&id=7ed2dfe6&lang=stylus&scoped=true&\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"8ff0bc86\", content, true, {});","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-3[0].rules[0].use[1]!../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../node_modules/postcss-loader/src/index.js??clonedRuleSet-3[0].rules[0].use[2]!../../../../../../node_modules/stylus-loader/dist/cjs.js!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../node_modules/vue-svg-inline-loader/src/index.js!./messaging-room.vue?vue&type=style&index=0&id=06566fd1&lang=stylus&scoped=true&\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"45625616\", content, true, {});"],"sourceRoot":""}